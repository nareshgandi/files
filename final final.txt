login as: root
root@192.168.113.133's password:
Activate the web console with: systemctl enable --now cockpit.socket

Last login: Tue Nov  5 23:41:47 2024
[root@lab01 ~]# sudo dnf install -y curl conntrack
CentOS Stream 9 - BaseOS                                                                                                     6.5 kB/s |
CentOS Stream 9 - AppStream                                                                                                   46 kB/s |
CentOS Stream 9 - CRB                                                                                                         30 kB/s |
CentOS Stream 9 - Extras packages                                                                                            4.8 kB/s |
Extra Packages for Enterprise Linux 9 - x86_64                                                                               5.6 kB/s |
Extra Packages for Enterprise Linux 9 - x86_64                                                                               5.3 MB/s |
Extra Packages for Enterprise Linux 9 - Next - x86_64                                                                         11 kB/s |
PostgreSQL common RPMs for RHEL / Rocky 9 - x86_64                                                                           485  B/s |
PostgreSQL common RPMs for RHEL / Rocky 9 - x86_64                                                                            27 kB/s |
PostgreSQL common RPMs for RHEL / Rocky / AlmaLinux 9 - x86_64                                                               379  B/s |
PostgreSQL common RPMs for RHEL / Rocky / AlmaLinux 9 - x86_64                                                               143 kB/s |
PostgreSQL 17 for RHEL / Rocky / AlmaLinux 9 - x86_64                                                                        441  B/s |
PostgreSQL 17 for RHEL / Rocky / AlmaLinux 9 - x86_64                                                                         58 kB/s |
PostgreSQL 16 for RHEL / Rocky / AlmaLinux 9 - x86_64                                                                        369  B/s |
PostgreSQL 16 for RHEL / Rocky / AlmaLinux 9 - x86_64                                                                         84 kB/s |
PostgreSQL 15 for RHEL / Rocky / AlmaLinux 9 - x86_64                                                                        471  B/s |
PostgreSQL 14 for RHEL / Rocky / AlmaLinux 9 - x86_64                                                                        486  B/s |
PostgreSQL 14 for RHEL / Rocky / AlmaLinux 9 - x86_64                                                                        251 kB/s |
PostgreSQL 13 for RHEL / Rocky / AlmaLinux 9 - x86_64                                                                        489  B/s |
PostgreSQL 13 for RHEL / Rocky / AlmaLinux 9 - x86_64                                                                        229 kB/s |
PostgreSQL 12 for RHEL / Rocky / AlmaLinux 9 - x86_64                                                                        463  B/s |
PostgreSQL 12 for RHEL / Rocky / AlmaLinux 9 - x86_64                                                                        272 kB/s |
Package curl-7.76.1-28.el9.x86_64 is already installed.
Dependencies resolved.
=======================================================================================================================================
 Package                                        Architecture                   Version                               Repository
=======================================================================================================================================
Installing:
 conntrack-tools                                x86_64                         1.4.7-2.el9                           appstream
Upgrading:
 curl                                           x86_64                         7.76.1-31.el9                         baseos
 libcurl                                        x86_64                         7.76.1-31.el9                         baseos
 openssl                                        x86_64                         1:3.2.2-6.el9                         baseos
 openssl-libs                                   x86_64                         1:3.2.2-6.el9                         baseos
Installing dependencies:
 libnetfilter_cthelper                          x86_64                         1.0.0-22.el9                          appstream
 libnetfilter_cttimeout                         x86_64                         1.0.0-19.el9                          appstream
 libnetfilter_queue                             x86_64                         1.0.5-1.el9                           appstream

Transaction Summary
=======================================================================================================================================
Install  4 Packages
Upgrade  4 Packages

Total download size: 4.6 M
Downloading Packages:
(1/8): libnetfilter_cthelper-1.0.0-22.el9.x86_64.rpm                                                                         211 kB/s |
(2/8): libnetfilter_cttimeout-1.0.0-19.el9.x86_64.rpm                                                                        199 kB/s |
(3/8): curl-7.76.1-31.el9.x86_64.rpm                                                                                         3.5 MB/s |
(4/8): conntrack-tools-1.4.7-2.el9.x86_64.rpm                                                                                939 kB/s |
(5/8): libnetfilter_queue-1.0.5-1.el9.x86_64.rpm                                                                             195 kB/s |
(6/8): libcurl-7.76.1-31.el9.x86_64.rpm                                                                                      4.2 MB/s |
(7/8): openssl-3.2.2-6.el9.x86_64.rpm                                                                                         10 MB/s |
(8/8): openssl-libs-3.2.2-6.el9.x86_64.rpm                                                                                   9.4 MB/s |
---------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                                        2.1 MB/s |
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :
  Upgrading        : openssl-libs-1:3.2.2-6.el9.x86_64
  Upgrading        : libcurl-7.76.1-31.el9.x86_64
  Installing       : libnetfilter_queue-1.0.5-1.el9.x86_64
  Installing       : libnetfilter_cttimeout-1.0.0-19.el9.x86_64
  Installing       : libnetfilter_cthelper-1.0.0-22.el9.x86_64
  Installing       : conntrack-tools-1.4.7-2.el9.x86_64
  Running scriptlet: conntrack-tools-1.4.7-2.el9.x86_64
  Upgrading        : curl-7.76.1-31.el9.x86_64
  Upgrading        : openssl-1:3.2.2-6.el9.x86_64
  Cleanup          : openssl-1:3.0.7-27.el9.x86_64
  Cleanup          : curl-7.76.1-28.el9.x86_64
  Cleanup          : libcurl-7.76.1-28.el9.x86_64
  Cleanup          : openssl-libs-1:3.0.7-27.el9.x86_64
  Running scriptlet: openssl-libs-1:3.0.7-27.el9.x86_64
  Verifying        : conntrack-tools-1.4.7-2.el9.x86_64
  Verifying        : libnetfilter_cthelper-1.0.0-22.el9.x86_64
  Verifying        : libnetfilter_cttimeout-1.0.0-19.el9.x86_64
  Verifying        : libnetfilter_queue-1.0.5-1.el9.x86_64
  Verifying        : curl-7.76.1-31.el9.x86_64
  Verifying        : curl-7.76.1-28.el9.x86_64
  Verifying        : libcurl-7.76.1-31.el9.x86_64
  Verifying        : libcurl-7.76.1-28.el9.x86_64
  Verifying        : openssl-1:3.2.2-6.el9.x86_64
  Verifying        : openssl-1:3.0.7-27.el9.x86_64
  Verifying        : openssl-libs-1:3.2.2-6.el9.x86_64
  Verifying        : openssl-libs-1:3.0.7-27.el9.x86_64

Upgraded:
  curl-7.76.1-31.el9.x86_64          libcurl-7.76.1-31.el9.x86_64          openssl-1:3.2.2-6.el9.x86_64          openssl-libs-1:3.2.2-6
Installed:
  conntrack-tools-1.4.7-2.el9.x86_64               libnetfilter_cthelper-1.0.0-22.el9.x86_64            libnetfilter_cttimeout-1.0.0-19
  libnetfilter_queue-1.0.5-1.el9.x86_64

Complete!
[root@lab01 ~]# dnf install -y docker
Last metadata expiration check: 0:00:16 ago on Tuesday 05 November 2024 11:43:29 PM.
Dependencies resolved.
=======================================================================================================================================
 Package                              Architecture                  Version                                           Repository
=======================================================================================================================================
Installing:
 podman-docker                        noarch                        4:5.2.3-6.el9                                     appstream
Upgrading:
 podman                               x86_64                        4:5.2.3-6.el9                                     appstream
Installing dependencies:
 passt                                x86_64                        0^20240806.gee36266-2.el9                         appstream
 passt-selinux                        noarch                        0^20240806.gee36266-2.el9                         appstream

Transaction Summary
=======================================================================================================================================
Install  3 Packages
Upgrade  1 Package

Total download size: 16 M
Downloading Packages:
                                                                [   ===                                                    ] ---  B/s |(1/4): passt-0^20240806.gee36266-2.el9.x86_64.rpm            0% [                                                          ] ---  B/s |(1/4): passt-selinux-0^20240806.gee36266-2.el9.noarch.rpm                                                                    508 kB/s |  31 kB     00:00
(2-3/4): passt-0^20240806.gee36266-2.el9.x86_64.rpm          0% [                                                          ] 506 kB/s |(2/4): podman-docker-5.2.3-6.el9.noarch.rpm                                                                                  1.1 MB/s | 103 kB     00:00
(3-4/4): passt-0^20240806.gee36266-2.el9.x86_64.rpm          1% [-                                                         ] 545 kB/s |(3/4): passt-0^20240806.gee36266-2.el9.x86_64.rpm                                                                            1.9 MB/s | 201 kB     00:00
(4/4): podman-5.2.3-6.el9.x86_64.rpm                         1% [=                                                         ] 562 kB/s |(4/4): podman-5.2.3-6.el9.x86_64.rpm                        31% [==================                                        ] 1.5 MB/s |(4/4): podman-5.2.3-6.el9.x86_64.rpm                        54% [===============================                           ] 2.1 MB/s |(4/4): podman-5.2.3-6.el9.x86_64.rpm                        77% [============================================-             ] 2.8 MB/s |(4/4): podman-5.2.3-6.el9.x86_64.rpm                        99% [=========================================================-] 3.3 MB/s |(4/4): podman-5.2.3-6.el9.x86_64.rpm                                                                                          12 MB/s |  16 MB     00:01
-------------------------------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                                        6.5 MB/s |  16 MB     00:02
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :  [=========================                                                                                         Preparing        :  [===================================================                                                               Preparing        :  [============================================================================                                      Preparing        :  [======================================================================================================            Preparing        :                                                                                                                                     1/1
  Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [                                                                            Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [==                                                                          Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [======                                                                      Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [=========                                                                   Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [=============                                                               Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [=================                                                           Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [==================                                                          Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [======================                                                      Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [==========================                                                  Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [=============================                                               Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [=================================                                           Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [====================================                                        Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [=======================================                                     Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [========================================                                    Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [============================================                                Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [===============================================                             Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [===================================================                         Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [======================================================                      Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [=========================================================                   Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [============================================================                Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [===============================================================             Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [===================================================================         Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [======================================================================      Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [=========================================================================   Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [==========================================================================  Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [==========================================================================  Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [==========================================================================  Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [==========================================================================  Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [==========================================================================  Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [==========================================================================  Installing       : passt-0^20240806.gee36266-2.el9.x86_64 [==========================================================================  Installing       : passt-0^20240806.gee36266-2.el9.x86_64                                                                                              1/5
  Running scriptlet: passt-selinux-0^20240806.gee36266-2.el9.noarch                                                                                      2/5
  Installing       : passt-selinux-0^20240806.gee36266-2.el9.noarch [                                                                    Installing       : passt-selinux-0^20240806.gee36266-2.el9.noarch [=============                                                       Installing       : passt-selinux-0^20240806.gee36266-2.el9.noarch [===========================                                         Installing       : passt-selinux-0^20240806.gee36266-2.el9.noarch [=======================================                             Installing       : passt-selinux-0^20240806.gee36266-2.el9.noarch [=====================================================               Installing       : passt-selinux-0^20240806.gee36266-2.el9.noarch [==================================================================  Installing       : passt-selinux-0^20240806.gee36266-2.el9.noarch [==================================================================  Installing       : passt-selinux-0^20240806.gee36266-2.el9.noarch [==================================================================  Installing       : passt-selinux-0^20240806.gee36266-2.el9.noarch                                                                                      2/5
  Running scriptlet: passt-selinux-0^20240806.gee36266-2.el9.noarch                                                                                      2/5
  Upgrading        : podman-4:5.2.3-6.el9.x86_64                                                                                   3/5
  Installing       : podman-docker-4:5.2.3-6.el9.noarch                                                                            4/5
  Running scriptlet: podman-2:4.9.2-1.el9.x86_64                                                                                   5/5
  Cleanup          : podman-2:4.9.2-1.el9.x86_64                                                                                   5/5
  Running scriptlet: passt-selinux-0^20240806.gee36266-2.el9.noarch                                                                5/5
  Running scriptlet: podman-2:4.9.2-1.el9.x86_64                                                                                   5/5
  Verifying        : passt-0^20240806.gee36266-2.el9.x86_64                                                                        1/5
  Verifying        : passt-selinux-0^20240806.gee36266-2.el9.noarch                                                                2/5
  Verifying        : podman-docker-4:5.2.3-6.el9.noarch                                                                            3/5
  Verifying        : podman-4:5.2.3-6.el9.x86_64                                                                                   4/5
  Verifying        : podman-2:4.9.2-1.el9.x86_64                                                                                   5/5

Upgraded:
  podman-4:5.2.3-6.el9.x86_64
Installed:
  passt-0^20240806.gee36266-2.el9.x86_64     passt-selinux-0^20240806.gee36266-2.el9.noarch     podman-docker-4:5.2.3-6.el9.noarch

Complete!
[root@lab01 ~]# systemctl enable --now docker
Failed to enable unit: Unit file docker.service does not exist.
[root@lab01 ~]# systemctl enable docker
Failed to enable unit: Unit file docker.service does not exist.
[root@lab01 ~]#  dnf config-manager --add-repo=https://download.docker.com/linux/centos/docker-ce.repo
Adding repo from: https://download.docker.com/linux/centos/docker-ce.repo
[root@lab01 ~]#  dnf install -y docker-ce docker-ce-cli containerd.io
Docker CE Stable - x86_64                                                                              178 kB/s |  58 kB     00:00
Error:
 Problem: problem with installed package podman-docker-4:5.2.3-6.el9.noarch
  - package docker-ce-3:27.3.1-1.el9.x86_64 from docker-ce-stable conflicts with docker provided by podman-docker-4:5.2.3-6.el9.noarch from @System
  - package docker-ce-3:27.3.1-1.el9.x86_64 from docker-ce-stable conflicts with docker provided by podman-docker-2:5.1.2-1.el9.noarch from appstream
  - package docker-ce-3:27.3.1-1.el9.x86_64 from docker-ce-stable conflicts with docker provided by podman-docker-2:5.2.0-2.el9.noarch from appstream
  - package docker-ce-3:27.3.1-1.el9.x86_64 from docker-ce-stable conflicts with docker provided by podman-docker-2:5.2.1-1.el9.noarch from appstream
  - package docker-ce-3:27.3.1-1.el9.x86_64 from docker-ce-stable conflicts with docker provided by podman-docker-2:5.2.2-1.el9.noarch from appstream
  - package docker-ce-3:27.3.1-1.el9.x86_64 from docker-ce-stable conflicts with docker provided by podman-docker-4:5.2.3-6.el9.noarch from appstream
  - cannot install the best candidate for the job
(try to add '--allowerasing' to command line to replace conflicting packages or '--skip-broken' to skip uninstallable packages or '--nobest' to use not only best candidate packages)
[root@lab01 ~]# systemctl start docker
Failed to start docker.service: Unit docker.service not found.
[root@lab01 ~]# dnf install -y docker-ce docker-ce-cli containerd.io
Last metadata expiration check: 0:00:12 ago on Tuesday 05 November 2024 11:44:49 PM.
Error:
 Problem: problem with installed package podman-docker-4:5.2.3-6.el9.noarch
  - package docker-ce-3:27.3.1-1.el9.x86_64 from docker-ce-stable conflicts with docker provided by podman-docker-4:5.2.3-6.el9.noarch from @System
  - package docker-ce-3:27.3.1-1.el9.x86_64 from docker-ce-stable conflicts with docker provided by podman-docker-2:5.1.2-1.el9.noarch from appstream
  - package docker-ce-3:27.3.1-1.el9.x86_64 from docker-ce-stable conflicts with docker provided by podman-docker-2:5.2.0-2.el9.noarch from appstream
  - package docker-ce-3:27.3.1-1.el9.x86_64 from docker-ce-stable conflicts with docker provided by podman-docker-2:5.2.1-1.el9.noarch from appstream
  - package docker-ce-3:27.3.1-1.el9.x86_64 from docker-ce-stable conflicts with docker provided by podman-docker-2:5.2.2-1.el9.noarch from appstream
  - package docker-ce-3:27.3.1-1.el9.x86_64 from docker-ce-stable conflicts with docker provided by podman-docker-4:5.2.3-6.el9.noarch from appstream
  - cannot install the best candidate for the job
(try to add '--allowerasing' to command line to replace conflicting packages or '--skip-broken' to skip uninstallable packages or '--nobest' to use not only best candidate packages)
[root@lab01 ~]# dnf install -y docker
Last metadata expiration check: 0:01:07 ago on Tuesday 05 November 2024 11:44:49 PM.
Package podman-docker-4:5.2.3-6.el9.noarch is already installed.
Dependencies resolved.
Nothing to do.
Complete!
[root@lab01 ~]# systemctl enable --now docker
Failed to enable unit: Unit file docker.service does not exist.
[root@lab01 ~]#  dnf remove -y podman podman-docker
Dependencies resolved.
=======================================================================================================================================
 Package                            Architecture           Version                                    Repository                  Size
=======================================================================================================================================
Removing:
 podman                             x86_64                 4:5.2.3-6.el9                              @appstream                  54 M
 podman-docker                      noarch                 4:5.2.3-6.el9                              @appstream                  11 k
Removing dependent packages:
 cockpit-podman                     noarch                 84.1-1.el9                                 @AppStream                 682 k
Removing unused dependencies:
 conmon                             x86_64                 2:2.1.10-1.el9                             @AppStream                 170 k
 passt                              x86_64                 0^20240806.gee36266-2.el9                  @appstream                 831 k
 passt-selinux                      noarch                 0^20240806.gee36266-2.el9                  @appstream                 196 k
 shadow-utils-subid                 x86_64                 2:4.9-8.el9                                @anaconda                  215 k

Transaction Summary
=======================================================================================================================================
Remove  7 Packages

Freed space: 56 M
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                                                                               1/1
  Erasing          : podman-docker-4:5.2.3-6.el9.noarch                                                                            1/7
  Erasing          : cockpit-podman-84.1-1.el9.noarch                                                                              2/7
  Running scriptlet: podman-4:5.2.3-6.el9.x86_64                                                                                   3/7
  Erasing          : podman-4:5.2.3-6.el9.x86_64                                                                                   3/7
  Erasing          : passt-0^20240806.gee36266-2.el9.x86_64                                                                        4/7
  Erasing          : passt-selinux-0^20240806.gee36266-2.el9.noarch                                                                5/7
  Running scriptlet: passt-selinux-0^20240806.gee36266-2.el9.noarch                                                                5/7
  Erasing          : conmon-2:2.1.10-1.el9.x86_64                                                                                  6/7
  Erasing          : shadow-utils-subid-2:4.9-8.el9.x86_64                                                                         7/7
  Running scriptlet: shadow-utils-subid-2:4.9-8.el9.x86_64                                                                         7/7
  Verifying        : cockpit-podman-84.1-1.el9.noarch                                                                              1/7
  Verifying        : conmon-2:2.1.10-1.el9.x86_64                                                                                  2/7
  Verifying        : passt-0^20240806.gee36266-2.el9.x86_64                                                                        3/7
  Verifying        : passt-selinux-0^20240806.gee36266-2.el9.noarch                                                                4/7
  Verifying        : podman-4:5.2.3-6.el9.x86_64                                                                                   5/7
  Verifying        : podman-docker-4:5.2.3-6.el9.noarch                                                                            6/7
  Verifying        : shadow-utils-subid-2:4.9-8.el9.x86_64                                                                         7/7

Removed:
  cockpit-podman-84.1-1.el9.noarch                     conmon-2:2.1.10-1.el9.x86_64       passt-0^20240806.gee36266-2.el9.x86_64
  passt-selinux-0^20240806.gee36266-2.el9.noarch       podman-4:5.2.3-6.el9.x86_64        podman-docker-4:5.2.3-6.el9.noarch
  shadow-utils-subid-2:4.9-8.el9.x86_64

Complete!
[root@lab01 ~]#  dnf install -y dnf-plugins-core
Last metadata expiration check: 0:03:00 ago on Tuesday 05 November 2024 11:44:49 PM.
Package dnf-plugins-core-4.3.0-13.el9.noarch is already installed.
Dependencies resolved.
=======================================================================================================================================
 Package                                     Architecture              Version                         Repository                 Size
=======================================================================================================================================
Upgrading:
 dnf-plugins-core                            noarch                    4.3.0-17.el9                    baseos                     37 k
 python3-dnf-plugins-core                    noarch                    4.3.0-17.el9                    baseos                    264 k

Transaction Summary
=======================================================================================================================================
Upgrade  2 Packages

Total download size: 300 k
Downloading Packages:
(1/2): dnf-plugins-core-4.3.0-17.el9.noarch.rpm                                                        533 kB/s |  37 kB     00:00
(2/2): python3-dnf-plugins-core-4.3.0-17.el9.noarch.rpm                                                2.5 MB/s | 264 kB     00:00
---------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                  863 kB/s | 300 kB     00:00
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                                                                               1/1
  Upgrading        : python3-dnf-plugins-core-4.3.0-17.el9.noarch                                                                  1/4
  Upgrading        : dnf-plugins-core-4.3.0-17.el9.noarch                                                                          2/4
  Cleanup          : dnf-plugins-core-4.3.0-13.el9.noarch                                                                          3/4
  Cleanup          : python3-dnf-plugins-core-4.3.0-13.el9.noarch                                                                  4/4
  Running scriptlet: python3-dnf-plugins-core-4.3.0-13.el9.noarch                                                                  4/4
  Verifying        : dnf-plugins-core-4.3.0-17.el9.noarch                                                                          1/4
  Verifying        : dnf-plugins-core-4.3.0-13.el9.noarch                                                                          2/4
  Verifying        : python3-dnf-plugins-core-4.3.0-17.el9.noarch                                                                  3/4
  Verifying        : python3-dnf-plugins-core-4.3.0-13.el9.noarch                                                                  4/4

Upgraded:
  dnf-plugins-core-4.3.0-17.el9.noarch                           python3-dnf-plugins-core-4.3.0-17.el9.noarch

Complete!
[root@lab01 ~]# dnf config-manager --add-repo=https://download.docker.com/linux/centos/docker-ce.repo
Adding repo from: https://download.docker.com/linux/centos/docker-ce.repo
[root@lab01 ~]# dnf install -y docker-ce docker-ce-cli containerd.io
Docker CE Stable - x86_64                                                                               55 kB/s | 3.5 kB     00:00
Dependencies resolved.
=======================================================================================================================================
 Package                                  Architecture          Version                          Repository                       Size
=======================================================================================================================================
Installing:
 containerd.io                            x86_64                1.7.22-3.1.el9                   docker-ce-stable                 43 M
 docker-ce                                x86_64                3:27.3.1-1.el9                   docker-ce-stable                 27 M
 docker-ce-cli                            x86_64                1:27.3.1-1.el9                   docker-ce-stable                8.0 M
Installing weak dependencies:
 docker-buildx-plugin                     x86_64                0.17.1-1.el9                     docker-ce-stable                 14 M
 docker-ce-rootless-extras                x86_64                27.3.1-1.el9                     docker-ce-stable                4.4 M
 docker-compose-plugin                    x86_64                2.29.7-1.el9                     docker-ce-stable                 13 M

Transaction Summary
=======================================================================================================================================
Install  6 Packages

Total download size: 109 M
Installed size: 426 M
Downloading Packages:
(1/6): docker-ce-27.3.1-1.el9.x86_64.rpm                                                               5.4 MB/s |  27 MB     00:05
(2/6): docker-buildx-plugin-0.17.1-1.el9.x86_64.rpm                                                    2.7 MB/s |  14 MB     00:05
(3/6): docker-ce-rootless-extras-27.3.1-1.el9.x86_64.rpm                                               2.4 MB/s | 4.4 MB     00:01
(4/6): docker-ce-cli-27.3.1-1.el9.x86_64.rpm                                                           3.7 MB/s | 8.0 MB     00:02
(5/6): containerd.io-1.7.22-3.1.el9.x86_64.rpm                                                         5.0 MB/s |  43 MB     00:08
(6/6): docker-compose-plugin-2.29.7-1.el9.x86_64.rpm                                                   5.6 MB/s |  13 MB     00:02
---------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                   12 MB/s | 109 MB     00:09
Docker CE Stable - x86_64                                                                               35 kB/s | 1.6 kB     00:00
Importing GPG key 0x621E9F35:
 Userid     : "Docker Release (CE rpm) <docker@docker.com>"
 Fingerprint: 060A 61C5 1B55 8A7F 742B 77AA C52F EB6B 621E 9F35
 From       : https://download.docker.com/linux/centos/gpg
Key imported successfully
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                                                                               1/1
  Installing       : docker-compose-plugin-2.29.7-1.el9.x86_64                                                                     1/6
  Running scriptlet: docker-compose-plugin-2.29.7-1.el9.x86_64                                                                     1/6
  Installing       : docker-buildx-plugin-0.17.1-1.el9.x86_64                                                                      2/6
  Running scriptlet: docker-buildx-plugin-0.17.1-1.el9.x86_64                                                                      2/6
  Installing       : docker-ce-cli-1:27.3.1-1.el9.x86_64                                                                           3/6
  Running scriptlet: docker-ce-cli-1:27.3.1-1.el9.x86_64                                                                           3/6
  Installing       : containerd.io-1.7.22-3.1.el9.x86_64                                                                           4/6
  Running scriptlet: containerd.io-1.7.22-3.1.el9.x86_64                                                                           4/6
  Installing       : docker-ce-rootless-extras-27.3.1-1.el9.x86_64                                                                 5/6
  Running scriptlet: docker-ce-rootless-extras-27.3.1-1.el9.x86_64                                                                 5/6
  Installing       : docker-ce-3:27.3.1-1.el9.x86_64                                                                               6/6
  Running scriptlet: docker-ce-3:27.3.1-1.el9.x86_64                                                                               6/6
  Verifying        : containerd.io-1.7.22-3.1.el9.x86_64                                                                           1/6
  Verifying        : docker-buildx-plugin-0.17.1-1.el9.x86_64                                                                      2/6
  Verifying        : docker-ce-3:27.3.1-1.el9.x86_64                                                                               3/6
  Verifying        : docker-ce-cli-1:27.3.1-1.el9.x86_64                                                                           4/6
  Verifying        : docker-ce-rootless-extras-27.3.1-1.el9.x86_64                                                                 5/6
  Verifying        : docker-compose-plugin-2.29.7-1.el9.x86_64                                                                     6/6

Installed:
  containerd.io-1.7.22-3.1.el9.x86_64    docker-buildx-plugin-0.17.1-1.el9.x86_64         docker-ce-3:27.3.1-1.el9.x86_64
  docker-ce-cli-1:27.3.1-1.el9.x86_64    docker-ce-rootless-extras-27.3.1-1.el9.x86_64    docker-compose-plugin-2.29.7-1.el9.x86_64

Complete!
[root@lab01 ~]# systemctl enable --now docker
Created symlink /etc/systemd/system/multi-user.target.wants/docker.service → /usr/lib/systemd/system/docker.service.
[root@lab01 ~]# curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 99.0M  100 99.0M    0     0  9234k      0  0:00:10  0:00:10 --:--:-- 12.5M
[root@lab01 ~]# sudo install minikube-linux-amd64 /usr/local/bin/minikube
[root@lab01 ~]# minikube start --driver=docker --cpus=2 --memory=2048mb --disk-size=20g
* minikube v1.34.0 on Centos 9
* Using the docker driver based on user configuration
* The "docker" driver should not be used with root privileges. If you wish to continue as root, use --force.
* If you are running minikube within a VM, consider using --driver=none:
*   https://minikube.sigs.k8s.io/docs/reference/drivers/none/

X Exiting due to DRV_AS_ROOT: The "docker" driver should not be used with root privileges.

[root@lab01 ~]# minikube start --driver=docker --cpus=2 --memory=2048mb --disk-size=20g --force
* minikube v1.34.0 on Centos 9
! minikube skips various validations when --force is supplied; this may lead to unexpected behavior
* Using the docker driver based on user configuration
* The "docker" driver should not be used with root privileges. If you wish to continue as root, use --force.
* If you are running minikube within a VM, consider using --driver=none:
*   https://minikube.sigs.k8s.io/docs/reference/drivers/none/
* Using Docker driver with root privileges
* Starting "minikube" primary control-plane node in "minikube" cluster
* Pulling base image v0.0.45 ...
* Downloading Kubernetes v1.31.0 preload ...
    > preloaded-images-k8s-v18-v1...:  326.69 MiB / 326.69 MiB  100.00% 4.63 Mi
    > gcr.io/k8s-minikube/kicbase...:  487.90 MiB / 487.90 MiB  100.00% 6.14 Mi
* Creating docker container (CPUs=2, Memory=2048MB) ...
* Preparing Kubernetes v1.31.0 on Docker 27.2.0 ...
  - Generating certificates and keys ...
  - Booting up control plane ...
  - Configuring RBAC rules ...
* Configuring bridge CNI (Container Networking Interface) ...
* Verifying Kubernetes components...
  - Using image gcr.io/k8s-minikube/storage-provisioner:v5
* Enabled addons: default-storageclass, storage-provisioner
* kubectl not found. If you need it, try: 'minikube kubectl -- get pods -A'
* Done! kubectl is now configured to use "minikube" cluster and "default" namespace by default
[root@lab01 ~]#
[root@lab01 ~]# curl -fsSL https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash
[WARNING] Could not find git. It is required for plugin installation.
Downloading https://get.helm.sh/helm-v3.16.2-linux-amd64.tar.gz
Verifying checksum... Done.
Preparing to install helm into /usr/local/bin
helm installed into /usr/local/bin/helm
[root@lab01 ~]# helm repo add bitnami https://charts.bitnami.com/bitnami
"bitnami" has been added to your repositories
[root@lab01 ~]# helm repo update
Hang tight while we grab the latest from your chart repositories...
...Successfully got an update from the "bitnami" chart repository
Update Complete. ⎈Happy Helming!⎈
[root@lab01 ~]# vi values-postgres.yaml
[root@lab01 ~]# helm install my-postgresql-cluster -f values-postgres.yaml bitnami/postgresql
NAME: my-postgresql-cluster
LAST DEPLOYED: Tue Nov  5 23:55:02 2024
NAMESPACE: default
STATUS: deployed
REVISION: 1
TEST SUITE: None
NOTES:
CHART NAME: postgresql
CHART VERSION: 16.1.1
APP VERSION: 17.0.0

** Please be patient while the chart is being deployed **

PostgreSQL can be accessed via port 5432 on the following DNS names from within your cluster:

    my-postgresql-cluster.default.svc.cluster.local - Read/Write connection

To get the password for "postgres" run:

    export POSTGRES_PASSWORD=$(kubectl get secret --namespace default my-postgresql-cluster -o jsonpath="{.data.postgres-password}" | base64 -d)

To connect to your database run the following command:

    kubectl run my-postgresql-cluster-client --rm --tty -i --restart='Never' --namespace default --image docker.io/bitnami/postgresql:17.0.0-debian-12-r9 --env="PGPASSWORD=$POSTGRES_PASSWORD" \
      --command -- psql --host my-postgresql-cluster -U postgres -d postgres -p 5432

    > NOTE: If you access the container using bash, make sure that you execute "/opt/bitnami/scripts/postgresql/entrypoint.sh /bin/bash" in order to avoid the error "psql: local user with ID 1001} does not exist"

To connect to your database from outside the cluster execute the following commands:

  NOTE: It may take a few minutes for the LoadBalancer IP to be available.
        Watch the status with: 'kubectl get svc --namespace default -w my-postgresql-cluster'

    export SERVICE_IP=$(kubectl get svc --namespace default my-postgresql-cluster --template "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}")
    PGPASSWORD="$POSTGRES_PASSWORD" psql --host $SERVICE_IP --port 5432 -U postgres -d postgres

WARNING: The configured password will be ignored on new installation in case when previous PostgreSQL release was deleted through the helm command. In that case, old PVC will have an old password, and setting it through helm won't take effect. Deleting persistent volumes (PVs) will solve the issue.

WARNING: There are "resources" sections in the chart not set. Using "resourcesPreset" is not recommended for production. For production installations, please set the following values according to your workload needs:
  - primary.resources
  - readReplicas.resources
+info https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# kubectl get pods
bash: kubectl: command not found...
[root@lab01 ~]# cd  /usr/local/bin
[root@lab01 bin]# ls -lrt
total 157176
-rwxr-xr-x. 1 root root 103820392 Nov  5 23:48 minikube
-rwxr-xr-x. 1 root root  57122968 Nov  5 23:51 helm
[root@lab01 bin]# cd ../
[root@lab01 local]# cd
[root@lab01 ~]# ls -lrt
total 101396
-rw-------. 1 root root      1220 Mar  5  2024 anaconda-ks.cfg
drwxr-xr-x. 2 root root         6 Mar  5  2024 Videos
drwxr-xr-x. 2 root root         6 Mar  5  2024 Templates
drwxr-xr-x. 2 root root         6 Mar  5  2024 Public
drwxr-xr-x. 2 root root         6 Mar  5  2024 Pictures
drwxr-xr-x. 2 root root         6 Mar  5  2024 Music
drwxr-xr-x. 2 root root         6 Mar  5  2024 Downloads
drwxr-xr-x. 2 root root         6 Mar  5  2024 Documents
drwxr-xr-x. 2 root root         6 Mar  5  2024 Desktop
-rw-r--r--. 1 root root 103820392 Nov  5 23:48 minikube-linux-amd64
-rw-r--r--. 1 root root        43 Nov  5 23:54 values-postgres.yaml
[root@lab01 ~]# curl -LO "https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl"
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 53.7M  100 53.7M    0     0  8808k      0  0:00:06  0:00:06 --:--:-- 12.4M
[root@lab01 ~]# chmod +x kubectl
[root@lab01 ~]# sudo mv kubectl /usr/local/bin/
[root@lab01 ~]# kubectl version --client
Client Version: v1.31.0
Kustomize Version: v5.4.2
[root@lab01 ~]# kubectl get nodes
NAME       STATUS   ROLES           AGE     VERSION
minikube   Ready    control-plane   7m12s   v1.31.0
[root@lab01 ~]# kubectl get pods -A
NAMESPACE     NAME                               READY   STATUS    RESTARTS        AGE
default       my-postgresql-cluster-0            1/1     Running   0               3m23s
kube-system   coredns-6f6b679f8f-8m5d9           1/1     Running   0               7m10s
kube-system   etcd-minikube                      1/1     Running   0               7m15s
kube-system   kube-apiserver-minikube            1/1     Running   0               7m15s
kube-system   kube-controller-manager-minikube   1/1     Running   0               7m15s
kube-system   kube-proxy-9ns5w                   1/1     Running   0               7m10s
kube-system   kube-scheduler-minikube            1/1     Running   0               7m15s
kube-system   storage-provisioner                1/1     Running   1 (6m49s ago)   7m13s
[root@lab01 ~]# kubectl get svc
NAME                       TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE
kubernetes                 ClusterIP      10.96.0.1       <none>        443/TCP          8m49s
my-postgresql-cluster      LoadBalancer   10.100.90.198   <pending>     5432:31779/TCP   4m57s
my-postgresql-cluster-hl   ClusterIP      None            <none>        5432/TCP         4m57s
[root@lab01 ~]#
[root@lab01 ~]# kubectl logs my-postgresql-cluster-0
postgresql 18:25:26.65 INFO  ==>
postgresql 18:25:26.65 INFO  ==> Welcome to the Bitnami postgresql container
postgresql 18:25:26.65 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
postgresql 18:25:26.66 INFO  ==> Submit issues and feature requests at https://github.com/bitnami/containers/issues
postgresql 18:25:26.74 INFO  ==> Upgrade to Tanzu Application Catalog for production environments to access custom-configured and pre-packaged software components. Gain enhanced features, including Software Bill of Materials (SBOM), CVE scan result reports, and VEX documents. To learn more, visit https://bitnami.com/enterprise
postgresql 18:25:26.75 INFO  ==>
postgresql 18:25:26.95 INFO  ==> ** Starting PostgreSQL setup **
postgresql 18:25:27.04 INFO  ==> Validating settings in POSTGRESQL_* env vars..
postgresql 18:25:27.05 INFO  ==> Loading custom pre-init scripts...
postgresql 18:25:27.15 INFO  ==> Initializing PostgreSQL database...
postgresql 18:25:27.26 INFO  ==> pg_hba.conf file not detected. Generating it...
postgresql 18:25:27.34 INFO  ==> Generating local authentication configuration
postgresql 18:25:32.94 INFO  ==> Starting PostgreSQL in background...
postgresql 18:25:34.25 INFO  ==> Changing password of postgres
postgresql 18:25:34.64 INFO  ==> Configuring replication parameters
postgresql 18:25:35.25 INFO  ==> Configuring synchronous_replication
postgresql 18:25:35.25 INFO  ==> Configuring fsync
postgresql 18:25:35.65 INFO  ==> Stopping PostgreSQL...
waiting for server to shut down.... done
server stopped
postgresql 18:25:35.86 INFO  ==> Loading custom scripts...
postgresql 18:25:35.87 INFO  ==> Enabling remote connections
postgresql 18:25:35.94 INFO  ==> ** PostgreSQL setup finished! **

postgresql 18:25:36.05 INFO  ==> ** Starting PostgreSQL **
2024-11-05 18:25:36.247 GMT [1] LOG:  pgaudit extension initialized
2024-11-05 18:25:36.349 GMT [1] LOG:  starting PostgreSQL 17.0 on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
2024-11-05 18:25:36.349 GMT [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
2024-11-05 18:25:36.349 GMT [1] LOG:  listening on IPv6 address "::", port 5432
2024-11-05 18:25:36.351 GMT [1] LOG:  listening on Unix socket "/tmp/.s.PGSQL.5432"
2024-11-05 18:25:36.447 GMT [139] LOG:  database system was shut down at 2024-11-05 18:25:35 GMT
2024-11-05 18:25:36.456 GMT [1] LOG:  database system is ready to accept connections
2024-11-05 18:30:36.453 GMT [137] LOG:  checkpoint starting: time
2024-11-05 18:30:39.899 GMT [137] LOG:  checkpoint complete: wrote 37 buffers (0.2%); 0 WAL file(s) added, 0 removed, 0 recycled; write=3.438 s, sync=0.004 s, total=3.446 s; sync files=10, longest=0.002 s, average=0.001 s; distance=193 kB, estimate=193 kB; lsn=0/1515608, redo lsn=0/15155B0
[root@lab01 ~]# kubectl get pods -l app.kubernetes.io/instance=my-postgresql-cluster
NAME                      READY   STATUS    RESTARTS   AGE
my-postgresql-cluster-0   1/1     Running   0          10m
[root@lab01 ~]# vi create_database.sql
[root@lab01 ~]# sudo dnf install -y python3
Last metadata expiration check: 0:18:54 ago on Tuesday 05 November 2024 11:48:00 PM.
Package python3-3.9.18-3.el9.x86_64 is already installed.
Dependencies resolved.
=======================================================================================================================================
 Package                                     Architecture            Version                          Repository                  Size
=======================================================================================================================================
Upgrading:
 python-unversioned-command                  noarch                  3.9.20-1.el9                     appstream                   10 k
 python3                                     x86_64                  3.9.20-1.el9                     baseos                      27 k
 python3-libs                                x86_64                  3.9.20-1.el9                     baseos                     8.1 M

Transaction Summary
=======================================================================================================================================
Upgrade  3 Packages

Total download size: 8.1 M
Downloading Packages:
(1/3): python-unversioned-command-3.9.20-1.el9.noarch.rpm                                              139 kB/s |  10 kB     00:00
(2/3): python3-3.9.20-1.el9.x86_64.rpm                                                                 320 kB/s |  27 kB     00:00
(3/3): python3-libs-3.9.20-1.el9.x86_64.rpm                                                             12 MB/s | 8.1 MB     00:00
---------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                  2.7 MB/s | 8.1 MB     00:03
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                                                                               1/1
  Upgrading        : python3-libs-3.9.20-1.el9.x86_64                                                                              1/6
  Upgrading        : python-unversioned-command-3.9.20-1.el9.noarch                                                                2/6
  Upgrading        : python3-3.9.20-1.el9.x86_64                                                                                   3/6
  Cleanup          : python3-3.9.18-3.el9.x86_64                                                                                   4/6
  Cleanup          : python-unversioned-command-3.9.18-3.el9.noarch                                                                5/6
  Cleanup          : python3-libs-3.9.18-3.el9.x86_64                                                                              6/6
  Running scriptlet: python3-libs-3.9.18-3.el9.x86_64                                                                              6/6
  Verifying        : python3-3.9.20-1.el9.x86_64                                                                                   1/6
  Verifying        : python3-3.9.18-3.el9.x86_64                                                                                   2/6
  Verifying        : python3-libs-3.9.20-1.el9.x86_64                                                                              3/6
  Verifying        : python3-libs-3.9.18-3.el9.x86_64                                                                              4/6
  Verifying        : python-unversioned-command-3.9.20-1.el9.noarch                                                                5/6
  Verifying        : python-unversioned-command-3.9.18-3.el9.noarch                                                                6/6

Upgraded:
  python-unversioned-command-3.9.20-1.el9.noarch         python3-3.9.20-1.el9.x86_64         python3-libs-3.9.20-1.el9.x86_64

Complete!
[root@lab01 ~]# pip3 install faker psycopg2-binary
bash: pip3: command not found...
Install package 'python3-pip' to provide command 'pip3'? [N/y] y


 * Waiting in queue...
 * Loading list of packages....
The following packages have to be installed:
 python3-pip-21.3.1-1.el9.noarch        A tool for installing and managing Python3 packages
Proceed with changes? [N/y] y


 * Waiting in queue...
 * Waiting for authentication...
 * Waiting in queue...
 * Downloading packages...
 * Requesting data...
 * Testing changes...
 * Installing packages...
Collecting faker
  Downloading Faker-30.8.2-py3-none-any.whl (1.8 MB)
     |████████████████████████████████| 1.8 MB 3.7 MB/s
Collecting psycopg2-binary
  Downloading psycopg2_binary-2.9.10-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.0 MB)
     |████████████████████████████████| 3.0 MB 18.5 MB/s
Requirement already satisfied: python-dateutil>=2.4 in /usr/lib/python3.9/site-packages (from faker) (2.8.1)
Collecting typing-extensions
  Downloading typing_extensions-4.12.2-py3-none-any.whl (37 kB)
Requirement already satisfied: six>=1.5 in /usr/lib/python3.9/site-packages (from python-dateutil>=2.4->faker) (1.15.0)
Installing collected packages: typing-extensions, psycopg2-binary, faker
Successfully installed faker-30.8.2 psycopg2-binary-2.9.10 typing-extensions-4.12.2
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv

[root@lab01 ~]# pip3 install faker psycopg2-binary
Requirement already satisfied: faker in /usr/local/lib/python3.9/site-packages (30.8.2)
Requirement already satisfied: psycopg2-binary in /usr/local/lib64/python3.9/site-packages (2.9.10)
Requirement already satisfied: typing-extensions in /usr/local/lib/python3.9/site-packages (from faker) (4.12.2)
Requirement already satisfied: python-dateutil>=2.4 in /usr/lib/python3.9/site-packages (from faker) (2.8.1)
Requirement already satisfied: six>=1.5 in /usr/lib/python3.9/site-packages (from python-dateutil>=2.4->faker) (1.15.0)
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
[root@lab01 ~]# vi data_insert.py
[root@lab01 ~]# kubectl get svc
NAME                       TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE
kubernetes                 ClusterIP      10.96.0.1       <none>        443/TCP          16m
my-postgresql-cluster      LoadBalancer   10.100.90.198   <pending>     5432:31779/TCP   12m
my-postgresql-cluster-hl   ClusterIP      None            <none>        5432/TCP         12m
[root@lab01 ~]# export POSTGRES_PASSWORD=$(kubectl get secret --namespace default my-postgresql-cluster -o jsonpath="{.data.postgres-password}" | base64 -d)
[root@lab01 ~]# kubectl run my-postgresql-cluster-client --rm --tty -i --restart='Never' --namespace default --image docker.io/bitnami/postgresql:17.0.0-debian-12-r9 --env="PGPASSWORD=$POSTGRES_PASSWORD" \
      --command -- psql --host my-postgresql-cluster -U postgres -d postgres -p 5432
If you don't see a command prompt, try pressing enter.

postgres=#
postgres=# \q
could not save history to file "//.psql_history": Permission denied
pod "my-postgresql-cluster-client" deleted
[root@lab01 ~]#
[root@lab01 ~]# echo $POSTGRES_PASSWORD
c7u44Soa67
[root@lab01 ~]# echo SERVICE_IP=$(kubectl get svc --namespace default my-postgresql-cluster --template "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}")
error: error executing template "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}": template: output:1:10: executing "output" at <index .status.loadBalancer.ingress 0>: error calling index: index of untyped nil
SERVICE_IP=Error executing template: template: output:1:10: executing "output" at <index .status.loadBalancer.ingress 0>: error calling index: index of untyped nil. Printing more information for debugging the template: template was: {{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }} raw data was: {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{"meta.helm.sh/release-name":"my-postgresql-cluster","meta.helm.sh/release-namespace":"default"},"creationTimestamp":"2024-11-05T18:25:02Z","labels":{"app.kubernetes.io/component":"primary","app.kubernetes.io/instance":"my-postgresql-cluster","app.kubernetes.io/managed-by":"Helm","app.kubernetes.io/name":"postgresql","app.kubernetes.io/version":"17.0.0","helm.sh/chart":"postgresql-16.1.1"},"managedFields":[{"apiVersion":"v1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:meta.helm.sh/release-name":{},"f:meta.helm.sh/release-namespace":{}},"f:labels":{".":{},"f:app.kubernetes.io/component":{},"f:app.kubernetes.io/instance":{},"f:app.kubernetes.io/managed-by":{},"f:app.kubernetes.io/name":{},"f:app.kubernetes.io/version":{},"f:helm.sh/chart":{}}},"f:spec":{"f:allocateLoadBalancerNodePorts":{},"f:externalTrafficPolicy":{},"f:internalTrafficPolicy":{},"f:ports":{".":{},"k:{\"port\":5432,\"protocol\":\"TCP\"}":{".":{},"f:name":{},"f:port":{},"f:protocol":{},"f:targetPort":{}}},"f:selector":{},"f:sessionAffinity":{},"f:type":{}}},"manager":"helm","operation":"Update","time":"2024-11-05T18:25:02Z"}],"name":"my-postgresql-cluster","namespace":"default","resourceVersion":"564","uid":"12715158-c30d-49c9-8044-69fc53a857c8"},"spec":{"allocateLoadBalancerNodePorts":true,"clusterIP":"10.100.90.198","clusterIPs":["10.100.90.198"],"externalTrafficPolicy":"Cluster","internalTrafficPolicy":"Cluster","ipFamilies":["IPv4"],"ipFamilyPolicy":"SingleStack","ports":[{"name":"tcp-postgresql","nodePort":31779,"port":5432,"protocol":"TCP","targetPort":"tcp-postgresql"}],"selector":{"app.kubernetes.io/component":"primary","app.kubernetes.io/instance":"my-postgresql-cluster","app.kubernetes.io/name":"postgresql"},"sessionAffinity":"None","type":"LoadBalancer"},"status":{"loadBalancer":{}}} object given to template engine was: map[apiVersion:v1 kind:Service metadata:map[annotations:map[meta.helm.sh/release-name:my-postgresql-cluster meta.helm.sh/release-namespace:default] creationTimestamp:2024-11-05T18:25:02Z labels:map[app.kubernetes.io/component:primary app.kubernetes.io/instance:my-postgresql-cluster app.kubernetes.io/managed-by:Helm app.kubernetes.io/name:postgresql app.kubernetes.io/version:17.0.0 helm.sh/chart:postgresql-16.1.1] managedFields:[map[apiVersion:v1 fieldsType:FieldsV1 fieldsV1:map[f:metadata:map[f:annotations:map[.:map[] f:meta.helm.sh/release-name:map[] f:meta.helm.sh/release-namespace:map[]] f:labels:map[.:map[] f:app.kubernetes.io/component:map[] f:app.kubernetes.io/instance:map[] f:app.kubernetes.io/managed-by:map[] f:app.kubernetes.io/name:map[] f:app.kubernetes.io/version:map[] f:helm.sh/chart:map[]]] f:spec:map[f:allocateLoadBalancerNodePorts:map[] f:externalTrafficPolicy:map[] f:internalTrafficPolicy:map[] f:ports:map[.:map[] k:{"port":5432,"protocol":"TCP"}:map[.:map[] f:name:map[] f:port:map[] f:protocol:map[] f:targetPort:map[]]] f:selector:map[] f:sessionAffinity:map[] f:type:map[]]] manager:helm operation:Update time:2024-11-05T18:25:02Z]] name:my-postgresql-cluster namespace:default resourceVersion:564 uid:12715158-c30d-49c9-8044-69fc53a857c8] spec:map[allocateLoadBalancerNodePorts:true clusterIP:10.100.90.198 clusterIPs:[10.100.90.198] externalTrafficPolicy:Cluster internalTrafficPolicy:Cluster ipFamilies:[IPv4] ipFamilyPolicy:SingleStack ports:[map[name:tcp-postgresql nodePort:31779 port:5432 protocol:TCP targetPort:tcp-postgresql]] selector:map[app.kubernetes.io/component:primary app.kubernetes.io/instance:my-postgresql-cluster app.kubernetes.io/name:postgresql] sessionAffinity:None type:LoadBalancer] status:map[loadBalancer:map[]]]
[root@lab01 ~]#
[root@lab01 ~]# export SERVICE_IP=$(kubectl get svc --namespace default my-postgresql-cluster --template "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}")
error: error executing template "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}": template: output:1:10: executing "output" at <index .status.loadBalancer.ingress 0>: error calling index: index of untyped nil
[root@lab01 ~]#
[root@lab01 ~]# export SERVICE_IP=$(kubectl get svc --namespace default my-postgresql-cluster --template "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}")
error: error executing template "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}": template: output:1:10: executing "output" at <index .status.loadBalancer.ingress 0>: error calling index: index of untyped nil
[root@lab01 ~]# export SERVICE_IP=$(kubectl get svc --namespace default my-postgresql-cluster --template "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}")
error: error executing template "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}": template: output:1:10: executing "output" at <index .status.loadBalancer.ingress 0>: error calling index: index of untyped nil
[root@lab01 ~]# export SERVICE_IP=$(kubectl get svc --namespace default my-postgresql-cluster --template "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}")
error: error executing template "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}": template: output:1:10: executing "output" at <index .status.loadBalancer.ingress 0>: error calling index: index of untyped nil
[root@lab01 ~]# PGPASSWORD="$POSTGRES_PASSWORD" psql --host 10.96.0.1 --port 5432 -U postgres -d postgres
bash: psql: command not found...
Install package 'postgresql' to provide command 'psql'? [N/y] y


 * Waiting in queue...
The following packages have to be installed:
 postgresql-13.16-1.el9.x86_64  PostgreSQL client programs
 postgresql-private-libs-13.16-1.el9.x86_64     The shared libraries required only for this build of PostgreSQL server
Proceed with changes? [N/y]

The transaction did not proceed.
Failed to install packages: user declined simulation

[root@lab01 ~]# PGPASSWORD="$POSTGRES_PASSWORD" psql --host 10.96.0.1 --port 5432 -U postgres -d postgres
bash: psql: command not found...
Install package 'postgresql' to provide command 'psql'? [N/y] y


 * Waiting in queue...
The following packages have to be installed:
 postgresql-13.16-1.el9.x86_64  PostgreSQL client programs
 postgresql-private-libs-13.16-1.el9.x86_64     The shared libraries required only for this build of PostgreSQL server
Proceed with changes? [N/y] y


 * Waiting in queue...
 * Waiting for authentication...
 * Waiting in queue...
 * Downloading packages...
 * Requesting data...
 * Testing changes...
 * Installing packages...
psql: error: could not connect to server: Connection refused
        Is the server running on host "10.96.0.1" and accepting
        TCP/IP connections on port 5432?

[root@lab01 ~]# PGPASSWORD="$POSTGRES_PASSWORD" psql --host 10.96.0.1 --port 5432 -U postgres -d postgres

^C
[root@lab01 ~]# kubectl run my-postgresql-cluster-client --rm --tty -i --restart='Never' --namespace default --image docker.io/bitnami/postgresql:17.0.0-debian-12-r9 --env="PGPASSWORD=$POSTGRES_PASSWORD" \
      --command -- psql --host my-postgresql-cluster -U postgres -d postgres -p 5432

If you don't see a command prompt, try pressing enter.

postgres=# \q
could not save history to file "//.psql_history": Permission denied

E1106 00:11:40.294387   24009 v2.go:104] "Unhandled Error" err="write on closed stream 0"
pod "my-postgresql-cluster-client" deleted
[root@lab01 ~]#
[root@lab01 ~]# /opt/bitnami/scripts/postgresql/entrypoint.sh /bin/bash
-bash: /opt/bitnami/scripts/postgresql/entrypoint.sh: No such file or directory
[root@lab01 ~]# kubectl get svc --namespace default -w my-postgresql-cluster
NAME                    TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE
my-postgresql-cluster   LoadBalancer   10.100.90.198   <pending>     5432:31779/TCP   17m


^C[root@lab01 ~]#
[root@lab01 ~]# export SERVICE_IP=$(kubectl get svc --namespace default my-postgresql-cluster --template "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}")
error: error executing template "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}": template: output:1:10: executing "output" at <index .status.loadBalancer.ingress 0>: error calling index: index of untyped nil
[root@lab01 ~]# kubectl get svc
NAME                       TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE
kubernetes                 ClusterIP      10.96.0.1       <none>        443/TCP          21m
my-postgresql-cluster      LoadBalancer   10.100.90.198   <pending>     5432:31779/TCP   18m
my-postgresql-cluster-hl   ClusterIP      None            <none>        5432/TCP         18m
[root@lab01 ~]# kubectl port-forward svc/my-postgresql-cluster 5432:5432
Forwarding from 127.0.0.1:5432 -> 5432
Forwarding from [::1]:5432 -> 5432

^C[root@lab01 ~]kubectl exec -it my-postgresql-cluster-0 -- psql -U postgreses
Password for user postgres:
psql: error: connection to server on socket "/tmp/.s.PGSQL.5432" failed: FATAL:  password authentication failed for user "postgres"
command terminated with exit code 2
[root@lab01 ~]# kubectl exec -it my-postgresql-cluster-0 -- psql -U postgres
Password for user postgres:
psql (17.0)
Type "help" for help.

postgres=# pip install psycopg2 faker
postgres-#
postgres=# \q
could not save history to file "//.psql_history": Read-only file system
[root@lab01 ~]# pip install psycopg2 faker
Collecting psycopg2
  Downloading psycopg2-2.9.10.tar.gz (385 kB)
     |████████████████████████████████| 385 kB 3.4 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_f9e0fa78c6c547ecae24661ea9eaeb90/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_f9e0fa78c6c547ecae24661ea9eaeb90/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-_vlyz4ci
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_f9e0fa78c6c547ecae24661ea9eaeb90/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-_vlyz4ci/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-_vlyz4ci/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-_vlyz4ci/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-_vlyz4ci/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-_vlyz4ci/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <https://www.psycopg.org/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/62/51/2007ea29e605957a17ac6357115d0c1a1b60c8c984951c19419b3474cdfd/psycopg2-2.9.10.tar.gz#sha256=12ec0b40b0273f95296233e8750441339298e6a572f7039da5b260e3c8b60e11 (from https://pypi.org/simple/psycopg2/) (requires-python:>=3.8). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.9.9.tar.gz (384 kB)
     |████████████████████████████████| 384 kB 15.0 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_033d293440194a48a6627547f47d97d5/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_033d293440194a48a6627547f47d97d5/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-n2boszie
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_033d293440194a48a6627547f47d97d5/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-n2boszie/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-n2boszie/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-n2boszie/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-n2boszie/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-n2boszie/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <https://www.psycopg.org/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/c9/5e/dc6acaf46d78979d6b03458b7a1618a68e152a6776fce95daac5e0f0301b/psycopg2-2.9.9.tar.gz#sha256=d1454bde93fb1e224166811694d600e746430c006fbb031ea06ecc2ea41bf156 (from https://pypi.org/simple/psycopg2/) (requires-python:>=3.7). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.9.8.tar.gz (383 kB)
     |████████████████████████████████| 383 kB 38.1 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_22407e1dca3f4c05a9eecd371979a2a1/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_22407e1dca3f4c05a9eecd371979a2a1/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-yf8r22ig
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_22407e1dca3f4c05a9eecd371979a2a1/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-yf8r22ig/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-yf8r22ig/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-yf8r22ig/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-yf8r22ig/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-yf8r22ig/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <https://www.psycopg.org/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/9e/78/3b15ee8bbbf36f8bace9b0e6fe8a7481372650c76bcf1a7de1ed723cce96/psycopg2-2.9.8.tar.gz#sha256=3da6488042a53b50933244085f3f91803f1b7271f970f3e5536efa69314f6a49 (from https://pypi.org/simple/psycopg2/) (requires-python:>=3.6). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.9.7.tar.gz (383 kB)
     |████████████████████████████████| 383 kB 16.5 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_48b97475afc44fbd8e611c838d05aeb8/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_48b97475afc44fbd8e611c838d05aeb8/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-hbr0s5ls
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_48b97475afc44fbd8e611c838d05aeb8/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-hbr0s5ls/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-hbr0s5ls/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-hbr0s5ls/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-hbr0s5ls/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-hbr0s5ls/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <https://www.psycopg.org/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/f7/fa/6e6bb7a7bbe4e02b35aa2fc009fb53221663a5e07e333b72cb5a85e4dbb0/psycopg2-2.9.7.tar.gz#sha256=f00cc35bd7119f1fed17b85bd1007855194dde2cbd8de01ab8ebb17487440ad8 (from https://pypi.org/simple/psycopg2/) (requires-python:>=3.6). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.9.6.tar.gz (383 kB)
     |████████████████████████████████| 383 kB 46.3 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_4c8ecd04e8114e8c9f2766a5d1333c86/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_4c8ecd04e8114e8c9f2766a5d1333c86/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-60yt521i
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_4c8ecd04e8114e8c9f2766a5d1333c86/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-60yt521i/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-60yt521i/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-60yt521i/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-60yt521i/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-60yt521i/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <https://www.psycopg.org/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/af/c4/5726cddb53fe52f0e839eb3da04322364f14493217ebd5818cc5e4c948a5/psycopg2-2.9.6.tar.gz#sha256=f15158418fd826831b28585e2ab48ed8df2d0d98f502a2b4fe619e7d5ca29011 (from https://pypi.org/simple/psycopg2/) (requires-python:>=3.6). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.9.5.tar.gz (384 kB)
     |████████████████████████████████| 384 kB 18.2 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_036b369c9f164a448294d46dd7da04ee/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_036b369c9f164a448294d46dd7da04ee/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-isziatae
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_036b369c9f164a448294d46dd7da04ee/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-isziatae/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-isziatae/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-isziatae/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-isziatae/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-isziatae/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <https://www.psycopg.org/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/89/d6/cd8c46417e0f7a16b4b0fc321f4ab676a59250d08fce5b64921897fb07cc/psycopg2-2.9.5.tar.gz#sha256=a5246d2e683a972e2187a8714b5c2cf8156c064629f9a9b1a873c1730d9e245a (from https://pypi.org/simple/psycopg2/) (requires-python:>=3.6). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.9.4.tar.gz (384 kB)
     |████████████████████████████████| 384 kB 27.1 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_8c41f9eb381d4e6f8e65c5f9c34919c5/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_8c41f9eb381d4e6f8e65c5f9c34919c5/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-qzk3dy6y
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_8c41f9eb381d4e6f8e65c5f9c34919c5/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-qzk3dy6y/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-qzk3dy6y/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-qzk3dy6y/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-qzk3dy6y/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-qzk3dy6y/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <https://www.psycopg.org/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/8d/d7/277e23b708a0429b6b3d50e86e52b791156dfbfa81917d34ef6d7b435b84/psycopg2-2.9.4.tar.gz#sha256=d529926254e093a1b669f692a3aa50069bc71faf5b0ecd91686a78f62767d52f (from https://pypi.org/simple/psycopg2/) (requires-python:>=3.6). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.9.3.tar.gz (380 kB)
     |████████████████████████████████| 380 kB 24.3 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_a9525436a61b4b60a422da792edb134f/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_a9525436a61b4b60a422da792edb134f/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-tx6p47of
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_a9525436a61b4b60a422da792edb134f/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-tx6p47of/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-tx6p47of/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-tx6p47of/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-tx6p47of/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-tx6p47of/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <https://www.psycopg.org/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/d1/1e/b450599a27b1809bccbd4e369f397cb18dc56b875778d961f9ae180b54b7/psycopg2-2.9.3.tar.gz#sha256=8e841d1bf3434da985cc5ef13e6f75c8981ced601fd70cc6bf33351b91562981 (from https://pypi.org/simple/psycopg2/) (requires-python:>=3.6). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.9.2.tar.gz (380 kB)
     |████████████████████████████████| 380 kB 39.4 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_2d45a7dec2c4400da5d72252b21a68d2/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_2d45a7dec2c4400da5d72252b21a68d2/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-o6qfc1a4
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_2d45a7dec2c4400da5d72252b21a68d2/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-o6qfc1a4/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-o6qfc1a4/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-o6qfc1a4/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-o6qfc1a4/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-o6qfc1a4/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <https://www.psycopg.org/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/33/ed/79434011d773e5ea4c51262f6ebfb86680c2908d7677f31ebccd5aa9f1b3/psycopg2-2.9.2.tar.gz#sha256=a84da9fa891848e0270e8e04dcca073bc9046441eeb47069f5c0e36783debbea (from https://pypi.org/simple/psycopg2/) (requires-python:>=3.6). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.9.1.tar.gz (379 kB)
     |████████████████████████████████| 379 kB 21.2 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_0e65c42586634109a13425cdcf161861/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_0e65c42586634109a13425cdcf161861/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-jmswax_c
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_0e65c42586634109a13425cdcf161861/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-jmswax_c/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-jmswax_c/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-jmswax_c/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-jmswax_c/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-jmswax_c/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <https://www.psycopg.org/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/aa/8a/7c80e7e44fb1b4277e89bd9ca509aefdd4dd1b2c547c6f293afe9f7ffd04/psycopg2-2.9.1.tar.gz#sha256=de5303a6f1d0a7a34b9d40e4d3bef684ccc44a49bbe3eb85e3c0bffb4a131b7c (from https://pypi.org/simple/psycopg2/) (requires-python:>=3.6). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.9.tar.gz (379 kB)
     |████████████████████████████████| 379 kB 21.7 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_0a2b64f6c36f4ccdb01c7737e6d1fc25/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_0a2b64f6c36f4ccdb01c7737e6d1fc25/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-z4gw94ow
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_0a2b64f6c36f4ccdb01c7737e6d1fc25/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-z4gw94ow/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-z4gw94ow/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-z4gw94ow/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-z4gw94ow/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-z4gw94ow/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <https://www.psycopg.org/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/6c/79/6df8af2405e2aa60732c47757453fc7fa4af5c90a1796b3392ef892d3a52/psycopg2-2.9.tar.gz#sha256=b12073fdf2002e828e5921be2c39ff9c6eab361c5c0bd6c529619fc23677accc (from https://pypi.org/simple/psycopg2/) (requires-python:>=3.6). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.8.6.tar.gz (383 kB)
     |████████████████████████████████| 383 kB 20.6 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_e7cf1762002344cf858e1db6820736e9/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_e7cf1762002344cf858e1db6820736e9/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-d5s7i5k7
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_e7cf1762002344cf858e1db6820736e9/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-d5s7i5k7/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-d5s7i5k7/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-d5s7i5k7/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-d5s7i5k7/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-d5s7i5k7/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <https://www.psycopg.org/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/fd/ae/98cb7a0cbb1d748ee547b058b14604bd0e9bf285a8e0cc5d148f8a8a952e/psycopg2-2.8.6.tar.gz#sha256=fb23f6c71107c37fd667cb4ea363ddeb936b348bbd6449278eb92c189699f543 (from https://pypi.org/simple/psycopg2/) (requires-python:>=2.7,!=3.0.*,!=3.1.*,!=3.2.*,!=3.3.*). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.8.5.tar.gz (380 kB)
     |████████████████████████████████| 380 kB 13.8 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_b7ee26b8ad79409b93868f41e80cad54/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_b7ee26b8ad79409b93868f41e80cad54/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-079mrply
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_b7ee26b8ad79409b93868f41e80cad54/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-079mrply/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-079mrply/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-079mrply/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-079mrply/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-079mrply/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <https://www.psycopg.org/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/a8/8f/1c5690eebf148d1d1554fc00ccf9101e134636553dbb75bdfef4f85d7647/psycopg2-2.8.5.tar.gz#sha256=f7d46240f7a1ae1dd95aab38bd74f7428d46531f69219954266d669da60c0818 (from https://pypi.org/simple/psycopg2/) (requires-python:>=2.7,!=3.0.*,!=3.1.*,!=3.2.*,!=3.3.*). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.8.4.tar.gz (377 kB)
     |████████████████████████████████| 377 kB 22.7 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_36a5b8d20c2341eaa02ba6b20e177e19/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_36a5b8d20c2341eaa02ba6b20e177e19/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-ff_jmhs2
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_36a5b8d20c2341eaa02ba6b20e177e19/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-ff_jmhs2/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-ff_jmhs2/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-ff_jmhs2/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-ff_jmhs2/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-ff_jmhs2/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <http://initd.org/psycopg/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/84/d7/6a93c99b5ba4d4d22daa3928b983cec66df4536ca50b22ce5dcac65e4e71/psycopg2-2.8.4.tar.gz#sha256=f898e5cc0a662a9e12bde6f931263a1bbd350cfb18e1d5336a12927851825bb6 (from https://pypi.org/simple/psycopg2/) (requires-python:>=2.7,!=3.0.*,!=3.1.*,!=3.2.*,!=3.3.*). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.8.3.tar.gz (377 kB)
     |████████████████████████████████| 377 kB 13.6 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_700240054d394c3a9dd4336a476d2341/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_700240054d394c3a9dd4336a476d2341/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-2b88nu24
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_700240054d394c3a9dd4336a476d2341/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-2b88nu24/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-2b88nu24/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-2b88nu24/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-2b88nu24/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-2b88nu24/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <http://initd.org/psycopg/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/5c/1c/6997288da181277a0c29bc39a5f9143ff20b8c99f2a7d059cfb55163e165/psycopg2-2.8.3.tar.gz#sha256=897a6e838319b4bf648a574afb6cabcb17d0488f8c7195100d48d872419f4457 (from https://pypi.org/simple/psycopg2/) (requires-python:>=2.7,!=3.0.*,!=3.1.*,!=3.2.*,!=3.3.*). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.8.2.tar.gz (368 kB)
     |████████████████████████████████| 368 kB 24.9 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_d4e86e5ca67048f6ab5780aeec70facb/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_d4e86e5ca67048f6ab5780aeec70facb/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-de5fvmiy
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_d4e86e5ca67048f6ab5780aeec70facb/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-de5fvmiy/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-de5fvmiy/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-de5fvmiy/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-de5fvmiy/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-de5fvmiy/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <http://initd.org/psycopg/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/23/7e/93c325482c328619870b6cd09370f6dbe1148283daca65115cd63642e60f/psycopg2-2.8.2.tar.gz#sha256=5cacf21b6f813c239f100ef78a4132056f93a5940219ec25d2ef833cbeb05588 (from https://pypi.org/simple/psycopg2/) (requires-python:>=2.7,!=3.0.*,!=3.1.*,!=3.2.*,!=3.3.*). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.8.1.tar.gz (367 kB)
     |████████████████████████████████| 367 kB 33.0 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_9149e3b705754ba0b9372c7df49d8b08/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_9149e3b705754ba0b9372c7df49d8b08/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-iad_atbb
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_9149e3b705754ba0b9372c7df49d8b08/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-iad_atbb/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-iad_atbb/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-iad_atbb/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-iad_atbb/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-iad_atbb/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <http://initd.org/psycopg/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/52/be/f898e712f5f08131d651a62754fca82a1deb42e4e9889ad01932f770a2be/psycopg2-2.8.1.tar.gz#sha256=b4a475ce87eabc0607e068a3c704d0aa0820237ed78d493b8e2d880eb73cd7fe (from https://pypi.org/simple/psycopg2/) (requires-python:>=2.7,!=3.0.*,!=3.1.*,!=3.2.*,!=3.3.*). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.8.tar.gz (367 kB)
     |████████████████████████████████| 367 kB 36.4 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_068b2bf3cab54d619495c95f0c45a293/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_068b2bf3cab54d619495c95f0c45a293/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-bu4ab9n5
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_068b2bf3cab54d619495c95f0c45a293/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-bu4ab9n5/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-bu4ab9n5/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-bu4ab9n5/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-bu4ab9n5/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-bu4ab9n5/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <http://initd.org/psycopg/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/c7/ca/75236b17f1b951950ffc55d657c5aa408d3d0327a1b6c4c0f7cb16ef7e7b/psycopg2-2.8.tar.gz#sha256=49c5838d90e83217909db3789d30a105385b5e696ec5168cda645546c542f35a (from https://pypi.org/simple/psycopg2/) (requires-python:>=2.7,!=3.0.*,!=3.1.*,!=3.2.*,!=3.3.*). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.7.7.tar.gz (427 kB)
     |████████████████████████████████| 427 kB 18.5 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_9d2a3e63e8fc40e9955c7b32983b6fec/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_9d2a3e63e8fc40e9955c7b32983b6fec/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-pp34mi62
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_9d2a3e63e8fc40e9955c7b32983b6fec/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-pp34mi62/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-pp34mi62/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-pp34mi62/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-pp34mi62/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-pp34mi62/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <http://initd.org/psycopg/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/63/54/c039eb0f46f9a9406b59a638415c2012ad7be9b4b97bfddb1f48c280df3a/psycopg2-2.7.7.tar.gz#sha256=f4526d078aedd5187d0508aa5f9a01eae6a48a470ed678406da94b4cd6524b7e (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.7.6.1.tar.gz (427 kB)
     |████████████████████████████████| 427 kB 16.4 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_14968043bac64ba189e6531ce1a50132/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_14968043bac64ba189e6531ce1a50132/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-rhwcssg6
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_14968043bac64ba189e6531ce1a50132/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-rhwcssg6/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-rhwcssg6/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-rhwcssg6/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-rhwcssg6/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-rhwcssg6/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <http://initd.org/psycopg/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/c0/07/93573b97ed61b6fb907c8439bf58f09957564cf7c39612cef36c547e68c6/psycopg2-2.7.6.1.tar.gz#sha256=27959abe64ca1fc6d8cd11a71a1f421d8287831a3262bd4cacd43bbf43cc3c82 (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.7.6.tar.gz (427 kB)
     |████████████████████████████████| 427 kB 14.6 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_8c21c69045fb44f6b44f3f1072baaeb4/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_8c21c69045fb44f6b44f3f1072baaeb4/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-94mpw48w
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_8c21c69045fb44f6b44f3f1072baaeb4/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-94mpw48w/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-94mpw48w/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-94mpw48w/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-94mpw48w/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-94mpw48w/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <http://initd.org/psycopg/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/94/09/2f1fae36d83e2315b90ee91738d01baf8af8c945726bf4b4708fcec3256d/psycopg2-2.7.6.tar.gz#sha256=4a658550b0bcb259e97f77f2dc93ed6b108fe2eda963a9e6fc8b48040d542ec2 (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.7.5.tar.gz (426 kB)
     |████████████████████████████████| 426 kB 10.6 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_be3ea6a5727e40bebed75c983493952a/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_be3ea6a5727e40bebed75c983493952a/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-y55bcuvk
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_be3ea6a5727e40bebed75c983493952a/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-y55bcuvk/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-y55bcuvk/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-y55bcuvk/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-y55bcuvk/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-y55bcuvk/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <http://initd.org/psycopg/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/b2/c1/7bf6c464e903ffc4f3f5907c389e5a4199666bf57f6cd6bf46c17912a1f9/psycopg2-2.7.5.tar.gz#sha256=eccf962d41ca46e6326b97c8fe0a6687b58dfc1a5f6540ed071ff1474cea749e (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.7.4.tar.gz (425 kB)
     |████████████████████████████████| 425 kB 23.6 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_a288efb898d8474ea4835ce80330170e/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_a288efb898d8474ea4835ce80330170e/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-o7h5jjdh
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_a288efb898d8474ea4835ce80330170e/
  Complete output (23 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-o7h5jjdh/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-o7h5jjdh/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-o7h5jjdh/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-o7h5jjdh/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-o7h5jjdh/psycopg2.egg-info/SOURCES.txt'

  Error: pg_config executable not found.

  pg_config is required to build psycopg2 from source.  Please add the directory
  containing pg_config to the $PATH or specify the full executable path with the
  option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.

  If you prefer to avoid building psycopg2 from source, please install the PyPI
  'psycopg2-binary' package instead.

  For further information please check the 'doc/src/install.rst' file (also at
  <http://initd.org/psycopg/docs/install.html>).

  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/74/83/51580322ed0e82cba7ad8e0af590b8fb2cf11bd5aaa1ed872661bd36f462/psycopg2-2.7.4.tar.gz#sha256=8bf51191d60f6987482ef0cfe8511bbf4877a5aa7f313d7b488b53189cf26209 (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.7.3.2.tar.gz (425 kB)
     |████████████████████████████████| 425 kB 18.2 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_fece22c546bf4c109ef488941ffbb906/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_fece22c546bf4c109ef488941ffbb906/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-4d367es3
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_fece22c546bf4c109ef488941ffbb906/
  Complete output (14 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-4d367es3/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-4d367es3/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-4d367es3/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-4d367es3/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-4d367es3/psycopg2.egg-info/SOURCES.txt'
  Error: pg_config executable not found.

  Please add the directory containing pg_config to the PATH
  or specify the full executable path with the option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/dd/47/000b405d73ca22980684fd7bd3318690cc03cfa3b2ae1c5b7fff8050b28a/psycopg2-2.7.3.2.tar.gz#sha256=5c3213be557d0468f9df8fe2487eaf2990d9799202c5ff5cb8d394d09fad9b2a (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.7.3.1.tar.gz (425 kB)
     |████████████████████████████████| 425 kB 18.7 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_08570cd4b10a4c4b836a565d68ec9bff/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_08570cd4b10a4c4b836a565d68ec9bff/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-l21ev8yl
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_08570cd4b10a4c4b836a565d68ec9bff/
  Complete output (14 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-l21ev8yl/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-l21ev8yl/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-l21ev8yl/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-l21ev8yl/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-l21ev8yl/psycopg2.egg-info/SOURCES.txt'
  Error: pg_config executable not found.

  Please add the directory containing pg_config to the PATH
  or specify the full executable path with the option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/6b/fb/15c687eda2f925f0ff59373063fdb408471b4284714a7761daaa65c01f15/psycopg2-2.7.3.1.tar.gz#sha256=9b7b16e26448b43cf167f785d8b5345007731ebf153a510e12dae826800caa65 (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.7.3.tar.gz (425 kB)
     |████████████████████████████████| 425 kB 43.4 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_7782bc4888904f66b669b1c7777dc503/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_7782bc4888904f66b669b1c7777dc503/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-ib3kst6h
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_7782bc4888904f66b669b1c7777dc503/
  Complete output (14 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-ib3kst6h/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-ib3kst6h/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-ib3kst6h/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-ib3kst6h/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-ib3kst6h/psycopg2.egg-info/SOURCES.txt'
  Error: pg_config executable not found.

  Please add the directory containing pg_config to the PATH
  or specify the full executable path with the option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/98/99/33ca02c4bc3ed1bd9ceab5614bda2e6d1d31e61ec58345b9feece238c38a/psycopg2-2.7.3.tar.gz#sha256=c9bd49848556d04093909faec017c3675efabf78c2b7f383bf7c43ba18324ac8 (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.7.2.tar.gz (424 kB)
     |████████████████████████████████| 424 kB 17.2 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_1a0b2c94389442348616baad5a61d630/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_1a0b2c94389442348616baad5a61d630/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-hjebnxwh
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_1a0b2c94389442348616baad5a61d630/
  Complete output (14 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-hjebnxwh/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-hjebnxwh/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-hjebnxwh/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-hjebnxwh/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-hjebnxwh/psycopg2.egg-info/SOURCES.txt'
  Error: pg_config executable not found.

  Please add the directory containing pg_config to the PATH
  or specify the full executable path with the option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/d0/66/61c1b34ea8da8f95d99676e6803ccad83abef3ac90df145b45033696f3d2/psycopg2-2.7.2.tar.gz#sha256=3767f40bb35713ccc75dbcff80bf228a75e080d6b98c78afd5fb9aa84682a9f4 (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.7.1.tar.gz (421 kB)
     |████████████████████████████████| 421 kB 19.4 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_8be4b159aeee4d9c8aa6effcd6ae2290/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_8be4b159aeee4d9c8aa6effcd6ae2290/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-0hb5taqm
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_8be4b159aeee4d9c8aa6effcd6ae2290/
  Complete output (14 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-0hb5taqm/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-0hb5taqm/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-0hb5taqm/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-0hb5taqm/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-0hb5taqm/psycopg2.egg-info/SOURCES.txt'
  Error: pg_config executable not found.

  Please add the directory containing pg_config to the PATH
  or specify the full executable path with the option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/f8/e9/5793369ce8a41bf5467623ded8d59a434dfef9c136351aca4e70c2657ba0/psycopg2-2.7.1.tar.gz#sha256=86c9355f5374b008c8479bc00023b295c07d508f7c3b91dbd2e74f8925b1d9c6 (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.7.tar.gz (421 kB)
     |████████████████████████████████| 421 kB 67.9 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_be8ca2257ce4429585d017802cceed2e/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_be8ca2257ce4429585d017802cceed2e/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-1va75z7g
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_be8ca2257ce4429585d017802cceed2e/
  Complete output (14 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-1va75z7g/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-1va75z7g/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-1va75z7g/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-1va75z7g/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-1va75z7g/psycopg2.egg-info/SOURCES.txt'
  Error: pg_config executable not found.

  Please add the directory containing pg_config to the PATH
  or specify the full executable path with the option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/62/ca/0a479c9664526e86c2913a7ad593586eeb86b428b7e629e7c7b6b69e3cb7/psycopg2-2.7.tar.gz#sha256=ceadecf660ad4f7a31ea5baef30a7351add8626f9fd3daaafabb9a9e549f3f9a (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.6.2.tar.gz (376 kB)
     |████████████████████████████████| 376 kB 19.6 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_91ef5040e5914ebc948d5f798fd4468f/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_91ef5040e5914ebc948d5f798fd4468f/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-lb_nd580
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_91ef5040e5914ebc948d5f798fd4468f/
  Complete output (14 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-lb_nd580/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-lb_nd580/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-lb_nd580/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-lb_nd580/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-lb_nd580/psycopg2.egg-info/SOURCES.txt'
  Error: pg_config executable not found.

  Please add the directory containing pg_config to the PATH
  or specify the full executable path with the option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/7b/a8/dc2d50a6f37c157459cd18bab381c8e6134b9381b50fbe969997b2ae7dbc/psycopg2-2.6.2.tar.gz#sha256=70490e12ed9c5c818ecd85d185d363335cc8a8cbf7212e3c185431c79ff8c05c (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.6.1.tar.gz (371 kB)
     |████████████████████████████████| 371 kB 15.3 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_47db10ccdbcc406bb4f1277afc1853c9/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_47db10ccdbcc406bb4f1277afc1853c9/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-vsbd0zre
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_47db10ccdbcc406bb4f1277afc1853c9/
  Complete output (14 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-vsbd0zre/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-vsbd0zre/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-vsbd0zre/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-vsbd0zre/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-vsbd0zre/psycopg2.egg-info/SOURCES.txt'
  Error: pg_config executable not found.

  Please add the directory containing pg_config to the PATH
  or specify the full executable path with the option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/86/fd/cc8315be63a41fe000cce20482a917e874cdc1151e62cb0141f5e55f711e/psycopg2-2.6.1.tar.gz#sha256=6acf9abbbe757ef75dc2ecd9d91ba749547941abaffbe69ff2086a9e37d4904c (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.6.tar.gz (367 kB)
     |████████████████████████████████| 367 kB 10.8 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_01095c6045744874a4529908c7055163/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_01095c6045744874a4529908c7055163/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-bquu6t74
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_01095c6045744874a4529908c7055163/
  Complete output (14 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-bquu6t74/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-bquu6t74/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-bquu6t74/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-bquu6t74/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-bquu6t74/psycopg2.egg-info/SOURCES.txt'
  Error: pg_config executable not found.

  Please add the directory containing pg_config to the PATH
  or specify the full executable path with the option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/dd/c7/9016ff8ff69da269b1848276eebfb264af5badf6b38caad805426771f04d/psycopg2-2.6.tar.gz#sha256=c00afecb302a99a4f83dec9b055c4d1cc196926d62c8db015d68432df8118ca8 (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.5.5.tar.gz (779 kB)
     |████████████████████████████████| 779 kB 14.7 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_ab68e4023498403a8cd4f9859d0107d0/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_ab68e4023498403a8cd4f9859d0107d0/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-srs94h4j
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_ab68e4023498403a8cd4f9859d0107d0/
  Complete output (14 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-srs94h4j/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-srs94h4j/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-srs94h4j/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-srs94h4j/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-srs94h4j/psycopg2.egg-info/SOURCES.txt'
  Error: pg_config executable not found.

  Please add the directory containing pg_config to the PATH
  or specify the full executable path with the option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/9b/60/f4c79e73a69ded145880bcf4f98eeed741af12c62c5ddc89b754602b1807/psycopg2-2.5.5.tar.gz#sha256=c6c330c98ab08c5639f0ccd7e211b82b3a39f001813dcea6bb824a99d2b34fe2 (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.5.4.tar.gz (682 kB)
     |████████████████████████████████| 682 kB 21.6 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_713268ce065d4f158f2228738b92eb58/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_713268ce065d4f158f2228738b92eb58/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-o68fivgp
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_713268ce065d4f158f2228738b92eb58/
  Complete output (14 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-o68fivgp/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-o68fivgp/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-o68fivgp/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-o68fivgp/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-o68fivgp/psycopg2.egg-info/SOURCES.txt'
  Error: pg_config executable not found.

  Please add the directory containing pg_config to the PATH
  or specify the full executable path with the option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/63/c3/802668cb3cfc2880c2a8364623e7105a0257724a2612bb66ec733aaddb8c/psycopg2-2.5.4.tar.gz#sha256=24ba3f328aba08d8d505bc2a8f68a94ebe24a85e8483640b667221bc0efd3b1e (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.5.3.tar.gz (690 kB)
     |████████████████████████████████| 690 kB 27.8 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_65e7d253a9d54514b7902a05a2abc433/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_65e7d253a9d54514b7902a05a2abc433/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-9h3hjipb
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_65e7d253a9d54514b7902a05a2abc433/
  Complete output (14 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-9h3hjipb/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-9h3hjipb/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-9h3hjipb/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-9h3hjipb/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-9h3hjipb/psycopg2.egg-info/SOURCES.txt'
  Error: pg_config executable not found.

  Please add the directory containing pg_config to the PATH
  or specify the full executable path with the option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/22/fa/5ddcafc7387c1534c59eb3ffcdb9ab2af106fd3b104e6df191b6c55718af/psycopg2-2.5.3.tar.gz#sha256=3a2df3bb113187227aa97d0dd3d06e0f26be3d50dcdeeaef67fac59ed51a030a (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.5.2.tar.gz (685 kB)
     |████████████████████████████████| 685 kB 7.0 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_e1615058b3e3453f92b83b9f33b3b326/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_e1615058b3e3453f92b83b9f33b3b326/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-l25evezh
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_e1615058b3e3453f92b83b9f33b3b326/
  Complete output (14 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-l25evezh/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-l25evezh/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-l25evezh/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-l25evezh/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-l25evezh/psycopg2.egg-info/SOURCES.txt'
  Error: pg_config executable not found.

  Please add the directory containing pg_config to the PATH
  or specify the full executable path with the option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/c3/f3/5519551f02ae70fc51f4e608e7b44d59a408fe3264fec4afeea37b8ea317/psycopg2-2.5.2.tar.gz#sha256=50382d8703a16c3c615f328c2676f002787095925c99f0afb125a59962a5bd2e (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.5.1.tar.gz (684 kB)
     |████████████████████████████████| 684 kB 15.9 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_49d9fbf9d5ec452aaa8a144123143705/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_49d9fbf9d5ec452aaa8a144123143705/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-nrmek_n7
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_49d9fbf9d5ec452aaa8a144123143705/
  Complete output (14 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-nrmek_n7/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-nrmek_n7/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-nrmek_n7/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-nrmek_n7/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-nrmek_n7/psycopg2.egg-info/SOURCES.txt'
  Error: pg_config executable not found.

  Please add the directory containing pg_config to the PATH
  or specify the full executable path with the option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/22/09/63d5da7375c267e208bbadf56b51699d85cb7b3a9096817eeea500a27b3b/psycopg2-2.5.1.tar.gz#sha256=65a70c88a7e02d8bef57aab8636b5795389674c3205fd88ec46a4dffffa7efec (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.5.tar.gz (703 kB)
     |████████████████████████████████| 703 kB 14.5 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_0eeae7fd7fc04e7bbd5123b1d5fe3332/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_0eeae7fd7fc04e7bbd5123b1d5fe3332/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-7llumj5e
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_0eeae7fd7fc04e7bbd5123b1d5fe3332/
  Complete output (14 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-7llumj5e/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-7llumj5e/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-7llumj5e/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-7llumj5e/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-7llumj5e/psycopg2.egg-info/SOURCES.txt'
  Error: pg_config executable not found.

  Please add the directory containing pg_config to the PATH
  or specify the full executable path with the option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/84/7e/7256298bf7064238e63b9380cf424f776a4d2a87e387c9a9bd1bc5ea0fbc/psycopg2-2.5.tar.gz#sha256=6b2f0cc9199de9eaa53ba10ff69b2741e73484b24657e69bdae259561c23bde4 (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.4.6.tar.gz (667 kB)
     |████████████████████████████████| 667 kB 19.9 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_4b01267fc2ec49ff8145ed062ea3fc48/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_4b01267fc2ec49ff8145ed062ea3fc48/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-d7fpdijo
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_4b01267fc2ec49ff8145ed062ea3fc48/
  Complete output (14 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-d7fpdijo/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-d7fpdijo/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-d7fpdijo/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-d7fpdijo/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-d7fpdijo/psycopg2.egg-info/SOURCES.txt'
  Error: pg_config executable not found.

  Please add the directory containing pg_config to the PATH
  or specify the full executable path with the option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/59/aa/4d74a5dc32a89d622c1fa896a86683b488ef255f06d4b27231e12e6076f7/psycopg2-2.4.6.tar.gz#sha256=4edcb40b0a039b4b559a6bc887b2155db8b6c53d0f55b00af8338c77b725621f (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.4.5.tar.gz (719 kB)
     |████████████████████████████████| 719 kB 13.1 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_4eacf155b2304fb9b3d5147c75478ab6/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_4eacf155b2304fb9b3d5147c75478ab6/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-_j30vua3
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_4eacf155b2304fb9b3d5147c75478ab6/
  Complete output (14 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-_j30vua3/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-_j30vua3/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-_j30vua3/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-_j30vua3/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-_j30vua3/psycopg2.egg-info/SOURCES.txt'
  Error: pg_config executable not found.

  Please add the directory containing pg_config to the PATH
  or specify the full executable path with the option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/36/77/894a5dd9f3f55cfc85682d3e6473ee5103d8d418b95baf4019fad3ffa026/psycopg2-2.4.5.tar.gz#sha256=48b702a7ca479e1bc2c1a7b81875a07d474298132605993e2cb979f5e08277d7 (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.4.4.tar.gz (648 kB)
     |████████████████████████████████| 648 kB 27.3 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_35f598f51c974b859069d6debde214d8/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_35f598f51c974b859069d6debde214d8/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-qvvzvkv0
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_35f598f51c974b859069d6debde214d8/
  Complete output (14 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-qvvzvkv0/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-qvvzvkv0/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-qvvzvkv0/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-qvvzvkv0/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-qvvzvkv0/psycopg2.egg-info/SOURCES.txt'
  Error: pg_config executable not found.

  Please add the directory containing pg_config to the PATH
  or specify the full executable path with the option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/6f/91/890c6f954e2d09d26b266a24468570c6227de61ac6f64926c48000db0a6e/psycopg2-2.4.4.tar.gz#sha256=0c55b059d33f6b2cbb52f254320832c0ca30498ae06f4f4df2a2b38af989127e (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.4.3.tar.gz (647 kB)
     |████████████████████████████████| 647 kB 34.6 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_2f588bcf621d40f494b57693a253bdde/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_2f588bcf621d40f494b57693a253bdde/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-ja1yq7xg
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_2f588bcf621d40f494b57693a253bdde/
  Complete output (14 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-ja1yq7xg/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-ja1yq7xg/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-ja1yq7xg/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-ja1yq7xg/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-ja1yq7xg/psycopg2.egg-info/SOURCES.txt'
  Error: pg_config executable not found.

  Please add the directory containing pg_config to the PATH
  or specify the full executable path with the option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/1e/71/8929172068cbc3d3c7288bf888a7df5862a28d67ed61ad9b4c7aa5cf8be8/psycopg2-2.4.3.tar.gz#sha256=febd8e35ca9904bf4418e611f866a80639fbca7db2781e5b5cd20589b767af0b (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.4.2.tar.gz (667 kB)
     |████████████████████████████████| 667 kB 31.9 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_0cefe0f908584b7fb3e542c135518cec/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_0cefe0f908584b7fb3e542c135518cec/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-87m5c_u_
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_0cefe0f908584b7fb3e542c135518cec/
  Complete output (14 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-87m5c_u_/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-87m5c_u_/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-87m5c_u_/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-87m5c_u_/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-87m5c_u_/psycopg2.egg-info/SOURCES.txt'
  Error: pg_config executable not found.

  Please add the directory containing pg_config to the PATH
  or specify the full executable path with the option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/70/91/345f8eb32dc333331510e1adad858f7a1478d3a1e4aae05ee188985c6b17/psycopg2-2.4.2.tar.gz#sha256=c5f0f853aeeefc7b2aa73b08579e5d74c4c32ad5fca87e058bf04e08273a41a1 (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.4.1.tar.gz (398 kB)
     |████████████████████████████████| 398 kB 39.6 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_19fcdd5416524ebea4bdfd77b81eaecd/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_19fcdd5416524ebea4bdfd77b81eaecd/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-16i0yf4d
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_19fcdd5416524ebea4bdfd77b81eaecd/
  Complete output (14 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-16i0yf4d/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-16i0yf4d/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-16i0yf4d/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-16i0yf4d/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-16i0yf4d/psycopg2.egg-info/SOURCES.txt'
  Error: pg_config executable not found.

  Please add the directory containing pg_config to the PATH
  or specify the full executable path with the option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/82/f8/6c80beb1b58f01f52dcdfa52bc1668caa4e3fc4927e9230edc40afa98c05/psycopg2-2.4.1.tar.gz#sha256=f8ee9a4004afbd1ff1a1db8df7910475d6ec26e102aa92c9214cbeb1ef39ff49 (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.4.tar.gz (607 kB)
     |████████████████████████████████| 607 kB 27.1 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_33c8bdbb153744a8865a39f0f0e7517b/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_33c8bdbb153744a8865a39f0f0e7517b/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-nbn9zk0h
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_33c8bdbb153744a8865a39f0f0e7517b/
  Complete output (14 lines):
  running egg_info
  creating /tmp/pip-pip-egg-info-nbn9zk0h/psycopg2.egg-info
  writing /tmp/pip-pip-egg-info-nbn9zk0h/psycopg2.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-pip-egg-info-nbn9zk0h/psycopg2.egg-info/dependency_links.txt
  writing top-level names to /tmp/pip-pip-egg-info-nbn9zk0h/psycopg2.egg-info/top_level.txt
  writing manifest file '/tmp/pip-pip-egg-info-nbn9zk0h/psycopg2.egg-info/SOURCES.txt'
  Error: pg_config executable not found.

  Please add the directory containing pg_config to the PATH
  or specify the full executable path with the option:

      python setup.py build_ext --pg-config /path/to/pg_config build ...

  or with the pg_config option in 'setup.cfg'.
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/ce/2d/e9e65ee32ef2657028109bd5a1c1ece97e409ebf790b6ee286aae2c6b890/psycopg2-2.4.tar.gz#sha256=f41623c413283f101b61ba2356f92cc1890b00308aea970124ebd6178ac5c3a5 (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.3.2.tar.gz (568 kB)
     |████████████████████████████████| 568 kB 8.0 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_e9934a8bc07b4c6c9b010b3368fded92/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_e9934a8bc07b4c6c9b010b3368fded92/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-qmyfywcf
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_e9934a8bc07b4c6c9b010b3368fded92/
  Complete output (6 lines):
  Traceback (most recent call last):
    File "<string>", line 1, in <module>
    File "/tmp/pip-install-swvg6ug0/psycopg2_e9934a8bc07b4c6c9b010b3368fded92/setup.py", line 247
      except Warning, w:
                    ^
  SyntaxError: invalid syntax
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/50/48/32927cbc99633613704950be5013fc144aa0f451a5e0616635a934d94a62/psycopg2-2.3.2.tar.gz#sha256=0ef1df428f5482c41885ee6d9a6975473fc83af5497801abd36dd150a3754c2c (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.3.1.tar.gz (567 kB)
     |████████████████████████████████| 567 kB 20.3 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_c1216bf7f0ee48afaccb8529d04f4d39/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_c1216bf7f0ee48afaccb8529d04f4d39/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-njahyau0
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_c1216bf7f0ee48afaccb8529d04f4d39/
  Complete output (6 lines):
  Traceback (most recent call last):
    File "<string>", line 1, in <module>
    File "/tmp/pip-install-swvg6ug0/psycopg2_c1216bf7f0ee48afaccb8529d04f4d39/setup.py", line 247
      except Warning, w:
                    ^
  SyntaxError: invalid syntax
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/cd/7c/6acf5aacd347f3dc1398eca0e2123c35a48efb07617d4d9578e9cd79a1a7/psycopg2-2.3.1.tar.gz#sha256=7aee74fb13f3b51571fa84cebeeeb29b4230e7553f554f228636c6754752c4e4 (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.3.0.tar.gz (588 kB)
     |████████████████████████████████| 588 kB 18.9 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_96e0f6d6dee54a008f090813f9af66ca/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_96e0f6d6dee54a008f090813f9af66ca/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-uf4qahbe
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_96e0f6d6dee54a008f090813f9af66ca/
  Complete output (6 lines):
  Traceback (most recent call last):
    File "<string>", line 1, in <module>
    File "/tmp/pip-install-swvg6ug0/psycopg2_96e0f6d6dee54a008f090813f9af66ca/setup.py", line 247
      except Warning, w:
                    ^
  SyntaxError: invalid syntax
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/68/0a/459df8dcbcc118ca435e9567abceaab919706908d52139e503f6396c4935/psycopg2-2.3.0.tar.gz#sha256=c17a06b7468debba94fa151d3ad93cd885d9cbe9a751e54ceb87738d5f0478ea (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.2.2.tar.gz (530 kB)
     |████████████████████████████████| 530 kB 18.9 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_69ab98a4ad7f43c58254713745ed6951/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_69ab98a4ad7f43c58254713745ed6951/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-jj1_28d3
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_69ab98a4ad7f43c58254713745ed6951/
  Complete output (6 lines):
  Traceback (most recent call last):
    File "<string>", line 1, in <module>
    File "/tmp/pip-install-swvg6ug0/psycopg2_69ab98a4ad7f43c58254713745ed6951/setup.py", line 245
      except Warning, w:
                    ^
  SyntaxError: invalid syntax
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/63/3e/a4a35761eb4595fff89e63347b4f8e79c2095782fa5bc016a6dfb18b21ac/psycopg2-2.2.2.tar.gz#sha256=21a33d5b2609103512748098a06249492cc294790e07638fadc68cf06eeac39d (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.2.1.tar.gz (529 kB)
     |████████████████████████████████| 529 kB 19.9 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_35a6f6477f9f43d1b250ab4dc685e1ad/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_35a6f6477f9f43d1b250ab4dc685e1ad/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-evmjvpw1
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_35a6f6477f9f43d1b250ab4dc685e1ad/
  Complete output (6 lines):
  Traceback (most recent call last):
    File "<string>", line 1, in <module>
    File "/tmp/pip-install-swvg6ug0/psycopg2_35a6f6477f9f43d1b250ab4dc685e1ad/setup.py", line 239
      except Warning, w:
                    ^
  SyntaxError: invalid syntax
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/de/c4/fdfb801035bd7da9e1ce98169d48ca2d6dee5b4361e349afbba40b3d7a5d/psycopg2-2.2.1.tar.gz#sha256=b0eca4e8438025dc57cacbea4e8ca2f5dc0554d41b1cdcc177757a5fc413f3d1 (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.2.0.tar.gz (528 kB)
     |████████████████████████████████| 528 kB 33.5 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_0c35d1d8864d497280dcaa5cb2215113/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_0c35d1d8864d497280dcaa5cb2215113/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-zcbdjirh
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_0c35d1d8864d497280dcaa5cb2215113/
  Complete output (6 lines):
  Traceback (most recent call last):
    File "<string>", line 1, in <module>
    File "/tmp/pip-install-swvg6ug0/psycopg2_0c35d1d8864d497280dcaa5cb2215113/setup.py", line 238
      except Warning, w:
                    ^
  SyntaxError: invalid syntax
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/32/0c/2f4da04ae2a66d71eff37f19fce67506ad28f887851cd1c1cca35ba08b36/psycopg2-2.2.0.tar.gz#sha256=e70a8eabc491318beef4cd9cd9245a4d8dc62ee31cb74e7988913a66bb33f858 (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.0.14.tar.gz (491 kB)
     |████████████████████████████████| 491 kB 33.4 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_63617959f5e04b3ca069262b84cd4b81/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_63617959f5e04b3ca069262b84cd4b81/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-fcrlgx5e
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_63617959f5e04b3ca069262b84cd4b81/
  Complete output (6 lines):
  Traceback (most recent call last):
    File "<string>", line 1, in <module>
    File "/tmp/pip-install-swvg6ug0/psycopg2_63617959f5e04b3ca069262b84cd4b81/setup.py", line 238
      except Warning, w:
                    ^
  SyntaxError: invalid syntax
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/e0/1c/f0843f50a69fba3db880e9b267d36f6709bbf31a36fc46b82f75e8975ede/psycopg2-2.0.14.tar.gz#sha256=902607cdbe1195a00694d2b477eed8429eda433caaa0eb6ff7f80883e1c17ac7 (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.0.13.tar.gz (258 kB)
     |████████████████████████████████| 258 kB 17.2 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_65a437b8d0ca44d3ae75272cca223613/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_65a437b8d0ca44d3ae75272cca223613/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-1kysfrwp
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_65a437b8d0ca44d3ae75272cca223613/
  Complete output (6 lines):
  Traceback (most recent call last):
    File "<string>", line 1, in <module>
    File "/tmp/pip-install-swvg6ug0/psycopg2_65a437b8d0ca44d3ae75272cca223613/setup.py", line 233
      except Warning, w:
                    ^
  SyntaxError: invalid syntax
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/3a/7a/968afcb86b1958ae963a3aaa42c561e3ed2c2d4a8b773622b03856a16248/psycopg2-2.0.13.tar.gz#sha256=a15e622e101b16aa8ad44813d8fb1eced91379396c054aacbfa3ad658352332b (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.0.12.tar.gz (256 kB)
     |████████████████████████████████| 256 kB 28.8 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_28d3a4d9f5644bd3a341f175f6cae0ab/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_28d3a4d9f5644bd3a341f175f6cae0ab/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-q98jo0qj
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_28d3a4d9f5644bd3a341f175f6cae0ab/
  Complete output (6 lines):
  Traceback (most recent call last):
    File "<string>", line 1, in <module>
    File "/tmp/pip-install-swvg6ug0/psycopg2_28d3a4d9f5644bd3a341f175f6cae0ab/setup.py", line 225
      except Warning, w:
                    ^
  SyntaxError: invalid syntax
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/6a/8d/ee5c330823d527a5cd14c833063f825211d7b5de6e4897f72e250c107d85/psycopg2-2.0.12.tar.gz#sha256=542c187531e756867fb60034c393b6f2beca34eeeb3ce2e0089a2b6fb8be1292 (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.0.11.tar.gz (255 kB)
     |████████████████████████████████| 255 kB 24.7 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_4ab58e8f43174f54bd45c179f87ce8b3/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_4ab58e8f43174f54bd45c179f87ce8b3/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-0db6hnwc
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_4ab58e8f43174f54bd45c179f87ce8b3/
  Complete output (6 lines):
  Traceback (most recent call last):
    File "<string>", line 1, in <module>
    File "/tmp/pip-install-swvg6ug0/psycopg2_4ab58e8f43174f54bd45c179f87ce8b3/setup.py", line 225
      except Warning, w:
                    ^
  SyntaxError: invalid syntax
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/2d/d7/496da11d7c81971870ddd36800419c4f84e8f6208aac5eabedf9f7748729/psycopg2-2.0.11.tar.gz#sha256=e6b4e0e41df97441eff34e00065376414da6488e0d55848a45cd77551dbae434 (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
  Downloading psycopg2-2.0.10.tar.gz (255 kB)
     |████████████████████████████████| 255 kB 37.2 MB/s
  Preparing metadata (setup.py) ... error
  ERROR: Command errored out with exit status 1:
   command: /usr/bin/python3 -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-swvg6ug0/psycopg2_acd43b885b18430686e92177c099c69f/setup.py'"'"'; __file__='"'"'/tmp/pip-install-swvg6ug0/psycopg2_acd43b885b18430686e92177c099c69f/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.StringIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-c9_i_l46
       cwd: /tmp/pip-install-swvg6ug0/psycopg2_acd43b885b18430686e92177c099c69f/
  Complete output (5 lines):
  Traceback (most recent call last):
    File "<string>", line 1, in <module>
    File "/tmp/pip-install-swvg6ug0/psycopg2_acd43b885b18430686e92177c099c69f/setup.py", line 50, in <module>
      import ConfigParser
  ModuleNotFoundError: No module named 'ConfigParser'
  ----------------------------------------
WARNING: Discarding https://files.pythonhosted.org/packages/19/79/35c7596bab4456f3610c12ec542a94d51c6781ced587d1d85127210b879b/psycopg2-2.0.10.tar.gz#sha256=e40cc04b43849085725076ae134bfef9e3b087f6dd7c964aeeb930e2f0bc14ab (from https://pypi.org/simple/psycopg2/). Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
ERROR: Could not find a version that satisfies the requirement psycopg2 (from versions: 2.0.10, 2.0.11, 2.0.12, 2.0.13, 2.0.14, 2.2.0, 2.2.1, 2.2.2, 2.3.0, 2.3.1, 2.3.2, 2.4, 2.4.1, 2.4.2, 2.4.3, 2.4.4, 2.4.5, 2.4.6, 2.5, 2.5.1, 2.5.2, 2.5.3, 2.5.4, 2.5.5, 2.6, 2.6.1, 2.6.2, 2.7, 2.7.1, 2.7.2, 2.7.3, 2.7.3.1, 2.7.3.2, 2.7.4, 2.7.5, 2.7.6, 2.7.6.1, 2.7.7, 2.8, 2.8.1, 2.8.2, 2.8.3, 2.8.4, 2.8.5, 2.8.6, 2.9, 2.9.1, 2.9.2, 2.9.3, 2.9.4, 2.9.5, 2.9.6, 2.9.7, 2.9.8, 2.9.9, 2.9.10)
ERROR: No matching distribution found for psycopg2
[root@lab01 ~]#
[root@lab01 ~]# pip install psycopg2-binary faker
Requirement already satisfied: psycopg2-binary in /usr/local/lib64/python3.9/site-packages (2.9.10)
Requirement already satisfied: faker in /usr/local/lib/python3.9/site-packages (30.8.2)
Requirement already satisfied: python-dateutil>=2.4 in /usr/lib/python3.9/site-packages (from faker) (2.8.1)
Requirement already satisfied: typing-extensions in /usr/local/lib/python3.9/site-packages (from faker) (4.12.2)
Requirement already satisfied: six>=1.5 in /usr/lib/python3.9/site-packages (from python-dateutil>=2.4->faker) (1.15.0)
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
[root@lab01 ~]# python --version
Python 3.9.20
[root@lab01 ~]# vi data_insert.py
[root@lab01 ~]#
[root@lab01 ~]# vi data_insert_2.py
[root@lab01 ~]# kubectl exec -it my-postgresql-cluster-0 -- psql -U postgres
Password for user postgres:
psql (17.0)
Type "help" for help.

postgres=# \q
could not save history to file "//.psql_history": Read-only file system
[root@lab01 ~]# vi data_insert_2.py
[root@lab01 ~]# kubectl cp data_insert.py my-postgresql-cluster-0:/tmp/data_insert.py
[root@lab01 ~]# kubectl exec -it my-postgresql-cluster-0 -- python3 /tmp/data_insert.py
OCI runtime exec failed: exec failed: unable to start container process: exec: "python3": executable file not found in $PATH: unknown
command terminated with exit code 126
[root@lab01 ~]# kubectl exec -it my-postgresql-cluster-0 -- /bin/bash
I have no name!@my-postgresql-cluster-0:/$
I have no name!@my-postgresql-cluster-0:/$
I have no name!@my-postgresql-cluster-0:/$
I have no name!@my-postgresql-cluster-0:/$ apt-get update
Reading package lists... Done
E: List directory /var/lib/apt/lists/partial is missing. - Acquire (2: No such file or directory)
I have no name!@my-postgresql-cluster-0:/$ apt-get install -y python3 python3-pip
E: Could not open lock file /var/lib/dpkg/lock-frontend - open (13: Permission denied)
E: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), are you root?
I have no name!@my-postgresql-cluster-0:/$ kubectl exec -it my-postgresql-cluster-0 --user=root -- /bin/bash
^C
I have no name!@my-postgresql-cluster-0:/$ \q
bash: q: command not found
I have no name!@my-postgresql-cluster-0:/$ exit
exit
command terminated with exit code 127
[root@lab01 ~]# kubectl exec -it my-postgresql-cluster-0 --user=root -- /bin/bash
error: auth info "root" does not exist
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# kubectl run my-postgresql-cluster-client --rm --tty -i --restart='Never' --namespace default --image docker.io/bitnami/postgresql:17.0.0-debian-12-r9 --env="PGPASSWORD=$POSTGRES_PASSWORD" \
      --command -- psql --host my-postgresql-cluster -U postgres -d postgres -p 5432
If you don't see a command prompt, try pressing enter.

postgres=# \q
could not save history to file "//.psql_history": Permission denied

E1106 00:21:21.031776   28312 v2.go:104] "Unhandled Error" err="write on closed stream 0"

pod "my-postgresql-cluster-client" deleted
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# kubectl port-forward svc/my-postgresql-cluster 5432:5432
Forwarding from 127.0.0.1:5432 -> 5432
Forwarding from [::1]:5432 -> 5432





Handling connection for 5432
Handling connection for 5432
Handling connection for 5432
Handling connection for 5432
Handling connection for 5432
Handling connection for 5432
Handling connection for 5432
Handling connection for 5432
Handling connection for 5432
Handling connection for 5432
Handling connection for 5432
Handling connection for 5432
Handling connection for 5432
Handling connection for 5432
Handling connection for 5432
Handling connection for 5432
Handling connection for 5432
Handling connection for 5432
Handling connection for 5432
Handling connection for 5432
Handling connection for 5432
E1106 01:00:52.655072   29080 portforward.go:413] "Unhandled Error" err="an error occurred forwarding 5432 -> 5432: error forwarding port 5432 to pod eeb35234ca4076ed583364a86f556afc88de7b6472637806495bff7c6be75f3c, uid : Error response from daemon: No such container: eeb35234ca4076ed583364a86f556afc88de7b6472637806495bff7c6be75f3c"
error: lost connection to pod
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
login as: root
root@192.168.113.133's password:
Activate the web console with: systemctl enable --now cockpit.socket

Last login: Wed Nov  6 00:23:07 2024 from 192.168.113.1
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# history
    1  ifconfig
    2  cat /etc/-os-release
    3  cat /etc/os-release
    4  ifconfig
    5  df -h
    6  dnf install epel-release
    7  dnf config-manager --set-enabled crb
    8  sudo dnf install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-9-x86_64/pgdg-redhat-repo-latest.noarch.rpm
    9  sudo dnf -qy module disable postgresql
   10  dnf -y install etcd
   11  vi /etc/yum.repos.d/extras.repo
   12  dnf -y install etcd
   13  dnf -y install keepalived
   14  dnf -y install haproxy
   15  sudo dnf install -y curl conntrack
   16  dnf install -y docker
   17  systemctl enable --now docker
   18  systemctl enable docker
   19   dnf config-manager --add-repo=https://download.docker.com/linux/centos/docker-ce.repo
   20   dnf install -y docker-ce docker-ce-cli containerd.io
   21  systemctl start docker
   22  dnf install -y docker-ce docker-ce-cli containerd.io
   23  dnf install -y docker
   24  systemctl enable --now docker
   25   dnf remove -y podman podman-docker
   26   dnf install -y dnf-plugins-core
   27  dnf config-manager --add-repo=https://download.docker.com/linux/centos/docker-ce.repo
   28  dnf install -y docker-ce docker-ce-cli containerd.io
   29  systemctl enable --now docker
   30  curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
   31  sudo install minikube-linux-amd64 /usr/local/bin/minikube
   32  minikube start --driver=docker --cpus=2 --memory=2048mb --disk-size=20g
   33  minikube start --driver=docker --cpus=2 --memory=2048mb --disk-size=20g --force
   34  curl -fsSL https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash
   35  helm repo add bitnami https://charts.bitnami.com/bitnami
   36  helm repo update
   37  vi values-postgres.yaml
   38  helm install my-postgresql-cluster -f values-postgres.yaml bitnami/postgresql
   39  kubectl get pods
   40  cd  /usr/local/bin
   41  ls -lrt
   42  cd ../
   43  cd
   44  ls -lrt
   45  curl -LO "https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl"
   46  chmod +x kubectl
   47  sudo mv kubectl /usr/local/bin/
   48  kubectl version --client
   49  kubectl get nodes
   50  kubectl get pods -A
   51  kubectl get svc
   52  kubectl logs my-postgresql-cluster-0
   53  kubectl get pods -l app.kubernetes.io/instance=my-postgresql-cluster
   54  vi create_database.sql
   55  sudo dnf install -y python3
   56  pip3 install faker psycopg2-binary
   57  vi data_insert.py
   58  kubectl get svc
   59  export POSTGRES_PASSWORD=$(kubectl get secret --namespace default my-postgresql-cluster -o jsonpath="{.data.postgres-password}" | base64 -d)
   60  kubectl run my-postgresql-cluster-client --rm --tty -i --restart='Never' --namespace default --image docker.io/bitnami/postgresql:17.0.0-debian-12-r9 --env="PGPASSWORD=$POSTGRES_PASSWORD"       --command -- psql --host my-postgresql-cluster -U postgres -d postgres -p 5432
   61  echo $POSTGRES_PASSWORD
   62  echo SERVICE_IP=$(kubectl get svc --namespace default my-postgresql-cluster --template "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}")
   63  export SERVICE_IP=$(kubectl get svc --namespace default my-postgresql-cluster --template "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}")
   64  PGPASSWORD="$POSTGRES_PASSWORD" psql --host 10.96.0.1 --port 5432 -U postgres -d postgres
   65  kubectl run my-postgresql-cluster-client --rm --tty -i --restart='Never' --namespace default --image docker.io/bitnami/postgresql:17.0.0-debian-12-r9 --env="PGPASSWORD=$POSTGRES_PASSWORD"       --command -- psql --host my-postgresql-cluster -U postgres -d postgres -p 5432
   66  /opt/bitnami/scripts/postgresql/entrypoint.sh /bin/bash
   67  kubectl get svc --namespace default -w my-postgresql-cluster
   68  export SERVICE_IP=$(kubectl get svc --namespace default my-postgresql-cluster --template "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}")
   69  kubectl get svc
   70  kubectl port-forward svc/my-postgresql-cluster 5432:5432
   71  kubectl exec -it my-postgresql-cluster-0 -- psql -U postgres
   72  pip install psycopg2 faker
   73  pip install psycopg2-binary faker
   74  python --version
   75  vi data_insert.py
   76  vi data_insert_2.py
   77  kubectl exec -it my-postgresql-cluster-0 -- psql -U postgres
   78  vi data_insert_2.py
   79  kubectl cp data_insert.py my-postgresql-cluster-0:/tmp/data_insert.py
   80  kubectl exec -it my-postgresql-cluster-0 -- python3 /tmp/data_insert.py
   81  kubectl exec -it my-postgresql-cluster-0 -- /bin/bash
   82  kubectl exec -it my-postgresql-cluster-0 --user=root -- /bin/bash
   83  kubectl run my-postgresql-cluster-client --rm --tty -i --restart='Never' --namespace default --image docker.io/bitnami/postgresql:17.0.0-debian-12-r9 --env="PGPASSWORD=$POSTGRES_PASSWORD"       --command -- psql --host my-postgresql-cluster -U postgres -d postgres -p 5432
   84  kubectl port-forward svc/my-postgresql-cluster 5432:5432
   85  psql -h localhost -p 5432 -U postgres
   86  ls -lrt
   87  vi data_insert.py
   88  python3 data_insert.py
   89  psql -h localhost -p 5432 -U postgres
   90  vi data_insert.py
   91  python3 data_insert.py
   92  vi data_insert.py
   93  python3 data_insert.py
   94  vi data_insert.py
   95  vi fake_insert.py
   96  python3 fake_insert.py
   97  >fake_insert.py
   98  vi fake_insert.py
   99  python3 fake_insert.py
  100  vi fake_insert.py
  101  python3 fake_insert.py
  102  vi fake_insert.py
  103  python3 fake_insert.py
  104  psql -h localhost -p 5432 -U postgres
  105  >fake_insert.py
  106  vi fake_insert.py
  107  python3 fake_insert.py
  108  psql -h localhost -p 5432 -U postgres
  109  helm install my-standalone-postgresql bitnami/postgresql
  110  kubectl get pods -l app.kubernetes.io/instance=my-postgresql-standalone
  111  export POSTGRES_PASSWORD=$(kubectl get secret --namespace default my-standalone-postgresql -o jsonpath="{.data.postgres-password}" | base64 -d)
  112  echo $POSTGRES_PASSWORD
  113  kubectl run my-standalone-postgresql-client --rm --tty -i --restart='Never' --namespace default --image docker.io/bitnami/postgresql:17.0.0-debian-12-r9 --env="PGPASSWORD=$POSTGRES_PASSWORD"       --command -- psql --host my-standalone-postgresql -U postgres -d postgres -p 5432
  114  kubectl get svc my-postgresql-standalone
  115  kubectl get svc my-standalone-postgresql
  116  kubectl exec -it my-postgresql-cluster-0 -- bash
  117  kubectl delete pod my-postgresql-cluster-0
  118  kubectl exec -it my-postgresql-cluster-0 -- psql -U postgres
  119  kubectl exec -it my-postgresql-standalone-0 -- bash
  120  kubectl get svc my-standalone-postgresql
  121  kubectl exec -it my-standalone-postgresql
  122  kubectl exec -it my-standalone-postgresql -- bash
  123  kubectl get svc my-standalone-postgresql
  124  kubectl exec -it  my-standalone-postgresql -- bash
  125  kubectl exec -it my-postgresql-cluster-0 -- bash
  126  my-postgresql-cluster-0
  127  kubectl get svc  my-postgresql-cluster-0
  128  kubectl get svc  my-postgresql-cluster
  129  kubectl exec -it  my-standalone-postgresql -- bash
  130  kubectl exec -it my-postgresql-standalone-0 -- bash
  131  kubectl get pods
  132  kubectl exec -it my-standalone-postgresql-0  -- bash
  133  kubectl get svc
  134  my-postgresql-cluster
  135  kubectl get svc my-postgresql-cluster -o jsonpath='{.spec.clusterIP}'
  136  kubectl exec -it my-standalone-postgresql-0  -- bash
  137  kubectl delete pod my-postgresql-standalone-0
  138  kubectl delete pod my-postgresql-standalone
  139  kubectl delete pod my-standalone-postgresql
  140  kubectl get pods
  141  kubectl delete pod my-standalone-postgresql-0
  142  kubectl get pods
  143  kubectl logs my-postgresql-standalone-0
  144  kubectl logs my-standalone-postgresql-0
  145  export POSTGRES_PASSWORD=$(kubectl get secret --namespace default my-standalone-postgresql -o jsonpath="{.data.postgres-password}" | base64 -d)
  146  kubectl run my-standalone-postgresql-client --rm --tty -i --restart='Never' --namespace default --image docker.io/bitnami/postgresql:17.0.0-debian-12-r9 --env="PGPASSWORD=$POSTGRES_PASSWORD"       --command -- psql --host my-standalone-postgresql -U postgres -d postgres -p 5432
  147  kubectl port-forward --namespace default svc/my-standalone-postgresql 5432:5432 &
  148      PGPASSWORD="$POSTGRES_PASSWORD" psql --host 127.0.0.1 -U postgres -d postgres -p 5432
  149  kubectl run my-standalone-postgresql-client --rm --tty -i --restart='Never' --namespace default --image docker.io/bitnami/postgresql:17.0.0-debian-12-r9 --env="PGPASSWORD=$POSTGRES_PASSWORD"       --command -- psql --host my-standalone-postgresql -U postgres -d postgres -p 5432
  150  kubectl get svc my-standalone-postgresql
  151  kubectl logs my-postgresql-standalone-0
  152  kubectl logs my-postgresql-standalone
  153  kubectl logs my-standalone-postgresql
  154  kubectl get pods
  155  kubectl logs my-standalone-postgresql-0
  156   kubectl exec -it my-postgresql-cluster-0 -- psql -U postgres
  157   kubectl exec -it my-standalone-postgresql-0 -- psql -U postgres
  158  kubectl exec -it my-postgresql-cluster-0 -- bash
  159  kubectl get pods
  160  kubectl exec -it my-postgresql-cluster-0 -- bash
  161  kubectl exec -it my-postgresql-cluster-0 -- psql -U postgres -c "SHOW wal_level;"
  162  kubectl exec -it my-postgresql-cluster-0 -- psql -U postgres -c "SHOW max_wal_senders;"
  163  \q
  164  kubectl exec -it my-postgresql-cluster-0 -- psql -U postgres -c "SHOW archive_mode;"
  165  \q
  166  kubectl exec -it my-standalone-postgresql-0  -- bash
  167  kubectl delete pod my-standalone-postgresql-0
  168  kubectl logs my-standalone-postgresql-0
  169  kubectl exec -it my-standalone-postgresql-0 -- psql -U postgres -c "SELECT pg_is_in_recovery();"
  170  kubectl exec -it my-standalone-postgresql-0  -- bash
  171  kubectl create configmap postgresql-config --from-file=postgresql.conf=./postgresql.conf --from-file=pg_hba.conf=./pg_hba.conf
  172  kubectl cp my-postgresql-cluster-0:/opt/bitnami/postgresql/conf/postgresql.conf ./postgresql.conf
  173  kubectl cp my-postgresql-cluster-0:/opt/bitnami/postgresql/conf/pg_hba.conf ./pg_hba.conf
  174  ls -lrt
  175  kubectl create configmap postgresql-config --from-file=postgresql.conf=./postgresql.conf --from-file=pg_hba.conf=./pg_hba.conf
  176  vi postgresql.conf
  177  vi postgresql.conf
  178  kubectl get pods
  179  kubectl get svc my-postgresql-cluster-0
  180  kubectl get svc my-postgresql-cluster -o jsonpath='{.spec.clusterIP}'
  181  vi postgresql.conf
  182  vi  values.yaml
  183  vi  postgresql-deployment.yaml
  184  kubectl apply -f postgresql-deployment.yaml
  185  kubectl delete pod my-standalone-postgresql-0
  186  kubectl exec -it my-standalone-postgresql-0 -- psql -U postgres -c "SELECT pg_is_in_recovery();"
  187  \\
  188  kubectl create configmap postgresql-config --from-file=postgresql.conf=./postgresql.conf --from-file=pg_hba.conf=./pg_hba.conf
  189  kubectl exec -it my-standalone-postgresql-0 -- psql -U postgres -c "SELECT pg_is_in_recovery();"
  190  kubectl exec -it my-standalone-postgresql-0  -- bash
  191  kubectl delete pod my-standalone-postgresql-0
  192  kubectl exec -it my-standalone-postgresql-0  -- bash
  193  kubectl delete pod my-postgresql-cluster-0
  194  kubectl exec -it my-standalone-postgresql-0  -- bash
  195  >postgresql.conf
  196  >pg_hba.conf
  197  vi postgresql.conf
  198  vi pg_hba.conf
  199  kubectl delete pod my-postgresql-cluster-0
  200  kubectl delete pod my-standalone-postgresql-0
  201  kubectl create configmap postgresql-config --from-file=postgresql.conf=./postgresql.conf --from-file=pg_hba.conf=./pg_hba.conf
  202  cat postgresql-config
  203  ls -lrt
  204  kubectl create configmap postgresql-config   --from-file=postgresql.conf=./postgresql.conf   --from-file=pg_hba.conf=./pg_hba.conf   --dry-run=client -o yaml > postgresql-config.yaml
  205  kubectl apply -f postgresql-config.yaml
  206  kubectl delete configmap postgresql-config
  207  kubectl create configmap postgresql-config   --from-file=postgresql.conf=./postgresql.conf   --from-file=pg_hba.conf=./pg_hba.conf
  208  kubectl describe configmap postgresql-config
  209  kubectl get deployment my-postgresql-cluster -o yaml > my-postgresql-cluster-deployment.yaml
  210  kubectl get deployments
  211  kubectl get deployments --all-namespaces
  212  helm list --all-namespaces
  213  kubectl get deployments -n  default
  214  kubectl get statefulsets -n default
  215  kubectl get pods -n default
  216  kubectl get statefulset my-postgresql-cluster -n default -o yaml > my-postgresql-cluster-statefulset.yaml
  217  kubectl edit statefulset my-postgresql-cluster -n default
  218
  219  ls -rlt
  220  cat fake_insert.py
  221  history
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# kubectl get pods
NAME                         READY   STATUS    RESTARTS   AGE
my-postgresql-cluster-0      1/1     Running   0          20h
my-standalone-postgresql-0   1/1     Running   0          20h
[root@lab01 ~]#
[root@lab01 ~]# kubectl get svc my-pg-cluster-postgresql
Error from server (NotFound): services "my-pg-cluster-postgresql" not found
[root@lab01 ~]# kubectl get pvc postgresql-pv-claim
Error from server (NotFound): persistentvolumeclaims "postgresql-pv-claim" not found
[root@lab01 ~]# kubectl get pvc
NAME                              STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE
data-my-postgresql-cluster-0      Bound    pvc-79f2855d-06d0-412e-90ec-45a00bb70eb2   8Gi        RWO            standard       <unset>                 22h
data-my-standalone-postgresql-0   Bound    pvc-f5c7fe25-2443-474d-b989-33b6af8dedf3   8Gi        RWO            standard       <unset>                 21h
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# ls -lrt
total 101436
-rw-------. 1 root root      1220 Mar  5  2024 anaconda-ks.cfg
drwxr-xr-x. 2 root root         6 Mar  5  2024 Videos
drwxr-xr-x. 2 root root         6 Mar  5  2024 Templates
drwxr-xr-x. 2 root root         6 Mar  5  2024 Public
drwxr-xr-x. 2 root root         6 Mar  5  2024 Pictures
drwxr-xr-x. 2 root root         6 Mar  5  2024 Music
drwxr-xr-x. 2 root root         6 Mar  5  2024 Downloads
drwxr-xr-x. 2 root root         6 Mar  5  2024 Documents
drwxr-xr-x. 2 root root         6 Mar  5  2024 Desktop
-rw-r--r--. 1 root root 103820392 Nov  5 23:48 minikube-linux-amd64
-rw-r--r--. 1 root root        43 Nov  5 23:54 values-postgres.yaml
-rw-r--r--. 1 root root       278 Nov  6 00:06 create_database.sql
-rw-r--r--. 1 root root      1889 Nov  6 00:18 data_insert_2.py
-rw-r--r--. 1 root root       525 Nov  6 00:29 data_insert.py
-rw-r--r--. 1 root root      1706 Nov  6 00:33 fake_insert.py
-rw-r--r--. 1 root root      1162 Nov  6 01:26 postgresql-deployment.yaml
-rw-r--r--. 1 root root       470 Nov  6 01:36 postgresql.conf
-rw-r--r--. 1 root root       144 Nov  6 01:37 pg_hba.conf
-rw-r--r--. 1 root root       794 Nov  6 01:38 postgresql-config.yaml
-rw-r--r--. 1 root root         0 Nov  6 01:41 my-postgresql-cluster-deployment.yaml
-rw-r--r--. 1 root root      6005 Nov  6 01:44 my-postgresql-cluster-statefulset.yaml
[root@lab01 ~]# cat postgresql-config.yaml
apiVersion: v1
data:
  pg_hba.conf: "local\tall\tall\t\ttrust\nhost    replication     all             0.0.0.0/0
    \         trust\nhost    all     all             0.0.0.0/0          trust\n\n"
  postgresql.conf: |+
    # Enable replication
    wal_level = replica            # Set the write-ahead logging level for replication
    max_wal_senders = 3            # Maximum number of simultaneously active replication connections
    hot_standby = on               # Allow read-only queries on the replica during replication

    # Other common settings
    listen_addresses = '*'         # Accept connections from any IP address (use the IPs you need)
    port = 5432                    # Default PostgreSQL port

kind: ConfigMap
metadata:
  creationTimestamp: null
  name: postgresql-config
[root@lab01 ~]# cat values-postgres.yaml
primary:
  service:
    type: LoadBalancer
[root@lab01 ~]# helm list
NAME                            NAMESPACE       REVISION        UPDATED                                 STATUS          CHART                  APP VERSION
my-postgresql-cluster           default         1               2024-11-05 23:55:02.630249179 +0530 IST deployed        postgresql-16.1.1      17.0.0
my-standalone-postgresql        default         1               2024-11-06 00:38:07.81886689 +0530 IST  deployed        postgresql-16.1.1      17.0.0
[root@lab01 ~]# helm delete my-postgresql-cluster
release "my-postgresql-cluster" uninstalled
[root@lab01 ~]# helm delete my-standalone-postgresql
release "my-standalone-postgresql" uninstalled
[root@lab01 ~]# kubectl delete pods --all
No resources found
[root@lab01 ~]# kubectl delete pods --all
No resources found
[root@lab01 ~]# kubectl delete statefulset my-pg-cluster-postgresql
Error from server (NotFound): statefulsets.apps "my-pg-cluster-postgresql" not found
[root@lab01 ~]# kubectl delete pvc --all
kubectl delete pv --all
persistentvolumeclaim "data-my-postgresql-cluster-0" deleted
persistentvolumeclaim "data-my-standalone-postgresql-0" deleted
persistentvolume "pvc-79f2855d-06d0-412e-90ec-45a00bb70eb2" deleted
persistentvolume "pvc-f5c7fe25-2443-474d-b989-33b6af8dedf3" deleted
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# # helm list
[root@lab01 ~]# helm list
NAME    NAMESPACE       REVISION        UPDATED STATUS  CHART   APP VERSION
[root@lab01 ~]# ls -lrt
total 101436
-rw-------. 1 root root      1220 Mar  5  2024 anaconda-ks.cfg
drwxr-xr-x. 2 root root         6 Mar  5  2024 Videos
drwxr-xr-x. 2 root root         6 Mar  5  2024 Templates
drwxr-xr-x. 2 root root         6 Mar  5  2024 Public
drwxr-xr-x. 2 root root         6 Mar  5  2024 Pictures
drwxr-xr-x. 2 root root         6 Mar  5  2024 Music
drwxr-xr-x. 2 root root         6 Mar  5  2024 Downloads
drwxr-xr-x. 2 root root         6 Mar  5  2024 Documents
drwxr-xr-x. 2 root root         6 Mar  5  2024 Desktop
-rw-r--r--. 1 root root 103820392 Nov  5 23:48 minikube-linux-amd64
-rw-r--r--. 1 root root        43 Nov  5 23:54 values-postgres.yaml
-rw-r--r--. 1 root root       278 Nov  6 00:06 create_database.sql
-rw-r--r--. 1 root root      1889 Nov  6 00:18 data_insert_2.py
-rw-r--r--. 1 root root       525 Nov  6 00:29 data_insert.py
-rw-r--r--. 1 root root      1706 Nov  6 00:33 fake_insert.py
-rw-r--r--. 1 root root      1162 Nov  6 01:26 postgresql-deployment.yaml
-rw-r--r--. 1 root root       470 Nov  6 01:36 postgresql.conf
-rw-r--r--. 1 root root       144 Nov  6 01:37 pg_hba.conf
-rw-r--r--. 1 root root       794 Nov  6 01:38 postgresql-config.yaml
-rw-r--r--. 1 root root         0 Nov  6 01:41 my-postgresql-cluster-deployment.yaml
-rw-r--r--. 1 root root      6005 Nov  6 01:44 my-postgresql-cluster-statefulset.yaml
[root@lab01 ~]# mkdir -p data
[root@lab01 ~]# cd data/
[root@lab01 data]# ls -lrt
total 0
[root@lab01 data]# pwd
/root/data
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]# echo "---
apiVersion: v1
kind: PersistentVolume
metadata:
  name: postgresql-pv
  labels:
    type: local
spec:
  storageClassName: manual
  capacity:
    storage: 10Gi
  accessModes:
    - ReadWriteOnce
  hostPath:
    path: "/mnt/data"
" > pv.yaml
[root@lab01 data]# echo "---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: postgresql-pv-claim
spec:
  storageClassName: manual
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi
" > pvc.yaml
[root@lab01 data]# kubectl apply -f pv
pvc.yaml  pv.yaml
[root@lab01 data]# kubectl apply -f pv.yaml
persistentvolume/postgresql-pv created
[root@lab01 data]# kubectl apply -f pvc.yaml
persistentvolumeclaim/postgresql-pv-claim created
[root@lab01 data]# kubectl get pv
NAME            CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM                         STORAGECLASS   VOLUMEATTRIBUTESCLASS   REASON   AGE
postgresql-pv   10Gi       RWO            Retain           Bound    default/postgresql-pv-claim   manual         <unset>                          52s
[root@lab01 data]# kubectl get pvc
NAME                  STATUS   VOLUME          CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE
postgresql-pv-claim   Bound    postgresql-pv   10Gi       RWO            manual         <unset>                 56s
[root@lab01 data]# cd ../
[root@lab01 ~]# ls -lrt
total 101436
-rw-------. 1 root root      1220 Mar  5  2024 anaconda-ks.cfg
drwxr-xr-x. 2 root root         6 Mar  5  2024 Videos
drwxr-xr-x. 2 root root         6 Mar  5  2024 Templates
drwxr-xr-x. 2 root root         6 Mar  5  2024 Public
drwxr-xr-x. 2 root root         6 Mar  5  2024 Pictures
drwxr-xr-x. 2 root root         6 Mar  5  2024 Music
drwxr-xr-x. 2 root root         6 Mar  5  2024 Downloads
drwxr-xr-x. 2 root root         6 Mar  5  2024 Documents
drwxr-xr-x. 2 root root         6 Mar  5  2024 Desktop
-rw-r--r--. 1 root root 103820392 Nov  5 23:48 minikube-linux-amd64
-rw-r--r--. 1 root root        43 Nov  5 23:54 values-postgres.yaml
-rw-r--r--. 1 root root       278 Nov  6 00:06 create_database.sql
-rw-r--r--. 1 root root      1889 Nov  6 00:18 data_insert_2.py
-rw-r--r--. 1 root root       525 Nov  6 00:29 data_insert.py
-rw-r--r--. 1 root root      1706 Nov  6 00:33 fake_insert.py
-rw-r--r--. 1 root root      1162 Nov  6 01:26 postgresql-deployment.yaml
-rw-r--r--. 1 root root       470 Nov  6 01:36 postgresql.conf
-rw-r--r--. 1 root root       144 Nov  6 01:37 pg_hba.conf
-rw-r--r--. 1 root root       794 Nov  6 01:38 postgresql-config.yaml
-rw-r--r--. 1 root root         0 Nov  6 01:41 my-postgresql-cluster-deployment.yaml
-rw-r--r--. 1 root root      6005 Nov  6 01:44 my-postgresql-cluster-statefulset.yaml
drwxr-xr-x. 2 root root        37 Nov  6 22:12 data
[root@lab01 ~]# cp values-postgres.yaml data
[root@lab01 ~]# cd data/
[root@lab01 data]# sl -rlt
bash: sl: command not found...
Similar command is: 'ls'
[root@lab01 data]# ls -rlt
total 12
-rw-r--r--. 1 root root 231 Nov  6 22:12 pv.yaml
-rw-r--r--. 1 root root 201 Nov  6 22:12 pvc.yaml
-rw-r--r--. 1 root root  43 Nov  6 22:14 values-postgres.yaml
[root@lab01 data]# cat values-postgres.yaml
primary:
  service:
    type: LoadBalancer
[root@lab01 data]# helm install my-postgresql-cluster bitnami/postgresql --set primary.persistence.enabled=true --set primary.persistence.existingClaim=postgresql-pv-claim --set primary.persistence.storageClass=manual --set volumePermissions.enabled=true -f values-postgres.yaml

NAME: my-postgresql-cluster
LAST DEPLOYED: Wed Nov  6 22:14:58 2024
NAMESPACE: default
STATUS: deployed
REVISION: 1
TEST SUITE: None
NOTES:
CHART NAME: postgresql
CHART VERSION: 16.1.1
APP VERSION: 17.0.0

** Please be patient while the chart is being deployed **

PostgreSQL can be accessed via port 5432 on the following DNS names from within your cluster:

    my-postgresql-cluster.default.svc.cluster.local - Read/Write connection

To get the password for "postgres" run:

    export POSTGRES_PASSWORD=$(kubectl get secret --namespace default my-postgresql-cluster -o jsonpath="{.data.postgres-password}" | base64 -d)

To connect to your database run the following command:

    kubectl run my-postgresql-cluster-client --rm --tty -i --restart='Never' --namespace default --image docker.io/bitnami/postgresql:17.0.0-debian-12-r9 --env="PGPASSWORD=$POSTGRES_PASSWORD" \
      --command -- psql --host my-postgresql-cluster -U postgres -d postgres -p 5432

    > NOTE: If you access the container using bash, make sure that you execute "/opt/bitnami/scripts/postgresql/entrypoint.sh /bin/bash" in order to avoid the error "psql: local user with ID 1001} does not exist"

To connect to your database from outside the cluster execute the following commands:

  NOTE: It may take a few minutes for the LoadBalancer IP to be available.
        Watch the status with: 'kubectl get svc --namespace default -w my-postgresql-cluster'

    export SERVICE_IP=$(kubectl get svc --namespace default my-postgresql-cluster --template "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}")
    PGPASSWORD="$POSTGRES_PASSWORD" psql --host $SERVICE_IP --port 5432 -U postgres -d postgres

WARNING: The configured password will be ignored on new installation in case when previous PostgreSQL release was deleted through the helm command. In that case, old PVC will have an old password, and setting it through helm won't take effect. Deleting persistent volumes (PVs) will solve the issue.

WARNING: There are "resources" sections in the chart not set. Using "resourcesPreset" is not recommended for production. For production installations, please set the following values according to your workload needs:
  - primary.resources
  - readReplicas.resources
  - volumePermissions.resources
+info https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]# kubectl get nodes
NAME       STATUS   ROLES           AGE   VERSION
minikube   Ready    control-plane   22h   v1.31.0
[root@lab01 data]# kubectl get pods
NAME                      READY   STATUS    RESTARTS   AGE
my-postgresql-cluster-0   0/1     Running   0          30s
[root@lab01 data]#
[root@lab01 data]# kubectl get pods
NAME                      READY   STATUS    RESTARTS   AGE
my-postgresql-cluster-0   1/1     Running   0          50s
[root@lab01 data]# kubectl get pv
NAME            CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM                         STORAGECLASS   VOLUMEATTRIBUTESCLASS   REASON   AGE
postgresql-pv   10Gi       RWO            Retain           Bound    default/postgresql-pv-claim   manual         <unset>                          2m57s
[root@lab01 data]# kubectl get pvc
NAME                  STATUS   VOLUME          CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE
postgresql-pv-claim   Bound    postgresql-pv   10Gi       RWO            manual         <unset>                 2m57s
[root@lab01 data]# kubectl describe pod my-postgresql-cluster-0
Name:             my-postgresql-cluster-0
Namespace:        default
Priority:         0
Service Account:  my-postgresql-cluster
Node:             minikube/192.168.49.2
Start Time:       Wed, 06 Nov 2024 22:14:58 +0530
Labels:           app.kubernetes.io/component=primary
                  app.kubernetes.io/instance=my-postgresql-cluster
                  app.kubernetes.io/managed-by=Helm
                  app.kubernetes.io/name=postgresql
                  app.kubernetes.io/version=17.0.0
                  apps.kubernetes.io/pod-index=0
                  controller-revision-hash=my-postgresql-cluster-6db5f6d469
                  helm.sh/chart=postgresql-16.1.1
                  statefulset.kubernetes.io/pod-name=my-postgresql-cluster-0
Annotations:      <none>
Status:           Running
IP:               10.244.0.19
IPs:
  IP:           10.244.0.19
Controlled By:  StatefulSet/my-postgresql-cluster
Init Containers:
  init-chmod-data:
    Container ID:    docker://cf9495dd4abc6b0e00507b650320a35fc967abf1e275dd20019eeb7759ab2781
    Image:           docker.io/bitnami/os-shell:12-debian-12-r31
    Image ID:        docker-pullable://bitnami/os-shell@sha256:86511f27f2b793d19a9e3f44cc221b7964db9e17de9c255d97ae266a958b2eb7
    Port:            <none>
    Host Port:       <none>
    SeccompProfile:  RuntimeDefault
    Command:
      /bin/sh
      -ec
      chown 1001:1001 /bitnami/postgresql
      mkdir -p /bitnami/postgresql/data
      chmod 700 /bitnami/postgresql/data
      find /bitnami/postgresql -mindepth 1 -maxdepth 1 -not -name "conf" -not -name ".snapshot" -not -name "lost+found" | \
        xargs -r chown -R 1001:1001
      chmod -R 777 /dev/shm

    State:          Terminated
      Reason:       Completed
      Exit Code:    0
      Started:      Wed, 06 Nov 2024 22:15:19 +0530
      Finished:     Wed, 06 Nov 2024 22:15:19 +0530
    Ready:          True
    Restart Count:  0
    Limits:
      cpu:                150m
      ephemeral-storage:  2Gi
      memory:             192Mi
    Requests:
      cpu:                100m
      ephemeral-storage:  50Mi
      memory:             128Mi
    Environment:          <none>
    Mounts:
      /bitnami/postgresql from data (rw)
      /dev/shm from dshm (rw)
      /tmp from empty-dir (rw,path="tmp-dir")
Containers:
  postgresql:
    Container ID:    docker://b8553844e1a16cfcf39b74c7cf23c8c39aa670f4a14962587ec30d8a8715468d
    Image:           docker.io/bitnami/postgresql:17.0.0-debian-12-r9
    Image ID:        docker-pullable://bitnami/postgresql@sha256:d885ac2771636b2bdf0ee8595f8e1d2f9b5290505cabebb25c55c63f51e67841
    Port:            5432/TCP
    Host Port:       0/TCP
    SeccompProfile:  RuntimeDefault
    State:           Running
      Started:       Wed, 06 Nov 2024 22:15:20 +0530
    Ready:           True
    Restart Count:   0
    Limits:
      cpu:                150m
      ephemeral-storage:  2Gi
      memory:             192Mi
    Requests:
      cpu:                100m
      ephemeral-storage:  50Mi
      memory:             128Mi
    Liveness:             exec [/bin/sh -c exec pg_isready -U "postgres" -h 127.0.0.1 -p 5432] delay=30s timeout=5s period=10s #success=1 #failure=6
    Readiness:            exec [/bin/sh -c -e exec pg_isready -U "postgres" -h 127.0.0.1 -p 5432
[ -f /opt/bitnami/postgresql/tmp/.initialized ] || [ -f /bitnami/postgresql/.initialized ]
] delay=5s timeout=5s period=10s #success=1 #failure=6
    Environment:
      BITNAMI_DEBUG:                        false
      POSTGRESQL_PORT_NUMBER:               5432
      POSTGRESQL_VOLUME_DIR:                /bitnami/postgresql
      PGDATA:                               /bitnami/postgresql/data
      POSTGRES_PASSWORD:                    <set to the key 'postgres-password' in secret 'my-postgresql-cluster'>  Optional: false
      POSTGRESQL_ENABLE_LDAP:               no
      POSTGRESQL_ENABLE_TLS:                no
      POSTGRESQL_LOG_HOSTNAME:              false
      POSTGRESQL_LOG_CONNECTIONS:           false
      POSTGRESQL_LOG_DISCONNECTIONS:        false
      POSTGRESQL_PGAUDIT_LOG_CATALOG:       off
      POSTGRESQL_CLIENT_MIN_MESSAGES:       error
      POSTGRESQL_SHARED_PRELOAD_LIBRARIES:  pgaudit
    Mounts:
      /bitnami/postgresql from data (rw)
      /dev/shm from dshm (rw)
      /opt/bitnami/postgresql/conf from empty-dir (rw,path="app-conf-dir")
      /opt/bitnami/postgresql/tmp from empty-dir (rw,path="app-tmp-dir")
      /tmp from empty-dir (rw,path="tmp-dir")
Conditions:
  Type                        Status
  PodReadyToStartContainers   True
  Initialized                 True
  Ready                       True
  ContainersReady             True
  PodScheduled                True
Volumes:
  empty-dir:
    Type:       EmptyDir (a temporary directory that shares a pod's lifetime)
    Medium:
    SizeLimit:  <unset>
  dshm:
    Type:       EmptyDir (a temporary directory that shares a pod's lifetime)
    Medium:     Memory
    SizeLimit:  <unset>
  data:
    Type:        PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)
    ClaimName:   postgresql-pv-claim
    ReadOnly:    false
QoS Class:       Burstable
Node-Selectors:  <none>
Tolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type    Reason     Age   From               Message
  ----    ------     ----  ----               -------
  Normal  Scheduled  81s   default-scheduler  Successfully assigned default/my-postgresql-cluster-0 to minikube
  Normal  Pulling    80s   kubelet            Pulling image "docker.io/bitnami/os-shell:12-debian-12-r31"
  Normal  Pulled     61s   kubelet            Successfully pulled image "docker.io/bitnami/os-shell:12-debian-12-r31" in 19.453s (19.453s including waiting). Image size: 155931459 bytes.
  Normal  Created    60s   kubelet            Created container init-chmod-data
  Normal  Started    60s   kubelet            Started container init-chmod-data
  Normal  Pulled     60s   kubelet            Container image "docker.io/bitnami/postgresql:17.0.0-debian-12-r9" already present on machine
  Normal  Created    59s   kubelet            Created container postgresql
  Normal  Started    59s   kubelet            Started container postgresql
[root@lab01 data]# export POSTGRES_PASSWORD=$(kubectl get secret --namespace default my-postgresql-cluster -o jsonpath="{.data.postgres-password}" | base64 -d)
[root@lab01 data]# echo $POSTGRES_PASSWORD
Ub50wAoXwe
[root@lab01 data]#  kubectl run my-postgresql-cluster-client --rm --tty -i --restart='Never' --namespace default --image docker.io/bitnami/postgresql:17.0.0-debian-12-r9 --env="PGPASSWORD=$POSTGRES_PASSWORD" \
      --command -- psql --host my-postgresql-cluster -U postgres -d postgres -p 5432

If you don't see a command prompt, try pressing enter.

postgres=#
postgres=# \q
could not save history to file "//.psql_history": Permission denied

E1106 22:17:01.220725  358049 v2.go:104] "Unhandled Error" err="write on closed stream 0"

pod "my-postgresql-cluster-client" deleted
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]# kubectl exec -it  my-postgresql-cluster-0 -- /bin/bash
Defaulted container "postgresql" out of: postgresql, init-chmod-data (init)
I have no name!@my-postgresql-cluster-0:/$
I have no name!@my-postgresql-cluster-0:/$
I have no name!@my-postgresql-cluster-0:/$
I have no name!@my-postgresql-cluster-0:/$ df -h
Filesystem           Size  Used Avail Use% Mounted on
overlay               42G   10G   32G  24% /
tmpfs                 64M     0   64M   0% /dev
/dev/mapper/cs-root   42G   10G   32G  24% /tmp
overlay               42G   10G   32G  24% /bitnami/postgresql
tmpfs                192M  1.1M  191M   1% /dev/shm
tmpfs                1.8G     0  1.8G   0% /proc/asound
tmpfs                1.8G     0  1.8G   0% /proc/acpi
tmpfs                1.8G     0  1.8G   0% /proc/scsi
tmpfs                1.8G     0  1.8G   0% /sys/firmware
I have no name!@my-postgresql-cluster-0:/$ ps -ef | grep postgres
1001           1       0  0 16:45 ?        00:00:00 /opt/bitnami/postgresql/bin/postgres -D /bitnami/postgresql/data --config-file=/opt/bitnami/postgresql/conf/postgresql.conf --external_pid_file=/opt/bitnami/postgresql/tmp/postgresql.pid --hba_file=/opt/bitnami/postgresql/conf/pg_hba.conf
1001         137       1  0 16:45 ?        00:00:00 postgres: checkpointer
1001         138       1  0 16:45 ?        00:00:00 postgres: background writer
1001         140       1  0 16:45 ?        00:00:00 postgres: walwriter
1001         141       1  0 16:45 ?        00:00:00 postgres: autovacuum launcher
1001         142       1  0 16:45 ?        00:00:00 postgres: logical replication launcher
1001         310     302  0 16:47 pts/0    00:00:00 grep postgres
I have no name!@my-postgresql-cluster-0:/$ cd /mnt/
I have no name!@my-postgresql-cluster-0:/mnt$ ls -rlt
total 0
I have no name!@my-postgresql-cluster-0:/mnt$ cd
I have no name!@my-postgresql-cluster-0:/$ ls -lrt
total 0
drwxr-xr-x.   2 root root   6 Jun 15 11:22 srv
lrwxrwxrwx.   1 root root   8 Jun 15 11:22 sbin -> usr/sbin
drwxr-xr-x.   4 root root  31 Jun 15 11:22 run
drwx------.   2 root root  37 Jun 15 11:22 root
drwxr-xr-x.   2 root root   6 Jun 15 11:22 mnt
drwxr-xr-x.   2 root root   6 Jun 15 11:22 media
lrwxrwxrwx.   1 root root   9 Jun 15 11:22 lib64 -> usr/lib64
lrwxrwxrwx.   1 root root   7 Jun 15 11:22 lib -> usr/lib
drwxr-xr-x.   2 root root   6 Jun 15 11:22 home
drwxr-xr-x.   2 root root   6 Jun 15 11:22 boot
lrwxrwxrwx.   1 root root   7 Jun 15 11:22 bin -> usr/bin
drwxr-xr-x.  11 root root 139 Oct 24 07:58 var
drwxr-xr-x.   3 root root  21 Oct 24 07:58 opt
drwxrwxr-x.   2 root root   6 Oct 24 07:58 docker-entrypoint-initdb.d
drwxr-xr-x.   3 root root  24 Oct 24 07:58 bitnami
drwxr-xr-x.  12 root root 133 Oct 24 07:58 usr
dr-xr-xr-x.  13 root root   0 Nov  5 18:10 sys
drwxr-xr-x.   1 root root  66 Nov  6 16:45 etc
drwxr-xr-x.   2 root root   6 Nov  6 16:45 docker-entrypoint-preinitdb.d
dr-xr-xr-x. 358 root root   0 Nov  6 16:45 proc
drwxr-xr-x.   5 root root 360 Nov  6 16:45 dev
drwxrwsrwx.   2 root 1001  97 Nov  6 16:45 tmp
I have no name!@my-postgresql-cluster-0:/$ df -h
Filesystem           Size  Used Avail Use% Mounted on
overlay               42G   10G   32G  24% /
tmpfs                 64M     0   64M   0% /dev
/dev/mapper/cs-root   42G   10G   32G  24% /tmp
overlay               42G   10G   32G  24% /bitnami/postgresql
tmpfs                192M  1.1M  191M   1% /dev/shm
tmpfs                1.8G     0  1.8G   0% /proc/asound
tmpfs                1.8G     0  1.8G   0% /proc/acpi
tmpfs                1.8G     0  1.8G   0% /proc/scsi
tmpfs                1.8G     0  1.8G   0% /sys/firmware
I have no name!@my-postgresql-cluster-0:/$ cd /bitnami/postgresql
I have no name!@my-postgresql-cluster-0:/bitnami/postgresql$ ls -lrt
total 4
drwx------. 19 1001 1001 4096 Nov  6 16:45 data
I have no name!@my-postgresql-cluster-0:/bitnami/postgresql$ cd data/
I have no name!@my-postgresql-cluster-0:/bitnami/postgresql/data$ ls -lrt
total 24
drwx------. 2 1001 1001    6 Nov  6 16:45 pg_twophase
drwx------. 2 1001 1001    6 Nov  6 16:45 pg_tblspc
drwx------. 2 1001 1001    6 Nov  6 16:45 pg_stat_tmp
drwx------. 2 1001 1001    6 Nov  6 16:45 pg_snapshots
drwx------. 2 1001 1001    6 Nov  6 16:45 pg_serial
drwx------. 2 1001 1001    6 Nov  6 16:45 pg_replslot
drwx------. 2 1001 1001    6 Nov  6 16:45 pg_notify
drwx------. 4 1001 1001   36 Nov  6 16:45 pg_multixact
drwx------. 2 1001 1001    6 Nov  6 16:45 pg_dynshmem
drwx------. 2 1001 1001    6 Nov  6 16:45 pg_commit_ts
-rw-------. 1 1001 1001    3 Nov  6 16:45 PG_VERSION
-rw-------. 1 1001 1001   88 Nov  6 16:45 postgresql.auto.conf
-rw-------. 1 1001 1001 2640 Nov  6 16:45 pg_ident.conf
drwx------. 4 1001 1001   77 Nov  6 16:45 pg_wal
drwx------. 2 1001 1001   18 Nov  6 16:45 pg_xact
drwx------. 2 1001 1001   18 Nov  6 16:45 pg_subtrans
drwx------. 5 1001 1001   33 Nov  6 16:45 base
drwx------. 4 1001 1001   68 Nov  6 16:45 pg_logical
-rw-------. 1 1001 1001  249 Nov  6 16:45 postmaster.opts
drwx------. 2 1001 1001    6 Nov  6 16:45 pg_stat
-rw-------. 1 1001 1001   79 Nov  6 16:45 postmaster.pid
drwx------. 2 1001 1001 4096 Nov  6 16:46 global
I have no name!@my-postgresql-cluster-0:/bitnami/postgresql/data$ pwd
/bitnami/postgresql/data
I have no name!@my-postgresql-cluster-0:/bitnami/postgresql/data$ exit
exit
[root@lab01 data]# ls -lrt
total 12
-rw-r--r--. 1 root root 231 Nov  6 22:12 pv.yaml
-rw-r--r--. 1 root root 201 Nov  6 22:12 pvc.yaml
-rw-r--r--. 1 root root  43 Nov  6 22:14 values-postgres.yaml
[root@lab01 data]# cat pv.yaml
---
apiVersion: v1
kind: PersistentVolume
metadata:
  name: postgresql-pv
  labels:
    type: local
spec:
  storageClassName: manual
  capacity:
    storage: 10Gi
  accessModes:
    - ReadWriteOnce
  hostPath:
    path: /mnt/data

[root@lab01 data]# cat values-postgres.yaml
primary:
  service:
    type: LoadBalancer
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]# helm delete my-postgresql-cluster-0
Error: uninstall: Release not loaded: my-postgresql-cluster-0: release: not found
[root@lab01 data]# helm delete my-postgresql-cluster
release "my-postgresql-cluster" uninstalled
[root@lab01 data]# kubectl delete pvc data-postgresql-db
Error from server (NotFound): persistentvolumeclaims "data-postgresql-db" not found
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]# kubectl delete statefulset --all
No resources found
[root@lab01 data]# kubectl delete pvc --all
kubectl delete pv --all
persistentvolumeclaim "postgresql-pv-claim" deleted
persistentvolume "postgresql-pv" deleted
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]# ls -lrt
total 12
-rw-r--r--. 1 root root 231 Nov  6 22:12 pv.yaml
-rw-r--r--. 1 root root 201 Nov  6 22:12 pvc.yaml
-rw-r--r--. 1 root root  43 Nov  6 22:14 values-postgres.yaml
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]# vi mypv.yml
[root@lab01 data]# vi mypvc.yml
[root@lab01 data]# mv mypv.yml mypv.yaml
[root@lab01 data]# mv mypvc.yml mypvc.yaml
[root@lab01 data]# vi myvalues.yaml
[root@lab01 data]# kubectl apply -f mypv.yaml
persistentvolume/postgresql-pv created
[root@lab01 data]# kubectl apply -f mypv.yaml
persistentvolume/postgresql-pv unchanged
(failed reverse-i-search)`get m': export POSTGRES_PASSWORD=$(kubectl ^Ct secret --namespace default my-postgresql-cluster -o jsonpath="{.data.postgres-password}" | base64 -d)
(failed reverse-i-search)`gt': kubectl delete pvc data-post^Cesql-db
[root@lab01 data]# kubectl get pvc
No resources found in default namespace.
[root@lab01 data]# kubectl get pv
NAME            CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS      CLAIM   STORAGECLASS   VOLUMEATTRIBUTESCLASS   REASON   AGE
postgresql-pv   10Gi       RWO            Retain           Available                          <unset>                          14s
[root@lab01 data]#
[root@lab01 data]# kubectl get pvc
No resources found in default namespace.
[root@lab01 data]#
[root@lab01 data]# kubectl apply -f mypvc.yaml
persistentvolumeclaim/postgresql-pvc created
[root@lab01 data]# kubectl get pvc
NAME             STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE
postgresql-pvc   Bound    pvc-8708be0a-0bbc-4a4a-b4ab-b3d312aff3eb   10Gi       RWO            standard       <unset>                 2s
[root@lab01 data]# kubectl delete pvc --all
kubectl delete pv --all
persistentvolumeclaim "postgresql-pvc" deleted
persistentvolume "postgresql-pv" deleted
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]# ls -lrt
total 24
-rw-r--r--. 1 root root 231 Nov  6 22:12 pv.yaml
-rw-r--r--. 1 root root 201 Nov  6 22:12 pvc.yaml
-rw-r--r--. 1 root root  43 Nov  6 22:14 values-postgres.yaml
-rw-r--r--. 1 root root 173 Nov  6 22:27 mypv.yaml
-rw-r--r--. 1 root root 164 Nov  6 22:27 mypvc.yaml
-rw-r--r--. 1 root root 446 Nov  6 22:28 myvalues.yaml
[root@lab01 data]#
[root@lab01 data]# cat mypv.yaml
apiVersion: v1
kind: PersistentVolume
metadata:
  name: postgresql-pv
spec:
  capacity:
    storage: 10Gi
  accessModes:
    - ReadWriteOnce
  hostPath:
    path: /mnt/data
[root@lab01 data]# cat mypvc.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: postgresql-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi
[root@lab01 data]# kubectl apply -f mypv.yaml
persistentvolume/postgresql-pv created
[root@lab01 data]# kubectl apply -f mypvc.yaml
persistentvolumeclaim/postgresql-pvc created
[root@lab01 data]# kubectl get pvc
NAME             STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE
postgresql-pvc   Bound    pvc-fc3571d2-47aa-4de7-928e-8ecda6811914   10Gi       RWO            standard       <unset>                 5s
[root@lab01 data]# kubectl get pv
NAME                                       CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS      CLAIM                    STORAGECLASS   VOLUMEATTRIBUTESCLASS   REASON   AGE
postgresql-pv                              10Gi       RWO            Retain           Available                                           <unset>                          9s
pvc-fc3571d2-47aa-4de7-928e-8ecda6811914   10Gi       RWO            Delete           Bound       default/postgresql-pvc   standard       <unset>                          6s
[root@lab01 data]# kubectl delete pv --all
persistentvolume "postgresql-pv" deleted
persistentvolume "pvc-fc3571d2-47aa-4de7-928e-8ecda6811914" deleted

^C[root@lab01 data]# kubectl delete pvc --all
persistentvolumeclaim "postgresql-pvc" deleted
[root@lab01 data]# kubectl delete pv --all
No resources found
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]# ls -lrt
total 24
-rw-r--r--. 1 root root 231 Nov  6 22:12 pv.yaml
-rw-r--r--. 1 root root 201 Nov  6 22:12 pvc.yaml
-rw-r--r--. 1 root root  43 Nov  6 22:14 values-postgres.yaml
-rw-r--r--. 1 root root 173 Nov  6 22:27 mypv.yaml
-rw-r--r--. 1 root root 164 Nov  6 22:27 mypvc.yaml
-rw-r--r--. 1 root root 446 Nov  6 22:28 myvalues.yaml
[root@lab01 data]# cat mypv.yaml
apiVersion: v1
kind: PersistentVolume
metadata:
  name: postgresql-pv
spec:
  capacity:
    storage: 10Gi
  accessModes:
    - ReadWriteOnce
  hostPath:
    path: /mnt/data
[root@lab01 data]# cat pv.yaml
---
apiVersion: v1
kind: PersistentVolume
metadata:
  name: postgresql-pv
  labels:
    type: local
spec:
  storageClassName: manual
  capacity:
    storage: 10Gi
  accessModes:
    - ReadWriteOnce
  hostPath:
    path: /mnt/data

[root@lab01 data]# cat pvc.yaml
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: postgresql-pv-claim
spec:
  storageClassName: manual
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi

[root@lab01 data]# cat mypvc.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: postgresql-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]# kubectl apply -f pv.yaml
persistentvolume/postgresql-pv created
[root@lab01 data]# kubectl apply -f pvc.yaml
persistentvolumeclaim/postgresql-pv-claim created
[root@lab01 data]# kubectl get pv
NAME            CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM                         STORAGECLASS   VOLUMEATTRIBUTESCLASS   REASON   AGE
postgresql-pv   10Gi       RWO            Retain           Bound    default/postgresql-pv-claim   manual         <unset>                          10s
[root@lab01 data]# kubectl get pc
NAME                      VALUE        GLOBAL-DEFAULT   AGE
system-cluster-critical   2000000000   false            22h
system-node-critical      2000001000   false            22h
[root@lab01 data]# kubectl get pvc
NAME                  STATUS   VOLUME          CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE
postgresql-pv-claim   Bound    postgresql-pv   10Gi       RWO            manual         <unset>                 13s
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]# ls -lrt
total 24
-rw-r--r--. 1 root root 231 Nov  6 22:12 pv.yaml
-rw-r--r--. 1 root root 201 Nov  6 22:12 pvc.yaml
-rw-r--r--. 1 root root  43 Nov  6 22:14 values-postgres.yaml
-rw-r--r--. 1 root root 173 Nov  6 22:27 mypv.yaml
-rw-r--r--. 1 root root 164 Nov  6 22:27 mypvc.yaml
-rw-r--r--. 1 root root 446 Nov  6 22:28 myvalues.yaml
[root@lab01 data]# cat myvalues.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: postgresql-deployment
spec:
  template:
    spec:
      containers:
        volumeMounts:
        - name: postgresql-storage
          mountPath: /bitnami/postgresql
        env:
        - name: POSTGRESQL_CONF_FILE
          value: "/bitnami/postgresql/conf/postgresql.conf"
      volumes:
      - name: postgresql-storage
        persistentVolumeClaim:
          claimName: postgresql-pvc
[root@lab01 data]# cat mypvc.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: postgresql-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi
[root@lab01 data]# helm install my-postgresql-cluster bitnami/postgresql --set primary.persistence.enabled=true --set primary.persistence.existingClaim=postgresql-pv-claim --set primary.persistence.storageClass=manual --set volumePermissions.enabled=true -f  myvalues.yaml


NAME: my-postgresql-cluster
LAST DEPLOYED: Wed Nov  6 22:32:14 2024
NAMESPACE: default
STATUS: deployed
REVISION: 1
TEST SUITE: None
NOTES:
CHART NAME: postgresql
CHART VERSION: 16.1.1
APP VERSION: 17.0.0

** Please be patient while the chart is being deployed **

PostgreSQL can be accessed via port 5432 on the following DNS names from within your cluster:

    my-postgresql-cluster.default.svc.cluster.local - Read/Write connection

To get the password for "postgres" run:

    export POSTGRES_PASSWORD=$(kubectl get secret --namespace default my-postgresql-cluster -o jsonpath="{.data.postgres-password}" | base64 -d)

To connect to your database run the following command:

    kubectl run my-postgresql-cluster-client --rm --tty -i --restart='Never' --namespace default --image docker.io/bitnami/postgresql:17.0.0-debian-12-r9 --env="PGPASSWORD=$POSTGRES_PASSWORD" \
      --command -- psql --host my-postgresql-cluster -U postgres -d postgres -p 5432

    > NOTE: If you access the container using bash, make sure that you execute "/opt/bitnami/scripts/postgresql/entrypoint.sh /bin/bash" in order to avoid the error "psql: local user with ID 1001} does not exist"

To connect to your database from outside the cluster execute the following commands:

    kubectl port-forward --namespace default svc/my-postgresql-cluster 5432:5432 &
    PGPASSWORD="$POSTGRES_PASSWORD" psql --host 127.0.0.1 -U postgres -d postgres -p 5432

WARNING: The configured password will be ignored on new installation in case when previous PostgreSQL release was deleted through the helm command. In that case, old PVC will have an old password, and setting it through helm won't take effect. Deleting persistent volumes (PVs) will solve the issue.

WARNING: There are "resources" sections in the chart not set. Using "resourcesPreset" is not recommended for production. For production installations, please set the following values according to your workload needs:
  - primary.resources
  - readReplicas.resources
  - volumePermissions.resources
+info https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]# kubectl get pods
NAME                      READY   STATUS    RESTARTS   AGE
my-postgresql-cluster-0   1/1     Running   0          57s
[root@lab01 data]# kubectl get pvc
NAME                  STATUS   VOLUME          CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE
postgresql-pv-claim   Bound    postgresql-pv   10Gi       RWO            manual         <unset>                 2m25s
[root@lab01 data]# kubectl exec -it  my-postgresql-cluster-0 -- /bin/bash                                                              Defaulted container "postgresql" out of: postgresql, init-chmod-data (init)
I have no name!@my-postgresql-cluster-0:/$
I have no name!@my-postgresql-cluster-0:/$
I have no name!@my-postgresql-cluster-0:/$ df -h
Filesystem           Size  Used Avail Use% Mounted on
overlay               42G   10G   32G  24% /
tmpfs                 64M     0   64M   0% /dev
/dev/mapper/cs-root   42G   10G   32G  24% /tmp
tmpfs                192M  1.1M  191M   1% /dev/shm
overlay               42G   10G   32G  24% /bitnami/postgresql
tmpfs                1.8G     0  1.8G   0% /proc/asound
tmpfs                1.8G     0  1.8G   0% /proc/acpi
tmpfs                1.8G     0  1.8G   0% /proc/scsi
tmpfs                1.8G     0  1.8G   0% /sys/firmware
I have no name!@my-postgresql-cluster-0:/$ cd /bitnami/postgresql
I have no name!@my-postgresql-cluster-0:/bitnami/postgresql$ s -lt
bash: s: command not found
I have no name!@my-postgresql-cluster-0:/bitnami/postgresql$ ls -rlt
total 4
drwx------. 19 1001 1001 4096 Nov  6 17:02 data
I have no name!@my-postgresql-cluster-0:/bitnami/postgresql$ cd data/
I have no name!@my-postgresql-cluster-0:/bitnami/postgresql/data$ ls -rlt
total 24
drwx------. 2 1001 1001    6 Nov  6 16:45 pg_twophase
drwx------. 2 1001 1001    6 Nov  6 16:45 pg_tblspc
drwx------. 2 1001 1001    6 Nov  6 16:45 pg_stat_tmp
drwx------. 2 1001 1001    6 Nov  6 16:45 pg_snapshots
drwx------. 2 1001 1001    6 Nov  6 16:45 pg_serial
drwx------. 2 1001 1001    6 Nov  6 16:45 pg_replslot
drwx------. 2 1001 1001    6 Nov  6 16:45 pg_notify
drwx------. 4 1001 1001   36 Nov  6 16:45 pg_multixact
drwx------. 2 1001 1001    6 Nov  6 16:45 pg_dynshmem
drwx------. 2 1001 1001    6 Nov  6 16:45 pg_commit_ts
-rw-------. 1 1001 1001    3 Nov  6 16:45 PG_VERSION
-rw-------. 1 1001 1001   88 Nov  6 16:45 postgresql.auto.conf
-rw-------. 1 1001 1001 2640 Nov  6 16:45 pg_ident.conf
drwx------. 4 1001 1001   77 Nov  6 16:45 pg_wal
drwx------. 2 1001 1001   18 Nov  6 16:45 pg_xact
drwx------. 2 1001 1001   18 Nov  6 16:45 pg_subtrans
drwx------. 5 1001 1001   33 Nov  6 16:45 base
drwx------. 4 1001 1001   68 Nov  6 16:55 pg_logical
-rw-------. 1 1001 1001  249 Nov  6 17:02 postmaster.opts
drwx------. 2 1001 1001    6 Nov  6 17:02 pg_stat
-rw-------. 1 1001 1001   79 Nov  6 17:02 postmaster.pid
drwx------. 2 1001 1001 4096 Nov  6 17:03 global
I have no name!@my-postgresql-cluster-0:/bitnami/postgresql/data$ pwd
/bitnami/postgresql/data
I have no name!@my-postgresql-cluster-0:/bitnami/postgresql/data$ exit
exit
[root@lab01 data]# ls -lrt
total 24
-rw-r--r--. 1 root root 231 Nov  6 22:12 pv.yaml
-rw-r--r--. 1 root root 201 Nov  6 22:12 pvc.yaml
-rw-r--r--. 1 root root  43 Nov  6 22:14 values-postgres.yaml
-rw-r--r--. 1 root root 173 Nov  6 22:27 mypv.yaml
-rw-r--r--. 1 root root 164 Nov  6 22:27 mypvc.yaml
-rw-r--r--. 1 root root 446 Nov  6 22:28 myvalues.yaml
[root@lab01 data]# cat myvalues.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: postgresql-deployment
spec:
  template:
    spec:
      containers:
        volumeMounts:
        - name: postgresql-storage
          mountPath: /bitnami/postgresql
        env:
        - name: POSTGRESQL_CONF_FILE
          value: "/bitnami/postgresql/conf/postgresql.conf"
      volumes:
      - name: postgresql-storage
        persistentVolumeClaim:
          claimName: postgresql-pvc
[root@lab01 data]# kubectl exec -it  my-postgresql-cluster-0 -- /bin/bash
Defaulted container "postgresql" out of: postgresql, init-chmod-data (init)
I have no name!@my-postgresql-cluster-0:/$ cd /bitnami/postgresql
I have no name!@my-postgresql-cluster-0:/bitnami/postgresql$ ls -lrt
total 4
drwx------. 19 1001 1001 4096 Nov  6 17:02 data
I have no name!@my-postgresql-cluster-0:/bitnami/postgresql$ kubectl logs my-postgresql-cluster-0
bash: kubectl: command not found
I have no name!@my-postgresql-cluster-0:/bitnami/postgresql$ exit
exit
command terminated with exit code 127
[root@lab01 data]# kubectl logs my-postgresql-cluster-0
Defaulted container "postgresql" out of: postgresql, init-chmod-data (init)
postgresql 17:02:16.75 INFO  ==>
postgresql 17:02:16.75 INFO  ==> Welcome to the Bitnami postgresql container
postgresql 17:02:16.75 INFO  ==> Subscribe to project updates by watching https://github.com/bitnami/containers
postgresql 17:02:16.76 INFO  ==> Submit issues and feature requests at https://github.com/bitnami/containers/issues
postgresql 17:02:16.76 INFO  ==> Upgrade to Tanzu Application Catalog for production environments to access custom-configured and pre-packaged software components. Gain enhanced features, including Software Bill of Materials (SBOM), CVE scan result reports, and VEX documents. To learn more, visit https://bitnami.com/enterprise
postgresql 17:02:16.76 INFO  ==>
postgresql 17:02:16.96 INFO  ==> ** Starting PostgreSQL setup **
postgresql 17:02:17.25 INFO  ==> Validating settings in POSTGRESQL_* env vars..
postgresql 17:02:17.35 INFO  ==> Loading custom pre-init scripts...
postgresql 17:02:17.35 INFO  ==> Initializing PostgreSQL database...
postgresql 17:02:17.45 INFO  ==> pg_hba.conf file not detected. Generating it...
postgresql 17:02:17.46 INFO  ==> Generating local authentication configuration
postgresql 17:02:17.66 INFO  ==> Deploying PostgreSQL with persisted data...
postgresql 17:02:17.76 INFO  ==> Configuring replication parameters
postgresql 17:02:18.25 INFO  ==> Configuring fsync
postgresql 17:02:18.36 INFO  ==> Configuring synchronous_replication
postgresql 17:02:18.86 INFO  ==> Loading custom scripts...
postgresql 17:02:18.95 INFO  ==> Enabling remote connections
postgresql 17:02:18.96 INFO  ==> ** PostgreSQL setup finished! **

postgresql 17:02:19.16 INFO  ==> ** Starting PostgreSQL **
2024-11-06 17:02:19.360 GMT [1] LOG:  pgaudit extension initialized
2024-11-06 17:02:19.371 GMT [1] LOG:  starting PostgreSQL 17.0 on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
2024-11-06 17:02:19.454 GMT [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
2024-11-06 17:02:19.454 GMT [1] LOG:  listening on IPv6 address "::", port 5432
2024-11-06 17:02:19.457 GMT [1] LOG:  listening on Unix socket "/tmp/.s.PGSQL.5432"
2024-11-06 17:02:19.461 GMT [93] LOG:  database system was shut down at 2024-11-06 16:55:57 GMT
2024-11-06 17:02:19.465 GMT [1] LOG:  database system is ready to accept connections
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]# ls -lrt
total 24
-rw-r--r--. 1 root root 231 Nov  6 22:12 pv.yaml
-rw-r--r--. 1 root root 201 Nov  6 22:12 pvc.yaml
-rw-r--r--. 1 root root  43 Nov  6 22:14 values-postgres.yaml
-rw-r--r--. 1 root root 173 Nov  6 22:27 mypv.yaml
-rw-r--r--. 1 root root 164 Nov  6 22:27 mypvc.yaml
-rw-r--r--. 1 root root 446 Nov  6 22:28 myvalues.yaml
[root@lab01 data]# cat myvalues.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: postgresql-deployment
spec:
  template:
    spec:
      containers:
        volumeMounts:
        - name: postgresql-storage
          mountPath: /bitnami/postgresql
        env:
        - name: POSTGRESQL_CONF_FILE
          value: "/bitnami/postgresql/conf/postgresql.conf"
      volumes:
      - name: postgresql-storage
        persistentVolumeClaim:
          claimName: postgresql-pvc
[root@lab01 data]# vi postgresql-deployment.yaml
[root@lab01 data]# kubectl apply -f postgresql-deployment.yaml
The Deployment "postgresql-deployment" is invalid:
* spec.selector: Required value
* spec.template.metadata.labels: Invalid value: map[string]string(nil): `selector` does not match template `labels`
[root@lab01 data]# helm delete my-postgresql-cluster-0
Error: uninstall: Release not loaded: my-postgresql-cluster-0: release: not found
[root@lab01 data]# helm delete my-postgresql-cluster
release "my-postgresql-cluster" uninstalled
[root@lab01 data]# kubectl delete pvc --all
kubectl delete pv --all
persistentvolumeclaim "postgresql-pv-claim" deleted
persistentvolume "postgresql-pv" deleted
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]# vi postgresql-pv.yaml
[root@lab01 data]# vi postgresql-pvc.yaml
[root@lab01 data]# kubectl apply -f postgresql-pv.yaml
persistentvolume/postgresql-pv created
[root@lab01 data]# kubectl apply -f postgresql-pvc.yaml
persistentvolumeclaim/postgresql-pvc created
[root@lab01 data]# vi postgresql-deployment.yaml
[root@lab01 data]# >postgresql-deployment.yaml
[root@lab01 data]# vi postgresql-deployment.yaml
[root@lab01 data]# kubectl apply -f postgresql-deployment.yaml
deployment.apps/postgresql-deployment created
[root@lab01 data]# kubectl get deployments
NAME                    READY   UP-TO-DATE   AVAILABLE   AGE
postgresql-deployment   0/1     1            0           8s
[root@lab01 data]# kubectl get pods
NAME                                    READY   STATUS     RESTARTS   AGE
postgresql-deployment-c7c59fff6-l972h   0/1     Init:0/1   0          14s
[root@lab01 data]#
[root@lab01 data]# kubectl get pods
NAME                                    READY   STATUS     RESTARTS   AGE
postgresql-deployment-c7c59fff6-l972h   0/1     Init:0/1   0          19s
[root@lab01 data]# kubectl get pods
NAME                                    READY   STATUS     RESTARTS   AGE
postgresql-deployment-c7c59fff6-l972h   0/1     Init:0/1   0          20s
[root@lab01 data]# kubectl get pods
NAME                                    READY   STATUS     RESTARTS   AGE
postgresql-deployment-c7c59fff6-l972h   0/1     Init:0/1   0          21s
[root@lab01 data]# kubectl get pods
NAME                                    READY   STATUS       RESTARTS   AGE
postgresql-deployment-c7c59fff6-l972h   0/1     Init:Error   0          22s
[root@lab01 data]# kubectl get pods
NAME                                    READY   STATUS       RESTARTS     AGE
postgresql-deployment-c7c59fff6-l972h   0/1     Init:Error   1 (1s ago)   22s
[root@lab01 data]# kubectl get pods
NAME                                    READY   STATUS       RESTARTS     AGE
postgresql-deployment-c7c59fff6-l972h   0/1     Init:Error   1 (2s ago)   23s
[root@lab01 data]# kubectl get pods
NAME                                    READY   STATUS                  RESTARTS     AGE
postgresql-deployment-c7c59fff6-l972h   0/1     Init:CrashLoopBackOff   1 (2s ago)   23s
[root@lab01 data]# kubectl get pods
NAME                                    READY   STATUS                  RESTARTS     AGE
postgresql-deployment-c7c59fff6-l972h   0/1     Init:CrashLoopBackOff   1 (3s ago)   24s
[root@lab01 data]# kubectl get pods
NAME                                    READY   STATUS                  RESTARTS     AGE
postgresql-deployment-c7c59fff6-l972h   0/1     Init:CrashLoopBackOff   1 (3s ago)   24s
[root@lab01 data]# kubectl get pods
NAME                                    READY   STATUS                  RESTARTS     AGE
postgresql-deployment-c7c59fff6-l972h   0/1     Init:CrashLoopBackOff   1 (4s ago)   25s
[root@lab01 data]# kubectl get pods
NAME                                    READY   STATUS                  RESTARTS     AGE
postgresql-deployment-c7c59fff6-l972h   0/1     Init:CrashLoopBackOff   1 (4s ago)   25s
[root@lab01 data]# kubectl get pods
NAME                                    READY   STATUS                  RESTARTS     AGE
postgresql-deployment-c7c59fff6-l972h   0/1     Init:CrashLoopBackOff   1 (5s ago)   26s
[root@lab01 data]# kubectl describe pod postgresql-deployment-c7c59fff6-l972h
Name:             postgresql-deployment-c7c59fff6-l972h
Namespace:        default
Priority:         0
Service Account:  default
Node:             minikube/192.168.49.2
Start Time:       Wed, 06 Nov 2024 22:41:29 +0530
Labels:           app=postgresql
                  pod-template-hash=c7c59fff6
Annotations:      <none>
Status:           Pending
IP:               10.244.0.22
IPs:
  IP:           10.244.0.22
Controlled By:  ReplicaSet/postgresql-deployment-c7c59fff6
Init Containers:
  init-config:
    Container ID:  docker://c270aa8ef4771124b33ce8e7ad5f624e38045812b897596504fe968c39bba0db
    Image:         bitnami/postgresql:15.3.0
    Image ID:      docker-pullable://bitnami/postgresql@sha256:77522b39d2c3a53c9578c6ba7f299453fea8044b2ba968c8255a50e8070ad8ba
    Port:          <none>
    Host Port:     <none>
    Command:
      /bin/sh
      -c
      mkdir -p /bitnami/postgresql/conf
      cp /etc/postgresql/postgresql.conf /bitnami/postgresql/conf/postgresql.conf

    State:          Waiting
      Reason:       CrashLoopBackOff
    Last State:     Terminated
      Reason:       Error
      Exit Code:    1
      Started:      Wed, 06 Nov 2024 22:41:50 +0530
      Finished:     Wed, 06 Nov 2024 22:41:50 +0530
    Ready:          False
    Restart Count:  1
    Environment:    <none>
    Mounts:
      /bitnami/postgresql from postgresql-storage (rw)
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-xrt4t (ro)
Containers:
  postgresql:
    Container ID:
    Image:          bitnami/postgresql:15.3.0
    Image ID:
    Port:           <none>
    Host Port:      <none>
    State:          Waiting
      Reason:       PodInitializing
    Ready:          False
    Restart Count:  0
    Environment:
      POSTGRESQL_CONF_FILE:  /bitnami/postgresql/conf/postgresql.conf
    Mounts:
      /bitnami/postgresql from postgresql-storage (rw)
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-xrt4t (ro)
Conditions:
  Type                        Status
  PodReadyToStartContainers   True
  Initialized                 False
  Ready                       False
  ContainersReady             False
  PodScheduled                True
Volumes:
  postgresql-storage:
    Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)
    ClaimName:  postgresql-pvc
    ReadOnly:   false
  kube-api-access-xrt4t:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    ConfigMapOptional:       <nil>
    DownwardAPI:             true
QoS Class:                   BestEffort
Node-Selectors:              <none>
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type     Reason     Age                From               Message
  ----     ------     ----               ----               -------
  Normal   Scheduled  35s                default-scheduler  Successfully assigned default/postgresql-deployment-c7c59fff6-l972h to minikube
  Normal   Pulling    34s                kubelet            Pulling image "bitnami/postgresql:15.3.0"
  Normal   Pulled     14s                kubelet            Successfully pulled image "bitnami/postgresql:15.3.0" in 19.812s (19.812s including waiting). Image size: 272700023 bytes.
  Normal   Created    14s (x2 over 14s)  kubelet            Created container init-config
  Normal   Started    14s (x2 over 14s)  kubelet            Started container init-config
  Normal   Pulled     14s                kubelet            Container image "bitnami/postgresql:15.3.0" already present on machine
  Warning  BackOff    12s (x2 over 13s)  kubelet            Back-off restarting failed container init-config in pod postgresql-deployment-c7c59fff6-l972h_default(0b38b2e2-d082-46fd-94fe-e94058ef90ea)
[root@lab01 data]# kubectl logs postgresql-deployment-c7c59fff6-l972h -c init-config
cp: cannot stat '/etc/postgresql/postgresql.conf': No such file or directory
[root@lab01 data]# vi postgresql-deployment.yaml
[root@lab01 data]# kubectl apply -f postgresql-deployment.yaml
error: error parsing postgresql-deployment.yaml: error converting YAML to JSON: yaml: line 30: could not find expected ':'
[root@lab01 data]# >postgresql-deployment.yaml
[root@lab01 data]# vi postgresql-deployment.yaml
[root@lab01 data]# kubectl apply -f postgresql-deployment.yaml
deployment.apps/postgresql-deployment configured
persistentvolumeclaim/postgresql-pvc unchanged
[root@lab01 data]#
[root@lab01 data]# kubectl get pods
NAME                                     READY   STATUS                  RESTARTS        AGE
postgresql-deployment-679747d778-zqzlp   0/1     Init:Error              1 (10s ago)     11s
postgresql-deployment-c7c59fff6-l972h    0/1     Init:CrashLoopBackOff   5 (2m20s ago)   5m29s
[root@lab01 data]# kubectl get pods
NAME                                     READY   STATUS                  RESTARTS        AGE
postgresql-deployment-679747d778-zqzlp   0/1     Init:CrashLoopBackOff   1 (13s ago)     15s
postgresql-deployment-c7c59fff6-l972h    0/1     Init:CrashLoopBackOff   5 (2m24s ago)   5m33s
[root@lab01 data]# kubectl get pods
NAME                                     READY   STATUS                  RESTARTS        AGE
postgresql-deployment-679747d778-zqzlp   0/1     Init:Error              2 (14s ago)     16s
postgresql-deployment-c7c59fff6-l972h    0/1     Init:CrashLoopBackOff   5 (2m25s ago)   5m34s
[root@lab01 data]# kubectl get pods
NAME                                     READY   STATUS                  RESTARTS        AGE
postgresql-deployment-679747d778-zqzlp   0/1     Init:Error              2 (15s ago)     17s
postgresql-deployment-c7c59fff6-l972h    0/1     Init:CrashLoopBackOff   5 (2m26s ago)   5m35s
[root@lab01 data]# kubectl get pods
NAME                                     READY   STATUS                  RESTARTS        AGE
postgresql-deployment-679747d778-zqzlp   0/1     Init:Error              2 (16s ago)     18s
postgresql-deployment-c7c59fff6-l972h    0/1     Init:CrashLoopBackOff   5 (2m27s ago)   5m36s
[root@lab01 data]# kubectl get pods
NAME                                     READY   STATUS                  RESTARTS        AGE
postgresql-deployment-679747d778-zqzlp   0/1     Init:Error              2 (16s ago)     18s
postgresql-deployment-c7c59fff6-l972h    0/1     Init:CrashLoopBackOff   5 (2m27s ago)   5m36s
[root@lab01 data]# kubectl describe pod postgresql-deployment-679747d778-zqzlp
Name:             postgresql-deployment-679747d778-zqzlp
Namespace:        default
Priority:         0
Service Account:  default
Node:             minikube/192.168.49.2
Start Time:       Wed, 06 Nov 2024 22:46:47 +0530
Labels:           app=postgresql
                  pod-template-hash=679747d778
Annotations:      <none>
Status:           Pending
IP:               10.244.0.23
IPs:
  IP:           10.244.0.23
Controlled By:  ReplicaSet/postgresql-deployment-679747d778
Init Containers:
  init-config:
    Container ID:  docker://57cb699f0b970047837ef9709d3840159a8bdcdc6b0dbae42124042fde76f689
    Image:         bitnami/postgresql:15.3.0
    Image ID:      docker-pullable://bitnami/postgresql@sha256:77522b39d2c3a53c9578c6ba7f299453fea8044b2ba968c8255a50e8070ad8ba
    Port:          <none>
    Host Port:     <none>
    Command:
      /bin/sh
      -c
      echo "Initializing configuration files..."
      mkdir -p /bitnami/postgresql/conf  # Ensure the directory exists
      # Check if the sample config exists and copy it, or exit with an error if not found
      if [ -f /etc/postgresql/postgresql.conf.sample ]; then
        cp /etc/postgresql/postgresql.conf.sample /bitnami/postgresql/conf/postgresql.conf
      else
        echo "postgresql.conf.sample not found, exiting..."
        exit 1
      fi

    State:          Waiting
      Reason:       CrashLoopBackOff
    Last State:     Terminated
      Reason:       Error
      Exit Code:    1
      Started:      Wed, 06 Nov 2024 22:47:02 +0530
      Finished:     Wed, 06 Nov 2024 22:47:02 +0530
    Ready:          False
    Restart Count:  2
    Environment:    <none>
    Mounts:
      /bitnami/postgresql from postgresql-storage (rw)
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-82m46 (ro)
Containers:
  postgresql:
    Container ID:
    Image:          bitnami/postgresql:15.3.0
    Image ID:
    Port:           <none>
    Host Port:      <none>
    State:          Waiting
      Reason:       PodInitializing
    Ready:          False
    Restart Count:  0
    Environment:
      POSTGRESQL_CONF_FILE:  /bitnami/postgresql/conf/postgresql.conf
    Mounts:
      /bitnami/postgresql from postgresql-storage (rw)
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-82m46 (ro)
Conditions:
  Type                        Status
  PodReadyToStartContainers   True
  Initialized                 False
  Ready                       False
  ContainersReady             False
  PodScheduled                True
Volumes:
  postgresql-storage:
    Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)
    ClaimName:  postgresql-pvc
    ReadOnly:   false
  kube-api-access-82m46:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    ConfigMapOptional:       <nil>
    DownwardAPI:             true
QoS Class:                   BestEffort
Node-Selectors:              <none>
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type     Reason     Age                From               Message
  ----     ------     ----               ----               -------
  Normal   Scheduled  34s                default-scheduler  Successfully assigned default/postgresql-deployment-679747d778-zqzlp to minikube
  Normal   Pulled     19s (x3 over 33s)  kubelet            Container image "bitnami/postgresql:15.3.0" already present on machine
  Normal   Created    19s (x3 over 33s)  kubelet            Created container init-config
  Normal   Started    19s (x3 over 33s)  kubelet            Started container init-config
  Warning  BackOff    4s (x3 over 32s)   kubelet            Back-off restarting failed container init-config in pod postgresql-deployment-679747d778-zqzlp_default(98deaae0-68f8-4d6f-a6c9-b7b0d020cc13)
[root@lab01 data]# kubectl logs postgresql-deployment-679747d778-zqzlp_default -c init-config
error: error from server (NotFound): pods "postgresql-deployment-679747d778-zqzlp_default" not found in namespace "default"
[root@lab01 data]# helm delete my-postgresql-cluster
Error: uninstall: Release not loaded: my-postgresql-cluster: release: not found
[root@lab01 data]#
[root@lab01 data]# kubectl get pods
NAME                                     READY   STATUS                  RESTARTS      AGE
postgresql-deployment-679747d778-zqzlp   0/1     Init:CrashLoopBackOff   3 (43s ago)   85s
postgresql-deployment-c7c59fff6-l972h    0/1     Init:CrashLoopBackOff   6 (45s ago)   6m43s
[root@lab01 data]# helm delete postgresql-deployment-679747d778-zqzlp
Error: uninstall: Release not loaded: postgresql-deployment-679747d778-zqzlp: release: not found
[root@lab01 data]# helm delete postgresql-deployment-c7c59fff6-l972h
Error: uninstall: Release not loaded: postgresql-deployment-c7c59fff6-l972h: release: not found
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]# kubectl delete deployment --all
deployment.apps "postgresql-deployment" deleted
[root@lab01 data]#
[root@lab01 data]# kubectl delete deployment --all
No resources found
[root@lab01 data]# kubectl get pods
No resources found in default namespace.
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]# kubectl delete pvc --all
kubectl delete pv --all
persistentvolumeclaim "postgresql-pvc" deleted
persistentvolume "postgresql-pv" deleted
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]# ls -lrt
total 36
-rw-r--r--. 1 root root  231 Nov  6 22:12 pv.yaml
-rw-r--r--. 1 root root  201 Nov  6 22:12 pvc.yaml
-rw-r--r--. 1 root root   43 Nov  6 22:14 values-postgres.yaml
-rw-r--r--. 1 root root  173 Nov  6 22:27 mypv.yaml
-rw-r--r--. 1 root root  164 Nov  6 22:27 mypvc.yaml
-rw-r--r--. 1 root root  446 Nov  6 22:28 myvalues.yaml
-rw-r--r--. 1 root root  174 Nov  6 22:40 postgresql-pv.yaml
-rw-r--r--. 1 root root  164 Nov  6 22:40 postgresql-pvc.yaml
-rw-r--r--. 1 root root 1879 Nov  6 22:46 postgresql-deployment.yaml
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]# rm -rf my*
[root@lab01 data]# ls -lrt
total 24
-rw-r--r--. 1 root root  231 Nov  6 22:12 pv.yaml
-rw-r--r--. 1 root root  201 Nov  6 22:12 pvc.yaml
-rw-r--r--. 1 root root   43 Nov  6 22:14 values-postgres.yaml
-rw-r--r--. 1 root root  174 Nov  6 22:40 postgresql-pv.yaml
-rw-r--r--. 1 root root  164 Nov  6 22:40 postgresql-pvc.yaml
-rw-r--r--. 1 root root 1879 Nov  6 22:46 postgresql-deployment.yaml
[root@lab01 data]# rm -rf pos*
[root@lab01 data]# vi postgres-configmap.yaml
[root@lab01 data]# kubectl apply -f postgres-configmap.yaml
configmap/postgres-secret created
[root@lab01 data]# kubectl get configmap
NAME                DATA   AGE
kube-root-ca.crt    1      22h
postgres-secret     3      4s
postgresql-config   2      21h
[root@lab01 data]# vi psql-pv.yaml
[root@lab01 data]# kubectl apply -f psql-pv.yaml
persistentvolume/postgres-volume created
[root@lab01 data]# vi psql-claim.yaml
[root@lab01 data]# kubectl apply -f psql-claim.yaml
persistentvolumeclaim/postgres-volume-claim created
[root@lab01 data]# kubectl get pv
NAME              CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM                           STORAGECLASS   VOLUMEATTRIBUTESCLASS   REASON   AGE
postgres-volume   10Gi       RWX            Retain           Bound    default/postgres-volume-claim   manual         <unset>                          20s
[root@lab01 data]# kubectl get pvc
NAME                    STATUS   VOLUME            CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE
postgres-volume-claim   Bound    postgres-volume   10Gi       RWX            manual         <unset>                 6s
[root@lab01 data]# vi  ps-deployment.yaml
[root@lab01 data]# kubectl apply -f ps-deployment.yaml
deployment.apps/postgres created
[root@lab01 data]# kubectl get deployments
NAME       READY   UP-TO-DATE   AVAILABLE   AGE
postgres   0/3     3            0           3s
[root@lab01 data]# kubectl get pods
NAME                        READY   STATUS              RESTARTS   AGE
postgres-74969955f5-6pnwb   0/1     ContainerCreating   0          9s
postgres-74969955f5-8vf2f   0/1     ContainerCreating   0          9s
postgres-74969955f5-ltn2d   0/1     ContainerCreating   0          9s
[root@lab01 data]# kubectl get pods
NAME                        READY   STATUS              RESTARTS   AGE
postgres-74969955f5-6pnwb   0/1     ContainerCreating   0          12s
postgres-74969955f5-8vf2f   0/1     ContainerCreating   0          12s
postgres-74969955f5-ltn2d   0/1     ContainerCreating   0          12s
[root@lab01 data]# kubectl get pods
NAME                        READY   STATUS              RESTARTS   AGE
postgres-74969955f5-6pnwb   0/1     ContainerCreating   0          13s
postgres-74969955f5-8vf2f   0/1     ContainerCreating   0          13s
postgres-74969955f5-ltn2d   0/1     ContainerCreating   0          13s
[root@lab01 data]# kubectl get pods
NAME                        READY   STATUS              RESTARTS   AGE
postgres-74969955f5-6pnwb   0/1     ContainerCreating   0          14s
postgres-74969955f5-8vf2f   0/1     ContainerCreating   0          14s
postgres-74969955f5-ltn2d   0/1     ContainerCreating   0          14s
[root@lab01 data]# kubectl get pods
NAME                        READY   STATUS              RESTARTS   AGE
postgres-74969955f5-6pnwb   0/1     ContainerCreating   0          15s
postgres-74969955f5-8vf2f   0/1     ContainerCreating   0          15s
postgres-74969955f5-ltn2d   0/1     ContainerCreating   0          15s
[root@lab01 data]# kubectl get pods
NAME                        READY   STATUS              RESTARTS   AGE
postgres-74969955f5-6pnwb   0/1     ContainerCreating   0          15s
postgres-74969955f5-8vf2f   0/1     ContainerCreating   0          15s
postgres-74969955f5-ltn2d   0/1     ContainerCreating   0          15s
[root@lab01 data]# kubectl get pods
NAME                        READY   STATUS              RESTARTS   AGE
postgres-74969955f5-6pnwb   0/1     ContainerCreating   0          16s
postgres-74969955f5-8vf2f   0/1     ContainerCreating   0          16s
postgres-74969955f5-ltn2d   0/1     ContainerCreating   0          16s
[root@lab01 data]# kubectl get pods
NAME                        READY   STATUS              RESTARTS   AGE
postgres-74969955f5-6pnwb   0/1     ContainerCreating   0          16s
postgres-74969955f5-8vf2f   0/1     ContainerCreating   0          16s
postgres-74969955f5-ltn2d   0/1     ContainerCreating   0          16s
[root@lab01 data]# kubectl get pods
NAME                        READY   STATUS              RESTARTS   AGE
postgres-74969955f5-6pnwb   0/1     ContainerCreating   0          17s
postgres-74969955f5-8vf2f   0/1     ContainerCreating   0          17s
postgres-74969955f5-ltn2d   0/1     ContainerCreating   0          17s
[root@lab01 data]# kubectl get pods
NAME                        READY   STATUS              RESTARTS   AGE
postgres-74969955f5-6pnwb   0/1     ContainerCreating   0          18s
postgres-74969955f5-8vf2f   0/1     ContainerCreating   0          18s
postgres-74969955f5-ltn2d   0/1     ContainerCreating   0          18s
[root@lab01 data]# kubectl get pods
NAME                        READY   STATUS              RESTARTS   AGE
postgres-74969955f5-6pnwb   0/1     ContainerCreating   0          18s
postgres-74969955f5-8vf2f   0/1     ContainerCreating   0          18s
postgres-74969955f5-ltn2d   0/1     ContainerCreating   0          18s
[root@lab01 data]# kubectl get pods
NAME                        READY   STATUS              RESTARTS   AGE
postgres-74969955f5-6pnwb   0/1     ContainerCreating   0          19s
postgres-74969955f5-8vf2f   0/1     ContainerCreating   0          19s
postgres-74969955f5-ltn2d   0/1     ContainerCreating   0          19s
[root@lab01 data]# kubectl get pods
NAME                        READY   STATUS              RESTARTS   AGE
postgres-74969955f5-6pnwb   0/1     ContainerCreating   0          33s
postgres-74969955f5-8vf2f   1/1     Running             0          33s
postgres-74969955f5-ltn2d   1/1     Running             0          33s
[root@lab01 data]# kubectl get pods
NAME                        READY   STATUS    RESTARTS   AGE
postgres-74969955f5-6pnwb   1/1     Running   0          34s
postgres-74969955f5-8vf2f   1/1     Running   0          34s
postgres-74969955f5-ltn2d   1/1     Running   0          34s
[root@lab01 data]# kubectl get pods
NAME                        READY   STATUS    RESTARTS   AGE
postgres-74969955f5-6pnwb   1/1     Running   0          34s
postgres-74969955f5-8vf2f   1/1     Running   0          34s
postgres-74969955f5-ltn2d   1/1     Running   0          34s
[root@lab01 data]# vi ps-service.yaml
[root@lab01 data]# kubectl apply -f ps-service.yaml
service/postgres created
[root@lab01 data]# kubectl get svc
NAME         TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP   10.96.0.1      <none>        443/TCP          23h
postgres     NodePort    10.97.172.86   <none>        5432:30867/TCP   4s
[root@lab01 data]# kubectl get pods
NAME                        READY   STATUS    RESTARTS   AGE
postgres-74969955f5-6pnwb   1/1     Running   0          95s
postgres-74969955f5-8vf2f   1/1     Running   0          95s
postgres-74969955f5-ltn2d   1/1     Running   0          95s
[root@lab01 data]# kubectl exec -it postgres-74969955f5-6pnwb -- /bin/bash
root@postgres-74969955f5-6pnwb:/#
root@postgres-74969955f5-6pnwb:/# df -h
Filesystem           Size  Used Avail Use% Mounted on
overlay               42G   11G   31G  26% /
tmpfs                 64M     0   64M   0% /dev
shm                   64M   28K   64M   1% /dev/shm
/dev/mapper/cs-root   42G   11G   31G  26% /etc/hosts
tmpfs                3.6G   12K  3.6G   1% /run/secrets/kubernetes.io/serviceaccount
tmpfs                1.8G     0  1.8G   0% /proc/asound
tmpfs                1.8G     0  1.8G   0% /proc/acpi
tmpfs                1.8G     0  1.8G   0% /proc/scsi
tmpfs                1.8G     0  1.8G   0% /sys/firmware
root@postgres-74969955f5-6pnwb:/# ps -ef | grep postgres
bash: ps: command not found
root@postgres-74969955f5-6pnwb:/#
root@postgres-74969955f5-6pnwb:/# exit
exit
command terminated with exit code 1
[root@lab01 data]# kubectl exec -it postgres-74969955f5-6pnwb psql -h localhost -U ps_user --password -p 5432 ps_db
error: unknown shorthand flag: 'U' in -U
See 'kubectl exec --help' for usage.
[root@lab01 data]# kubectl exec -it postgres-74969955f5-6pnwb -- psql -h localhost -U ps_user --password -p 5432 ps_db
Password:
psql (14.13 (Debian 14.13-1.pgdg120+1))
Type "help" for help.

ps_db=# \q
[root@lab01 data]# kubectl exec -it postgres-74969955f5-6pnwb -- /bash
OCI runtime exec failed: exec failed: unable to start container process: exec: "/bash": stat /bash: no such file or directory: unknown
command terminated with exit code 126
[root@lab01 data]# kubectl exec -it postgres-74969955f5-6pnwb -- bash
root@postgres-74969955f5-6pnwb:/#
root@postgres-74969955f5-6pnwb:/#
root@postgres-74969955f5-6pnwb:/# df -h
Filesystem           Size  Used Avail Use% Mounted on
overlay               42G   11G   31G  26% /
tmpfs                 64M     0   64M   0% /dev
shm                   64M   28K   64M   1% /dev/shm
/dev/mapper/cs-root   42G   11G   31G  26% /etc/hosts
tmpfs                3.6G   12K  3.6G   1% /run/secrets/kubernetes.io/serviceaccount
tmpfs                1.8G     0  1.8G   0% /proc/asound
tmpfs                1.8G     0  1.8G   0% /proc/acpi
tmpfs                1.8G     0  1.8G   0% /proc/scsi
tmpfs                1.8G     0  1.8G   0% /sys/firmware
root@postgres-74969955f5-6pnwb:/#
root@postgres-74969955f5-6pnwb:/# ps -ef | grep postgres
bash: ps: command not found
root@postgres-74969955f5-6pnwb:/# cd /
root@postgres-74969955f5-6pnwb:/# find . -name "postgresql.conf"
find: ‘./proc/1/map_files’: Permission denied
find: ‘./proc/27/map_files’: Permission denied
find: ‘./proc/28/map_files’: Permission denied
find: ‘./proc/29/map_files’: Permission denied
find: ‘./proc/30/map_files’: Permission denied
find: ‘./proc/31/map_files’: Permission denied
find: ‘./proc/32/map_files’: Permission denied
./var/lib/postgresql/data/postgresql.conf
root@postgres-74969955f5-6pnwb:/# cd /var/lib/postgresql/data/
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data# ls -rlt
total 64
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_twophase
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_snapshots
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_serial
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_notify
drwx------. 4 postgres postgres    36 Nov  6 17:22 pg_multixact
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_dynshmem
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_commit_ts
-rw-------. 1 postgres postgres     3 Nov  6 17:22 PG_VERSION
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_tblspc
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_replslot
-rw-------. 1 postgres postgres 28827 Nov  6 17:22 postgresql.conf
-rw-------. 1 postgres postgres    88 Nov  6 17:22 postgresql.auto.conf
-rw-------. 1 postgres postgres  1636 Nov  6 17:22 pg_ident.conf
drwx------. 2 postgres postgres    18 Nov  6 17:22 pg_xact
drwx------. 3 postgres postgres    60 Nov  6 17:22 pg_wal
drwx------. 2 postgres postgres    18 Nov  6 17:22 pg_subtrans
-rw-------. 1 postgres postgres  4821 Nov  6 17:22 pg_hba.conf
drwx------. 6 postgres postgres    54 Nov  6 17:22 base
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_stat
-rw-------. 1 postgres postgres    36 Nov  6 17:22 postmaster.opts
drwx------. 4 postgres postgres    68 Nov  6 17:22 pg_logical
-rw-------. 1 postgres postgres    94 Nov  6 17:22 postmaster.pid
drwx------. 2 postgres postgres  4096 Nov  6 17:25 global
drwx------. 2 postgres postgres    84 Nov  6 17:25 pg_stat_tmp
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data# vi postgresql.conf
bash: vi: command not found
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data#
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data# apt install vim
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
E: Unable to locate package vim
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data# apt install vi
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
E: Unable to locate package vi
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data# apt-get install vi
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
E: Unable to locate package vi
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data# apt-get install vim
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
E: Unable to locate package vim
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data# nano postgresql.conf
bash: nano: command not found
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data#
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data# cat postgresql.conf
# -----------------------------
# PostgreSQL configuration file
# -----------------------------
#
# This file consists of lines of the form:
#
#   name = value
#
# (The "=" is optional.)  Whitespace may be used.  Comments are introduced with
# "#" anywhere on a line.  The complete list of parameter names and allowed
# values can be found in the PostgreSQL documentation.
#
# The commented-out settings shown in this file represent the default values.
# Re-commenting a setting is NOT sufficient to revert it to the default value;
# you need to reload the server.
#
# This file is read on server startup and when the server receives a SIGHUP
# signal.  If you edit the file on a running system, you have to SIGHUP the
# server for the changes to take effect, run "pg_ctl reload", or execute
# "SELECT pg_reload_conf()".  Some parameters, which are marked below,
# require a server shutdown and restart to take effect.
#
# Any parameter can also be given as a command-line option to the server, e.g.,
# "postgres -c log_connections=on".  Some parameters can be changed at run time
# with the "SET" SQL command.
#
# Memory units:  B  = bytes            Time units:  us  = microseconds
#                kB = kilobytes                     ms  = milliseconds
#                MB = megabytes                     s   = seconds
#                GB = gigabytes                     min = minutes
#                TB = terabytes                     h   = hours
#                                                   d   = days


#------------------------------------------------------------------------------
# FILE LOCATIONS
#------------------------------------------------------------------------------

# The default values of these variables are driven from the -D command-line
# option or PGDATA environment variable, represented here as ConfigDir.

#data_directory = 'ConfigDir'           # use data in another directory
                                        # (change requires restart)
#hba_file = 'ConfigDir/pg_hba.conf'     # host-based authentication file
                                        # (change requires restart)
#ident_file = 'ConfigDir/pg_ident.conf' # ident configuration file
                                        # (change requires restart)

# If external_pid_file is not explicitly set, no extra PID file is written.
#external_pid_file = ''                 # write an extra PID file
                                        # (change requires restart)


#------------------------------------------------------------------------------
# CONNECTIONS AND AUTHENTICATION
#------------------------------------------------------------------------------

# - Connection Settings -

listen_addresses = '*'
                                        # comma-separated list of addresses;
                                        # defaults to 'localhost'; use '*' for all
                                        # (change requires restart)
#port = 5432                            # (change requires restart)
max_connections = 100                   # (change requires restart)
#superuser_reserved_connections = 3     # (change requires restart)
#unix_socket_directories = '/var/run/postgresql'        # comma-separated list of directories
                                        # (change requires restart)
#unix_socket_group = ''                 # (change requires restart)
#unix_socket_permissions = 0777         # begin with 0 to use octal notation
                                        # (change requires restart)
#bonjour = off                          # advertise server via Bonjour
                                        # (change requires restart)
#bonjour_name = ''                      # defaults to the computer name
                                        # (change requires restart)

# - TCP settings -
# see "man tcp" for details

#tcp_keepalives_idle = 0                # TCP_KEEPIDLE, in seconds;
                                        # 0 selects the system default
#tcp_keepalives_interval = 0            # TCP_KEEPINTVL, in seconds;
                                        # 0 selects the system default
#tcp_keepalives_count = 0               # TCP_KEEPCNT;
                                        # 0 selects the system default
#tcp_user_timeout = 0                   # TCP_USER_TIMEOUT, in milliseconds;
                                        # 0 selects the system default

#client_connection_check_interval = 0   # time between checks for client
                                        # disconnection while running queries;
                                        # 0 for never

# - Authentication -

#authentication_timeout = 1min          # 1s-600s
#password_encryption = scram-sha-256    # scram-sha-256 or md5
#db_user_namespace = off

# GSSAPI using Kerberos
#krb_server_keyfile = 'FILE:${sysconfdir}/krb5.keytab'
#krb_caseins_users = off

# - SSL -

#ssl = off
#ssl_ca_file = ''
#ssl_cert_file = 'server.crt'
#ssl_crl_file = ''
#ssl_crl_dir = ''
#ssl_key_file = 'server.key'
#ssl_ciphers = 'HIGH:MEDIUM:+3DES:!aNULL' # allowed SSL ciphers
#ssl_prefer_server_ciphers = on
#ssl_ecdh_curve = 'prime256v1'
#ssl_min_protocol_version = 'TLSv1.2'
#ssl_max_protocol_version = ''
#ssl_dh_params_file = ''
#ssl_passphrase_command = ''
#ssl_passphrase_command_supports_reload = off


#------------------------------------------------------------------------------
# RESOURCE USAGE (except WAL)
#------------------------------------------------------------------------------

# - Memory -

shared_buffers = 128MB                  # min 128kB
                                        # (change requires restart)
#huge_pages = try                       # on, off, or try
                                        # (change requires restart)
#huge_page_size = 0                     # zero for system default
                                        # (change requires restart)
#temp_buffers = 8MB                     # min 800kB
#max_prepared_transactions = 0          # zero disables the feature
                                        # (change requires restart)
# Caution: it is not advisable to set max_prepared_transactions nonzero unless
# you actively intend to use prepared transactions.
#work_mem = 4MB                         # min 64kB
#hash_mem_multiplier = 1.0              # 1-1000.0 multiplier on hash table work_mem
#maintenance_work_mem = 64MB            # min 1MB
#autovacuum_work_mem = -1               # min 1MB, or -1 to use maintenance_work_mem
#logical_decoding_work_mem = 64MB       # min 64kB
#max_stack_depth = 2MB                  # min 100kB
#shared_memory_type = mmap              # the default is the first option
                                        # supported by the operating system:
                                        #   mmap
                                        #   sysv
                                        #   windows
                                        # (change requires restart)
dynamic_shared_memory_type = posix      # the default is the first option
                                        # supported by the operating system:
                                        #   posix
                                        #   sysv
                                        #   windows
                                        #   mmap
                                        # (change requires restart)
#min_dynamic_shared_memory = 0MB        # (change requires restart)

# - Disk -

#temp_file_limit = -1                   # limits per-process temp file space
                                        # in kilobytes, or -1 for no limit

# - Kernel Resources -

#max_files_per_process = 1000           # min 64
                                        # (change requires restart)

# - Cost-Based Vacuum Delay -

#vacuum_cost_delay = 0                  # 0-100 milliseconds (0 disables)
#vacuum_cost_page_hit = 1               # 0-10000 credits
#vacuum_cost_page_miss = 2              # 0-10000 credits
#vacuum_cost_page_dirty = 20            # 0-10000 credits
#vacuum_cost_limit = 200                # 1-10000 credits

# - Background Writer -

#bgwriter_delay = 200ms                 # 10-10000ms between rounds
#bgwriter_lru_maxpages = 100            # max buffers written/round, 0 disables
#bgwriter_lru_multiplier = 2.0          # 0-10.0 multiplier on buffers scanned/round
#bgwriter_flush_after = 512kB           # measured in pages, 0 disables

# - Asynchronous Behavior -

#backend_flush_after = 0                # measured in pages, 0 disables
#effective_io_concurrency = 1           # 1-1000; 0 disables prefetching
#maintenance_io_concurrency = 10        # 1-1000; 0 disables prefetching
#max_worker_processes = 8               # (change requires restart)
#max_parallel_workers_per_gather = 2    # limited by max_parallel_workers
#max_parallel_maintenance_workers = 2   # limited by max_parallel_workers
#max_parallel_workers = 8               # number of max_worker_processes that
                                        # can be used in parallel operations
#parallel_leader_participation = on
#old_snapshot_threshold = -1            # 1min-60d; -1 disables; 0 is immediate
                                        # (change requires restart)


#------------------------------------------------------------------------------
# WRITE-AHEAD LOG
#------------------------------------------------------------------------------

# - Settings -

#wal_level = replica                    # minimal, replica, or logical
                                        # (change requires restart)
#fsync = on                             # flush data to disk for crash safety
                                        # (turning this off can cause
                                        # unrecoverable data corruption)
#synchronous_commit = on                # synchronization level;
                                        # off, local, remote_write, remote_apply, or on
#wal_sync_method = fsync                # the default is the first option
                                        # supported by the operating system:
                                        #   open_datasync
                                        #   fdatasync (default on Linux and FreeBSD)
                                        #   fsync
                                        #   fsync_writethrough
                                        #   open_sync
#full_page_writes = on                  # recover from partial page writes
#wal_log_hints = off                    # also do full page writes of non-critical updates
                                        # (change requires restart)
#wal_compression = off                  # enable compression of full-page writes
#wal_init_zero = on                     # zero-fill new WAL files
#wal_recycle = on                       # recycle WAL files
#wal_buffers = -1                       # min 32kB, -1 sets based on shared_buffers
                                        # (change requires restart)
#wal_writer_delay = 200ms               # 1-10000 milliseconds
#wal_writer_flush_after = 1MB           # measured in pages, 0 disables
#wal_skip_threshold = 2MB

#commit_delay = 0                       # range 0-100000, in microseconds
#commit_siblings = 5                    # range 1-1000

# - Checkpoints -

#checkpoint_timeout = 5min              # range 30s-1d
#checkpoint_completion_target = 0.9     # checkpoint target duration, 0.0 - 1.0
#checkpoint_flush_after = 256kB         # measured in pages, 0 disables
#checkpoint_warning = 30s               # 0 disables
max_wal_size = 1GB
min_wal_size = 80MB

# - Archiving -

#archive_mode = off             # enables archiving; off, on, or always
                                # (change requires restart)
#archive_command = ''           # command to use to archive a logfile segment
                                # placeholders: %p = path of file to archive
                                #               %f = file name only
                                # e.g. 'test ! -f /mnt/server/archivedir/%f && cp %p /mnt/server/archivedir/%f'
#archive_timeout = 0            # force a logfile segment switch after this
                                # number of seconds; 0 disables

# - Archive Recovery -

# These are only used in recovery mode.

#restore_command = ''           # command to use to restore an archived logfile segment
                                # placeholders: %p = path of file to restore
                                #               %f = file name only
                                # e.g. 'cp /mnt/server/archivedir/%f %p'
#archive_cleanup_command = ''   # command to execute at every restartpoint
#recovery_end_command = ''      # command to execute at completion of recovery

# - Recovery Target -

# Set these only when performing a targeted recovery.

#recovery_target = ''           # 'immediate' to end recovery as soon as a
                                # consistent state is reached
                                # (change requires restart)
#recovery_target_name = ''      # the named restore point to which recovery will proceed
                                # (change requires restart)
#recovery_target_time = ''      # the time stamp up to which recovery will proceed
                                # (change requires restart)
#recovery_target_xid = ''       # the transaction ID up to which recovery will proceed
                                # (change requires restart)
#recovery_target_lsn = ''       # the WAL LSN up to which recovery will proceed
                                # (change requires restart)
#recovery_target_inclusive = on # Specifies whether to stop:
                                # just after the specified recovery target (on)
                                # just before the recovery target (off)
                                # (change requires restart)
#recovery_target_timeline = 'latest'    # 'current', 'latest', or timeline ID
                                # (change requires restart)
#recovery_target_action = 'pause'       # 'pause', 'promote', 'shutdown'
                                # (change requires restart)


#------------------------------------------------------------------------------
# REPLICATION
#------------------------------------------------------------------------------

# - Sending Servers -

# Set these on the primary and on any standby that will send replication data.

#max_wal_senders = 10           # max number of walsender processes
                                # (change requires restart)
#max_replication_slots = 10     # max number of replication slots
                                # (change requires restart)
#wal_keep_size = 0              # in megabytes; 0 disables
#max_slot_wal_keep_size = -1    # in megabytes; -1 disables
#wal_sender_timeout = 60s       # in milliseconds; 0 disables
#track_commit_timestamp = off   # collect timestamp of transaction commit
                                # (change requires restart)

# - Primary Server -

# These settings are ignored on a standby server.

#synchronous_standby_names = '' # standby servers that provide sync rep
                                # method to choose sync standbys, number of sync standbys,
                                # and comma-separated list of application_name
                                # from standby(s); '*' = all
#vacuum_defer_cleanup_age = 0   # number of xacts by which cleanup is delayed

# - Standby Servers -

# These settings are ignored on a primary server.

#primary_conninfo = ''                  # connection string to sending server
#primary_slot_name = ''                 # replication slot on sending server
#promote_trigger_file = ''              # file name whose presence ends recovery
#hot_standby = on                       # "off" disallows queries during recovery
                                        # (change requires restart)
#max_standby_archive_delay = 30s        # max delay before canceling queries
                                        # when reading WAL from archive;
                                        # -1 allows indefinite delay
#max_standby_streaming_delay = 30s      # max delay before canceling queries
                                        # when reading streaming WAL;
                                        # -1 allows indefinite delay
#wal_receiver_create_temp_slot = off    # create temp slot if primary_slot_name
                                        # is not set
#wal_receiver_status_interval = 10s     # send replies at least this often
                                        # 0 disables
#hot_standby_feedback = off             # send info from standby to prevent
                                        # query conflicts
#wal_receiver_timeout = 60s             # time that receiver waits for
                                        # communication from primary
                                        # in milliseconds; 0 disables
#wal_retrieve_retry_interval = 5s       # time to wait before retrying to
                                        # retrieve WAL after a failed attempt
#recovery_min_apply_delay = 0           # minimum delay for applying changes during recovery

# - Subscribers -

# These settings are ignored on a publisher.

#max_logical_replication_workers = 4    # taken from max_worker_processes
                                        # (change requires restart)
#max_sync_workers_per_subscription = 2  # taken from max_logical_replication_workers


#------------------------------------------------------------------------------
# QUERY TUNING
#------------------------------------------------------------------------------

# - Planner Method Configuration -

#enable_async_append = on
#enable_bitmapscan = on
#enable_gathermerge = on
#enable_hashagg = on
#enable_hashjoin = on
#enable_incremental_sort = on
#enable_indexscan = on
#enable_indexonlyscan = on
#enable_material = on
#enable_memoize = on
#enable_mergejoin = on
#enable_nestloop = on
#enable_parallel_append = on
#enable_parallel_hash = on
#enable_partition_pruning = on
#enable_partitionwise_join = off
#enable_partitionwise_aggregate = off
#enable_seqscan = on
#enable_sort = on
#enable_tidscan = on

# - Planner Cost Constants -

#seq_page_cost = 1.0                    # measured on an arbitrary scale
#random_page_cost = 4.0                 # same scale as above
#cpu_tuple_cost = 0.01                  # same scale as above
#cpu_index_tuple_cost = 0.005           # same scale as above
#cpu_operator_cost = 0.0025             # same scale as above
#parallel_setup_cost = 1000.0   # same scale as above
#parallel_tuple_cost = 0.1              # same scale as above
#min_parallel_table_scan_size = 8MB
#min_parallel_index_scan_size = 512kB
#effective_cache_size = 4GB

#jit_above_cost = 100000                # perform JIT compilation if available
                                        # and query more expensive than this;
                                        # -1 disables
#jit_inline_above_cost = 500000         # inline small functions if query is
                                        # more expensive than this; -1 disables
#jit_optimize_above_cost = 500000       # use expensive JIT optimizations if
                                        # query is more expensive than this;
                                        # -1 disables

# - Genetic Query Optimizer -

#geqo = on
#geqo_threshold = 12
#geqo_effort = 5                        # range 1-10
#geqo_pool_size = 0                     # selects default based on effort
#geqo_generations = 0                   # selects default based on effort
#geqo_selection_bias = 2.0              # range 1.5-2.0
#geqo_seed = 0.0                        # range 0.0-1.0

# - Other Planner Options -

#default_statistics_target = 100        # range 1-10000
#constraint_exclusion = partition       # on, off, or partition
#cursor_tuple_fraction = 0.1            # range 0.0-1.0
#from_collapse_limit = 8
#jit = on                               # allow JIT compilation
#join_collapse_limit = 8                # 1 disables collapsing of explicit
                                        # JOIN clauses
#plan_cache_mode = auto                 # auto, force_generic_plan or
                                        # force_custom_plan


#------------------------------------------------------------------------------
# REPORTING AND LOGGING
#------------------------------------------------------------------------------

# - Where to Log -

#log_destination = 'stderr'             # Valid values are combinations of
                                        # stderr, csvlog, syslog, and eventlog,
                                        # depending on platform.  csvlog
                                        # requires logging_collector to be on.

# This is used when logging to stderr:
#logging_collector = off                # Enable capturing of stderr and csvlog
                                        # into log files. Required to be on for
                                        # csvlogs.
                                        # (change requires restart)

# These are only used if logging_collector is on:
#log_directory = 'log'                  # directory where log files are written,
                                        # can be absolute or relative to PGDATA
#log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'        # log file name pattern,
                                        # can include strftime() escapes
#log_file_mode = 0600                   # creation mode for log files,
                                        # begin with 0 to use octal notation
#log_rotation_age = 1d                  # Automatic rotation of logfiles will
                                        # happen after that time.  0 disables.
#log_rotation_size = 10MB               # Automatic rotation of logfiles will
                                        # happen after that much log output.
                                        # 0 disables.
#log_truncate_on_rotation = off         # If on, an existing log file with the
                                        # same name as the new log file will be
                                        # truncated rather than appended to.
                                        # But such truncation only occurs on
                                        # time-driven rotation, not on restarts
                                        # or size-driven rotation.  Default is
                                        # off, meaning append to existing files
                                        # in all cases.

# These are relevant when logging to syslog:
#syslog_facility = 'LOCAL0'
#syslog_ident = 'postgres'
#syslog_sequence_numbers = on
#syslog_split_messages = on

# This is only relevant when logging to eventlog (Windows):
# (change requires restart)
#event_source = 'PostgreSQL'

# - When to Log -

#log_min_messages = warning             # values in order of decreasing detail:
                                        #   debug5
                                        #   debug4
                                        #   debug3
                                        #   debug2
                                        #   debug1
                                        #   info
                                        #   notice
                                        #   warning
                                        #   error
                                        #   log
                                        #   fatal
                                        #   panic

#log_min_error_statement = error        # values in order of decreasing detail:
                                        #   debug5
                                        #   debug4
                                        #   debug3
                                        #   debug2
                                        #   debug1
                                        #   info
                                        #   notice
                                        #   warning
                                        #   error
                                        #   log
                                        #   fatal
                                        #   panic (effectively off)

#log_min_duration_statement = -1        # -1 is disabled, 0 logs all statements
                                        # and their durations, > 0 logs only
                                        # statements running at least this number
                                        # of milliseconds

#log_min_duration_sample = -1           # -1 is disabled, 0 logs a sample of statements
                                        # and their durations, > 0 logs only a sample of
                                        # statements running at least this number
                                        # of milliseconds;
                                        # sample fraction is determined by log_statement_sample_rate

#log_statement_sample_rate = 1.0        # fraction of logged statements exceeding
                                        # log_min_duration_sample to be logged;
                                        # 1.0 logs all such statements, 0.0 never logs


#log_transaction_sample_rate = 0.0      # fraction of transactions whose statements
                                        # are logged regardless of their duration; 1.0 logs all
                                        # statements from all transactions, 0.0 never logs

# - What to Log -

#debug_print_parse = off
#debug_print_rewritten = off
#debug_print_plan = off
#debug_pretty_print = on
#log_autovacuum_min_duration = -1       # log autovacuum activity;
                                        # -1 disables, 0 logs all actions and
                                        # their durations, > 0 logs only
                                        # actions running at least this number
                                        # of milliseconds.
#log_checkpoints = off
#log_connections = off
#log_disconnections = off
#log_duration = off
#log_error_verbosity = default          # terse, default, or verbose messages
#log_hostname = off
#log_line_prefix = '%m [%p] '           # special values:
                                        #   %a = application name
                                        #   %u = user name
                                        #   %d = database name
                                        #   %r = remote host and port
                                        #   %h = remote host
                                        #   %b = backend type
                                        #   %p = process ID
                                        #   %P = process ID of parallel group leader
                                        #   %t = timestamp without milliseconds
                                        #   %m = timestamp with milliseconds
                                        #   %n = timestamp with milliseconds (as a Unix epoch)
                                        #   %Q = query ID (0 if none or not computed)
                                        #   %i = command tag
                                        #   %e = SQL state
                                        #   %c = session ID
                                        #   %l = session line number
                                        #   %s = session start timestamp
                                        #   %v = virtual transaction ID
                                        #   %x = transaction ID (0 if none)
                                        #   %q = stop here in non-session
                                        #        processes
                                        #   %% = '%'
                                        # e.g. '<%u%%%d> '
#log_lock_waits = off                   # log lock waits >= deadlock_timeout
#log_recovery_conflict_waits = off      # log standby recovery conflict waits
                                        # >= deadlock_timeout
#log_parameter_max_length = -1          # when logging statements, limit logged
                                        # bind-parameter values to N bytes;
                                        # -1 means print in full, 0 disables
#log_parameter_max_length_on_error = 0  # when logging an error, limit logged
                                        # bind-parameter values to N bytes;
                                        # -1 means print in full, 0 disables
#log_statement = 'none'                 # none, ddl, mod, all
#log_replication_commands = off
#log_temp_files = -1                    # log temporary files equal or larger
                                        # than the specified size in kilobytes;
                                        # -1 disables, 0 logs all temp files
log_timezone = 'Etc/UTC'


#------------------------------------------------------------------------------
# PROCESS TITLE
#------------------------------------------------------------------------------

#cluster_name = ''                      # added to process titles if nonempty
                                        # (change requires restart)
#update_process_title = on


#------------------------------------------------------------------------------
# STATISTICS
#------------------------------------------------------------------------------

# - Query and Index Statistics Collector -

#track_activities = on
#track_activity_query_size = 1024       # (change requires restart)
#track_counts = on
#track_io_timing = off
#track_wal_io_timing = off
#track_functions = none                 # none, pl, all
#stats_temp_directory = 'pg_stat_tmp'


# - Monitoring -

#compute_query_id = auto
#log_statement_stats = off
#log_parser_stats = off
#log_planner_stats = off
#log_executor_stats = off


#------------------------------------------------------------------------------
# AUTOVACUUM
#------------------------------------------------------------------------------

#autovacuum = on                        # Enable autovacuum subprocess?  'on'
                                        # requires track_counts to also be on.
#autovacuum_max_workers = 3             # max number of autovacuum subprocesses
                                        # (change requires restart)
#autovacuum_naptime = 1min              # time between autovacuum runs
#autovacuum_vacuum_threshold = 50       # min number of row updates before
                                        # vacuum
#autovacuum_vacuum_insert_threshold = 1000      # min number of row inserts
                                        # before vacuum; -1 disables insert
                                        # vacuums
#autovacuum_analyze_threshold = 50      # min number of row updates before
                                        # analyze
#autovacuum_vacuum_scale_factor = 0.2   # fraction of table size before vacuum
#autovacuum_vacuum_insert_scale_factor = 0.2    # fraction of inserts over table
                                        # size before insert vacuum
#autovacuum_analyze_scale_factor = 0.1  # fraction of table size before analyze
#autovacuum_freeze_max_age = 200000000  # maximum XID age before forced vacuum
                                        # (change requires restart)
#autovacuum_multixact_freeze_max_age = 400000000        # maximum multixact age
                                        # before forced vacuum
                                        # (change requires restart)
#autovacuum_vacuum_cost_delay = 2ms     # default vacuum cost delay for
                                        # autovacuum, in milliseconds;
                                        # -1 means use vacuum_cost_delay
#autovacuum_vacuum_cost_limit = -1      # default vacuum cost limit for
                                        # autovacuum, -1 means use
                                        # vacuum_cost_limit


#------------------------------------------------------------------------------
# CLIENT CONNECTION DEFAULTS
#------------------------------------------------------------------------------

# - Statement Behavior -

#client_min_messages = notice           # values in order of decreasing detail:
                                        #   debug5
                                        #   debug4
                                        #   debug3
                                        #   debug2
                                        #   debug1
                                        #   log
                                        #   notice
                                        #   warning
                                        #   error
#search_path = '"$user", public'        # schema names
#row_security = on
#default_table_access_method = 'heap'
#default_tablespace = ''                # a tablespace name, '' uses the default
#default_toast_compression = 'pglz'     # 'pglz' or 'lz4'
#temp_tablespaces = ''                  # a list of tablespace names, '' uses
                                        # only default tablespace
#check_function_bodies = on
#default_transaction_isolation = 'read committed'
#default_transaction_read_only = off
#default_transaction_deferrable = off
#session_replication_role = 'origin'
#statement_timeout = 0                  # in milliseconds, 0 is disabled
#lock_timeout = 0                       # in milliseconds, 0 is disabled
#idle_in_transaction_session_timeout = 0        # in milliseconds, 0 is disabled
#idle_session_timeout = 0               # in milliseconds, 0 is disabled
#vacuum_freeze_table_age = 150000000
#vacuum_freeze_min_age = 50000000
#vacuum_failsafe_age = 1600000000
#vacuum_multixact_freeze_table_age = 150000000
#vacuum_multixact_freeze_min_age = 5000000
#vacuum_multixact_failsafe_age = 1600000000
#bytea_output = 'hex'                   # hex, escape
#xmlbinary = 'base64'
#xmloption = 'content'
#gin_pending_list_limit = 4MB

# - Locale and Formatting -

datestyle = 'iso, mdy'
#intervalstyle = 'postgres'
timezone = 'Etc/UTC'
#timezone_abbreviations = 'Default'     # Select the set of available time zone
                                        # abbreviations.  Currently, there are
                                        #   Default
                                        #   Australia (historical usage)
                                        #   India
                                        # You can create your own file in
                                        # share/timezonesets/.
#extra_float_digits = 1                 # min -15, max 3; any value >0 actually
                                        # selects precise output mode
#client_encoding = sql_ascii            # actually, defaults to database
                                        # encoding

# These settings are initialized by initdb, but they can be changed.
lc_messages = 'en_US.utf8'                      # locale for system error message
                                        # strings
lc_monetary = 'en_US.utf8'                      # locale for monetary formatting
lc_numeric = 'en_US.utf8'                       # locale for number formatting
lc_time = 'en_US.utf8'                          # locale for time formatting

# default configuration for text search
default_text_search_config = 'pg_catalog.english'

# - Shared Library Preloading -

#local_preload_libraries = ''
#session_preload_libraries = ''
#shared_preload_libraries = ''  # (change requires restart)
#jit_provider = 'llvmjit'               # JIT library to use

# - Other Defaults -

#dynamic_library_path = '$libdir'
#extension_destdir = ''                 # prepend path when loading extensions
                                        # and shared objects (added by Debian)
#gin_fuzzy_search_limit = 0


#------------------------------------------------------------------------------
# LOCK MANAGEMENT
#------------------------------------------------------------------------------

#deadlock_timeout = 1s
#max_locks_per_transaction = 64         # min 10
                                        # (change requires restart)
#max_pred_locks_per_transaction = 64    # min 10
                                        # (change requires restart)
#max_pred_locks_per_relation = -2       # negative values mean
                                        # (max_pred_locks_per_transaction
                                        #  / -max_pred_locks_per_relation) - 1
#max_pred_locks_per_page = 2            # min 0


#------------------------------------------------------------------------------
# VERSION AND PLATFORM COMPATIBILITY
#------------------------------------------------------------------------------

# - Previous PostgreSQL Versions -

#array_nulls = on
#backslash_quote = safe_encoding        # on, off, or safe_encoding
#escape_string_warning = on
#lo_compat_privileges = off
#quote_all_identifiers = off
#standard_conforming_strings = on
#synchronize_seqscans = on

# - Other Platforms and Clients -

#transform_null_equals = off


#------------------------------------------------------------------------------
# ERROR HANDLING
#------------------------------------------------------------------------------

#exit_on_error = off                    # terminate session on any error?
#restart_after_crash = on               # reinitialize after backend crash?
#data_sync_retry = off                  # retry or panic on failure to fsync
                                        # data?
                                        # (change requires restart)
#recovery_init_sync_method = fsync      # fsync, syncfs (Linux 5.8+)


#------------------------------------------------------------------------------
# CONFIG FILE INCLUDES
#------------------------------------------------------------------------------

# These options allow settings to be loaded from files other than the
# default postgresql.conf.  Note that these are directives, not variable
# assignments, so they can usefully be given more than once.

#include_dir = '...'                    # include files ending in '.conf' from
                                        # a directory, e.g., 'conf.d'
#include_if_exists = '...'              # include file only if it exists
#include = '...'                        # include file


#------------------------------------------------------------------------------
# CUSTOMIZED OPTIONS
#------------------------------------------------------------------------------

# Add settings for extensions here
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data#
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data# nano postgresql.conf
bash: nano: command not found
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data#
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data# vi postgresql.conf
bash: vi: command not found
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data# apt-get update
Get:1 http://deb.debian.org/debian bookworm InRelease [151 kB]
Get:2 http://deb.debian.org/debian bookworm-updates InRelease [55.4 kB]
Get:3 http://deb.debian.org/debian-security bookworm-security InRelease [48.0 kB]
Get:4 http://deb.debian.org/debian bookworm/main amd64 Packages [8,787 kB]
Get:5 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease [129 kB]
Get:6 http://deb.debian.org/debian bookworm-updates/main amd64 Packages [2,468 B]
Get:7 http://deb.debian.org/debian-security bookworm-security/main amd64 Packages [190 kB]
Get:8 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg/14 amd64 Packages [2,594 B]
Get:9 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg/main amd64 Packages [358 kB]
Fetched 9,724 kB in 2s (4,074 kB/s)
Reading package lists... Done
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data# apt-get install -y vim
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  libgpm2 libsodium23 vim-common vim-runtime xxd
Suggested packages:
  gpm ctags vim-doc vim-scripts
The following NEW packages will be installed:
  libgpm2 libsodium23 vim vim-common vim-runtime xxd
0 upgraded, 6 newly installed, 0 to remove and 0 not upgraded.
Need to get 8,976 kB of archives.
After this operation, 41.9 MB of additional disk space will be used.
Get:1 http://deb.debian.org/debian bookworm/main amd64 vim-common all 2:9.0.1378-2 [124 kB]
Get:2 http://deb.debian.org/debian bookworm/main amd64 libgpm2 amd64 1.20.7-10+b1 [14.2 kB]
Get:3 http://deb.debian.org/debian bookworm/main amd64 libsodium23 amd64 1.0.18-1 [161 kB]
Get:4 http://deb.debian.org/debian bookworm/main amd64 vim-runtime all 2:9.0.1378-2 [7,025 kB]
Get:5 http://deb.debian.org/debian bookworm/main amd64 vim amd64 2:9.0.1378-2 [1,567 kB]
Get:6 http://deb.debian.org/debian bookworm/main amd64 xxd amd64 2:9.0.1378-2 [83.7 kB]
Fetched 8,976 kB in 2s (4,272 kB/s)
debconf: delaying package configuration, since apt-utils is not installed
Selecting previously unselected package vim-common.
(Reading database ... 11940 files and directories currently installed.)
Preparing to unpack .../0-vim-common_2%3a9.0.1378-2_all.deb ...
Unpacking vim-common (2:9.0.1378-2) ...
Selecting previously unselected package libgpm2:amd64.
Preparing to unpack .../1-libgpm2_1.20.7-10+b1_amd64.deb ...
Unpacking libgpm2:amd64 (1.20.7-10+b1) ...
Selecting previously unselected package libsodium23:amd64.
Preparing to unpack .../2-libsodium23_1.0.18-1_amd64.deb ...
Unpacking libsodium23:amd64 (1.0.18-1) ...
Selecting previously unselected package vim-runtime.
Preparing to unpack .../3-vim-runtime_2%3a9.0.1378-2_all.deb ...
Adding 'diversion of /usr/share/vim/vim90/doc/help.txt to /usr/share/vim/vim90/doc/help.txt.vim-tiny by vim-runtime'
Adding 'diversion of /usr/share/vim/vim90/doc/tags to /usr/share/vim/vim90/doc/tags.vim-tiny by vim-runtime'
Unpacking vim-runtime (2:9.0.1378-2) ...
Selecting previously unselected package vim.
Preparing to unpack .../4-vim_2%3a9.0.1378-2_amd64.deb ...
Unpacking vim (2:9.0.1378-2) ...
Selecting previously unselected package xxd.
Preparing to unpack .../5-xxd_2%3a9.0.1378-2_amd64.deb ...
Unpacking xxd (2:9.0.1378-2) ...
Setting up libsodium23:amd64 (1.0.18-1) ...
Setting up libgpm2:amd64 (1.20.7-10+b1) ...
Setting up xxd (2:9.0.1378-2) ...
Setting up vim-common (2:9.0.1378-2) ...
Setting up vim-runtime (2:9.0.1378-2) ...
Setting up vim (2:9.0.1378-2) ...
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/editor (editor) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/editor.1.gz because associated file /usr/share/man/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/da/man1/editor.1.gz because associated file /usr/share/man/da/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/de/man1/editor.1.gz because associated file /usr/share/man/de/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/fr/man1/editor.1.gz because associated file /usr/share/man/fr/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/it/man1/editor.1.gz because associated file /usr/share/man/it/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ja/man1/editor.1.gz because associated file /usr/share/man/ja/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/pl/man1/editor.1.gz because associated file /usr/share/man/pl/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ru/man1/editor.1.gz because associated file /usr/share/man/ru/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/tr/man1/editor.1.gz because associated file /usr/share/man/tr/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/ex (ex) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/ex.1.gz because associated file /usr/share/man/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/da/man1/ex.1.gz because associated file /usr/share/man/da/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/de/man1/ex.1.gz because associated file /usr/share/man/de/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/fr/man1/ex.1.gz because associated file /usr/share/man/fr/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/it/man1/ex.1.gz because associated file /usr/share/man/it/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ja/man1/ex.1.gz because associated file /usr/share/man/ja/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/pl/man1/ex.1.gz because associated file /usr/share/man/pl/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ru/man1/ex.1.gz because associated file /usr/share/man/ru/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/tr/man1/ex.1.gz because associated file /usr/share/man/tr/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/rview (rview) in auto mode
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/rvim (rvim) in auto mode
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/vi (vi) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/vi.1.gz because associated file /usr/share/man/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/da/man1/vi.1.gz because associated file /usr/share/man/da/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/de/man1/vi.1.gz because associated file /usr/share/man/de/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/fr/man1/vi.1.gz because associated file /usr/share/man/fr/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/it/man1/vi.1.gz because associated file /usr/share/man/it/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ja/man1/vi.1.gz because associated file /usr/share/man/ja/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/pl/man1/vi.1.gz because associated file /usr/share/man/pl/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ru/man1/vi.1.gz because associated file /usr/share/man/ru/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/tr/man1/vi.1.gz because associated file /usr/share/man/tr/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/view (view) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/view.1.gz because associated file /usr/share/man/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/da/man1/view.1.gz because associated file /usr/share/man/da/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/de/man1/view.1.gz because associated file /usr/share/man/de/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/fr/man1/view.1.gz because associated file /usr/share/man/fr/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/it/man1/view.1.gz because associated file /usr/share/man/it/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ja/man1/view.1.gz because associated file /usr/share/man/ja/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/pl/man1/view.1.gz because associated file /usr/share/man/pl/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ru/man1/view.1.gz because associated file /usr/share/man/ru/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/tr/man1/view.1.gz because associated file /usr/share/man/tr/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/vim (vim) in auto mode
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/vimdiff (vimdiff) in auto mode
Processing triggers for libc-bin (2.36-9+deb12u8) ...
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data# vi postgresql.conf
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data# vi postgresql.conf
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data#
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data#
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data#
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data#
root@postgres-74969955f5-6pnwb:/var/lib/postgresql/data# exit
exit
[root@lab01 data]#
[root@lab01 data]# kubectl exec -it postgres-74969955f5-6pnwb -- bash^C
[root@lab01 data]# kubectl delete pod postgresql-74969955f5-6pnwb
Error from server (NotFound): pods "postgresql-74969955f5-6pnwb" not found
[root@lab01 data]# kubectl get pods
NAME                        READY   STATUS    RESTARTS   AGE
postgres-74969955f5-6pnwb   1/1     Running   0          7m10s
postgres-74969955f5-8vf2f   1/1     Running   0          7m10s
postgres-74969955f5-ltn2d   1/1     Running   0          7m10s
[root@lab01 data]# kubectl delete pod postgres-74969955f5-6pnwb
pod "postgres-74969955f5-6pnwb" deleted
[root@lab01 data]# kubectl get pods
NAME                        READY   STATUS    RESTARTS   AGE
postgres-74969955f5-8vf2f   1/1     Running   0          7m27s
postgres-74969955f5-ltn2d   1/1     Running   0          7m27s
postgres-74969955f5-z9z8s   1/1     Running   0          4s
[root@lab01 data]# kubectl exec -it postgres-74969955f5-z9z8s -- bash
root@postgres-74969955f5-z9z8s:/# cd /var/lib/postgresql/data
root@postgres-74969955f5-z9z8s:/var/lib/postgresql/data# ls -lrt
total 64
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_twophase
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_snapshots
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_serial
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_notify
drwx------. 4 postgres postgres    36 Nov  6 17:22 pg_multixact
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_dynshmem
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_commit_ts
-rw-------. 1 postgres postgres     3 Nov  6 17:22 PG_VERSION
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_tblspc
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_replslot
-rw-------. 1 postgres postgres    88 Nov  6 17:22 postgresql.auto.conf
-rw-------. 1 postgres postgres  1636 Nov  6 17:22 pg_ident.conf
drwx------. 2 postgres postgres    18 Nov  6 17:22 pg_xact
drwx------. 3 postgres postgres    60 Nov  6 17:22 pg_wal
drwx------. 2 postgres postgres    18 Nov  6 17:22 pg_subtrans
-rw-------. 1 postgres postgres  4821 Nov  6 17:22 pg_hba.conf
drwx------. 6 postgres postgres    54 Nov  6 17:22 base
-rw-------. 1 postgres postgres 28827 Nov  6 17:28 postgresql.conf
drwx------. 4 postgres postgres    68 Nov  6 17:29 pg_logical
-rw-------. 1 postgres postgres    36 Nov  6 17:29 postmaster.opts
-rw-------. 1 postgres postgres    94 Nov  6 17:29 postmaster.pid
drwx------. 2 postgres postgres     6 Nov  6 17:29 pg_stat
drwx------. 2 postgres postgres  4096 Nov  6 17:29 global
drwx------. 2 postgres postgres    63 Nov  6 17:29 pg_stat_tmp
root@postgres-74969955f5-z9z8s:/var/lib/postgresql/data# cat postgresql.conf | grep work_mem
work_mem = 10MB                         # min 64kB
#hash_mem_multiplier = 1.0              # 1-1000.0 multiplier on hash table work_mem
#maintenance_work_mem = 64MB            # min 1MB
#autovacuum_work_mem = -1               # min 1MB, or -1 to use maintenance_work_mem
#logical_decoding_work_mem = 64MB       # min 64kB
root@postgres-74969955f5-z9z8s:/var/lib/postgresql/data#
root@postgres-74969955f5-z9z8s:/var/lib/postgresql/data# kubectl get pods
bash: kubectl: command not found
root@postgres-74969955f5-z9z8s:/var/lib/postgresql/data# exit
exit
command terminated with exit code 127
[root@lab01 data]# kubectl get pods
NAME                        READY   STATUS    RESTARTS   AGE
postgres-74969955f5-8vf2f   1/1     Running   0          9m2s
postgres-74969955f5-ltn2d   1/1     Running   0          9m2s
postgres-74969955f5-z9z8s   1/1     Running   0          99s
[root@lab01 data]# kubectl get svc
NAME         TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP   10.96.0.1      <none>        443/TCP          23h
postgres     NodePort    10.97.172.86   <none>        5432:30867/TCP   8m29s
[root@lab01 data]#
[root@lab01 data]# kubectl describe statefulset postgresql
Error from server (NotFound): statefulsets.apps "postgresql" not found
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]# kubectl delete statefulset --all
No resources found
[root@lab01 data]# kubectl delete deployment --all
deployment.apps "postgres" deleted
[root@lab01 data]#
[root@lab01 data]# kubectl delete configmap --all
kubectl delete secret --all
configmap "kube-root-ca.crt" deleted
configmap "postgres-secret" deleted
configmap "postgresql-config" deleted
No resources found
[root@lab01 data]#
[root@lab01 data]#
[root@lab01 data]# kubectl delete pods --all
No resources found
[root@lab01 data]# kubectl delete pv --all
persistentvolume "postgres-volume" deleted



^C[root@lab01 data]# kubectl delete pvc --all
persistentvolumeclaim "postgres-volume-claim" deleted
[root@lab01 data]# kubectl delete pv --all
No resources found
[root@lab01 data]#
[root@lab01 data]# ls -lrt
total 32
-rw-r--r--. 1 root root 231 Nov  6 22:12 pv.yaml
-rw-r--r--. 1 root root 201 Nov  6 22:12 pvc.yaml
-rw-r--r--. 1 root root  43 Nov  6 22:14 values-postgres.yaml
-rw-r--r--. 1 root root 181 Nov  6 22:50 postgres-configmap.yaml
-rw-r--r--. 1 root root 253 Nov  6 22:51 psql-pv.yaml
-rw-r--r--. 1 root root 226 Nov  6 22:51 psql-claim.yaml
-rw-r--r--. 1 root root 684 Nov  6 22:52 ps-deployment.yaml
-rw-r--r--. 1 root root 163 Nov  6 22:53 ps-service.yaml
[root@lab01 data]# cd
[root@lab01 ~]# mkdir -p postgresql-chart
[root@lab01 ~]# cd postgresql-chart
[root@lab01 postgresql-chart]# mkdir -p charts
[root@lab01 postgresql-chart]# mkdir -p templates
[root@lab01 postgresql-chart]# vi Chart.yaml
[root@lab01 postgresql-chart]# vi values.yaml
[root@lab01 postgresql-chart]# vi values.yaml
[root@lab01 postgresql-chart]# cd templates/
[root@lab01 templates]# vi configmap.yaml
[root@lab01 templates]# cd ../
[root@lab01 postgresql-chart]# vi values.yaml
[root@lab01 postgresql-chart]# >values.yaml
[root@lab01 postgresql-chart]# vi values.yaml
[root@lab01 postgresql-chart]# cd templates/
[root@lab01 templates]# ls -lrt
total 4
-rw-r--r--. 1 root root 187 Nov  6 23:24 configmap.yaml
[root@lab01 templates]# >configmap.yaml
[root@lab01 templates]# vi configmap.yaml
[root@lab01 templates]# vi deployment.yaml
[root@lab01 templates]# vi service.yaml
[root@lab01 templates]# vi pv.yaml
[root@lab01 templates]# vi pvc.yaml
[root@lab01 templates]# ls -lrt
total 20
-rw-r--r--. 1 root root  264 Nov  6 23:25 configmap.yaml
-rw-r--r--. 1 root root 1260 Nov  6 23:25 deployment.yaml
-rw-r--r--. 1 root root  255 Nov  6 23:25 service.yaml
-rw-r--r--. 1 root root  273 Nov  6 23:26 pv.yaml
-rw-r--r--. 1 root root  262 Nov  6 23:26 pvc.yaml
[root@lab01 templates]#
[root@lab01 templates]# sl -lrt
bash: sl: command not found...
Similar command is: 'ls'
[root@lab01 templates]# ls -lrt
total 20
-rw-r--r--. 1 root root  264 Nov  6 23:25 configmap.yaml
-rw-r--r--. 1 root root 1260 Nov  6 23:25 deployment.yaml
-rw-r--r--. 1 root root  255 Nov  6 23:25 service.yaml
-rw-r--r--. 1 root root  273 Nov  6 23:26 pv.yaml
-rw-r--r--. 1 root root  262 Nov  6 23:26 pvc.yaml
[root@lab01 templates]# cd ../
[root@lab01 postgresql-chart]# ls -lrt
total 8
drwxr-xr-x. 2 root root   6 Nov  6 23:23 charts
-rw-r--r--. 1 root root 146 Nov  6 23:23 Chart.yaml
-rw-r--r--. 1 root root 623 Nov  6 23:24 values.yaml
drwxr-xr-x. 2 root root 102 Nov  6 23:26 templates
[root@lab01 postgresql-chart]# cd ../
[root@lab01 ~]# ls-l̥rt
bash: ls-l̥rt: command not found...
ls -lrt
^C
[root@lab01 ~]# ls -lrt
total 101436
-rw-------. 1 root root      1220 Mar  5  2024 anaconda-ks.cfg
drwxr-xr-x. 2 root root         6 Mar  5  2024 Videos
drwxr-xr-x. 2 root root         6 Mar  5  2024 Templates
drwxr-xr-x. 2 root root         6 Mar  5  2024 Public
drwxr-xr-x. 2 root root         6 Mar  5  2024 Pictures
drwxr-xr-x. 2 root root         6 Mar  5  2024 Music
drwxr-xr-x. 2 root root         6 Mar  5  2024 Downloads
drwxr-xr-x. 2 root root         6 Mar  5  2024 Documents
drwxr-xr-x. 2 root root         6 Mar  5  2024 Desktop
-rw-r--r--. 1 root root 103820392 Nov  5 23:48 minikube-linux-amd64
-rw-r--r--. 1 root root        43 Nov  5 23:54 values-postgres.yaml
-rw-r--r--. 1 root root       278 Nov  6 00:06 create_database.sql
-rw-r--r--. 1 root root      1889 Nov  6 00:18 data_insert_2.py
-rw-r--r--. 1 root root       525 Nov  6 00:29 data_insert.py
-rw-r--r--. 1 root root      1706 Nov  6 00:33 fake_insert.py
-rw-r--r--. 1 root root      1162 Nov  6 01:26 postgresql-deployment.yaml
-rw-r--r--. 1 root root       470 Nov  6 01:36 postgresql.conf
-rw-r--r--. 1 root root       144 Nov  6 01:37 pg_hba.conf
-rw-r--r--. 1 root root       794 Nov  6 01:38 postgresql-config.yaml
-rw-r--r--. 1 root root         0 Nov  6 01:41 my-postgresql-cluster-deployment.yaml
-rw-r--r--. 1 root root      6005 Nov  6 01:44 my-postgresql-cluster-statefulset.yaml
drwxr-xr-x. 2 root root       188 Nov  6 22:53 data
drwxr-xr-x. 4 root root        74 Nov  6 23:24 postgresql-chart
[root@lab01 ~]# helm install my-postgresql ./postgresql-chart
NAME: my-postgresql
LAST DEPLOYED: Wed Nov  6 23:26:59 2024
NAMESPACE: default
STATUS: deployed
REVISION: 1
TEST SUITE: None
[root@lab01 ~]# kubectl get pods
NAME                         READY   STATUS    RESTARTS   AGE
postgresql-b75dbb4c7-7fkdh   1/1     Running   0          10s
postgresql-b75dbb4c7-86hsc   1/1     Running   0          10s
postgresql-b75dbb4c7-tlh2x   1/1     Running   0          10s
[root@lab01 ~]# kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          23h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   33m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   15s
[root@lab01 ~]# kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          23h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   33m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   21s
[root@lab01 ~]# kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          23h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   33m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   22s
[root@lab01 ~]# kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          23h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   33m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   23s
[root@lab01 ~]# kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          23h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   33m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   23s
[root@lab01 ~]# kubectl exec -it postgresql-b75dbb4c7-7fkdh  -- cat /etc/postgresql/postgresql.conf

# Custom PostgreSQL configuration
listen_addresses = '*'
max_connections = 100
shared_buffers = 256MB
effective_cache_size = 768MB
log_directory = '/var/log/postgresql'
log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'
[root@lab01 ~]# kubectl exec -it ^C- /bash
[root@lab01 ~]# kubectl get pods
NAME                         READY   STATUS    RESTARTS   AGE
postgresql-b75dbb4c7-7fkdh   1/1     Running   0          109s
postgresql-b75dbb4c7-86hsc   1/1     Running   0          109s
postgresql-b75dbb4c7-tlh2x   1/1     Running   0          109s
[root@lab01 ~]# kubectl exec -it postgresql-b75dbb4c7-7fkdh -- /bash
OCI runtime exec failed: exec failed: unable to start container process: exec: "/bash": stat /bash: no such file or directory: unknown
command terminated with exit code 126
[root@lab01 ~]# kubectl exec -it postgresql-b75dbb4c7-7fkdh -- /bin/bash
root@postgresql-b75dbb4c7-7fkdh:/#
root@postgresql-b75dbb4c7-7fkdh:/# df -h
Filesystem           Size  Used Avail Use% Mounted on
overlay               42G   11G   31G  26% /
tmpfs                 64M     0   64M   0% /dev
shm                   64M   28K   64M   1% /dev/shm
/dev/mapper/cs-root   42G   11G   31G  26% /etc/hosts
tmpfs                3.6G   12K  3.6G   1% /run/secrets/kubernetes.io/serviceaccount
tmpfs                1.8G     0  1.8G   0% /proc/asound
tmpfs                1.8G     0  1.8G   0% /proc/acpi
tmpfs                1.8G     0  1.8G   0% /proc/scsi
tmpfs                1.8G     0  1.8G   0% /sys/firmware
root@postgresql-b75dbb4c7-7fkdh:/# cd /var/lib/postgresql/data
root@postgresql-b75dbb4c7-7fkdh:/var/lib/postgresql/data# sl -lrt
bash: sl: command not found
root@postgresql-b75dbb4c7-7fkdh:/var/lib/postgresql/data# ls -lrt
total 64
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_twophase
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_snapshots
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_serial
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_notify
drwx------. 4 postgres postgres    36 Nov  6 17:22 pg_multixact
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_dynshmem
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_commit_ts
-rw-------. 1 postgres postgres     3 Nov  6 17:22 PG_VERSION
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_tblspc
drwx------. 2 postgres postgres     6 Nov  6 17:22 pg_replslot
-rw-------. 1 postgres postgres    88 Nov  6 17:22 postgresql.auto.conf
-rw-------. 1 postgres postgres  1636 Nov  6 17:22 pg_ident.conf
drwx------. 2 postgres postgres    18 Nov  6 17:22 pg_xact
drwx------. 3 postgres postgres    60 Nov  6 17:22 pg_wal
drwx------. 2 postgres postgres    18 Nov  6 17:22 pg_subtrans
-rw-------. 1 postgres postgres  4821 Nov  6 17:22 pg_hba.conf
drwx------. 6 postgres postgres    54 Nov  6 17:22 base
-rw-------. 1 postgres postgres 28827 Nov  6 17:28 postgresql.conf
-rw-------. 1 postgres postgres    36 Nov  6 17:57 postmaster.opts
drwx------. 2 postgres postgres     6 Nov  6 17:57 pg_stat
drwx------. 4 postgres postgres    68 Nov  6 17:57 pg_logical
-rw-------. 1 postgres postgres    94 Nov  6 17:57 postmaster.pid
drwx------. 2 postgres postgres  4096 Nov  6 17:58 global
drwx------. 2 postgres postgres    63 Nov  6 17:59 pg_stat_tmp
root@postgresql-b75dbb4c7-7fkdh:/var/lib/postgresql/data# exit
exit
[root@lab01 ~]# kubectl exec -it postgres-74969955f5-6pnwb -- psql -h localhost -U ps_user --password -p 5432 ps_db
Error from server (NotFound): pods "postgres-74969955f5-6pnwb" not found
[root@lab01 ~]# kubectl exec -it postgresql-b75dbb4c7-7fkdh -- psql -h localhost -U ps_user --password -p 5432 ps_db
Password:
psql (14.13 (Debian 14.13-1.pgdg120+1))
Type "help" for help.

ps_db=#
ps_db=# \q
[root@lab01 ~]# kubectl exec -it postgresql-b75dbb4c7-7fkdh -- /bin/bash
root@postgresql-b75dbb4c7-7fkdh:/# apt-get update
Get:1 http://deb.debian.org/debian bookworm InRelease [151 kB]
Get:2 http://deb.debian.org/debian bookworm-updates InRelease [55.4 kB]
Get:3 http://deb.debian.org/debian-security bookworm-security InRelease [48.0 kB]
Get:4 http://deb.debian.org/debian bookworm/main amd64 Packages [8,787 kB]
Get:5 http://deb.debian.org/debian bookworm-updates/main amd64 Packages [2,468 B]
Get:6 http://deb.debian.org/debian-security bookworm-security/main amd64 Packages [190 kB]
Get:7 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease [129 kB]
Get:8 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg/14 amd64 Packages [2,594 B]
Get:9 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg/main amd64 Packages [358 kB]
Fetched 9,724 kB in 14s (704 kB/s)
Reading package lists... Done
root@postgresql-b75dbb4c7-7fkdh:/# apt-get install vim
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  libgpm2 libsodium23 vim-common vim-runtime xxd
Suggested packages:
  gpm ctags vim-doc vim-scripts
The following NEW packages will be installed:
  libgpm2 libsodium23 vim vim-common vim-runtime xxd
0 upgraded, 6 newly installed, 0 to remove and 0 not upgraded.
Need to get 8,976 kB of archives.
After this operation, 41.9 MB of additional disk space will be used.
Do you want to continue? [Y/n] y
Get:1 http://deb.debian.org/debian bookworm/main amd64 vim-common all 2:9.0.1378-2 [124 kB]
Get:2 http://deb.debian.org/debian bookworm/main amd64 libgpm2 amd64 1.20.7-10+b1 [14.2 kB]
Get:3 http://deb.debian.org/debian bookworm/main amd64 libsodium23 amd64 1.0.18-1 [161 kB]
Get:4 http://deb.debian.org/debian bookworm/main amd64 vim-runtime all 2:9.0.1378-2 [7,025 kB]
Get:5 http://deb.debian.org/debian bookworm/main amd64 vim amd64 2:9.0.1378-2 [1,567 kB]
Get:6 http://deb.debian.org/debian bookworm/main amd64 xxd amd64 2:9.0.1378-2 [83.7 kB]
Fetched 8,976 kB in 1s (10.6 MB/s)
debconf: delaying package configuration, since apt-utils is not installed
Selecting previously unselected package vim-common.
(Reading database ... 11940 files and directories currently installed.)
Preparing to unpack .../0-vim-common_2%3a9.0.1378-2_all.deb ...
Unpacking vim-common (2:9.0.1378-2) ...
Selecting previously unselected package libgpm2:amd64.
Preparing to unpack .../1-libgpm2_1.20.7-10+b1_amd64.deb ...
Unpacking libgpm2:amd64 (1.20.7-10+b1) ...
Selecting previously unselected package libsodium23:amd64.
Preparing to unpack .../2-libsodium23_1.0.18-1_amd64.deb ...
Unpacking libsodium23:amd64 (1.0.18-1) ...
Selecting previously unselected package vim-runtime.
Preparing to unpack .../3-vim-runtime_2%3a9.0.1378-2_all.deb ...
Adding 'diversion of /usr/share/vim/vim90/doc/help.txt to /usr/share/vim/vim90/doc/help.txt.vim-tiny by vim-runtime'
Adding 'diversion of /usr/share/vim/vim90/doc/tags to /usr/share/vim/vim90/doc/tags.vim-tiny by vim-runtime'
Unpacking vim-runtime (2:9.0.1378-2) ...
Selecting previously unselected package vim.
Preparing to unpack .../4-vim_2%3a9.0.1378-2_amd64.deb ...
Unpacking vim (2:9.0.1378-2) ...
Selecting previously unselected package xxd.
Preparing to unpack .../5-xxd_2%3a9.0.1378-2_amd64.deb ...
Unpacking xxd (2:9.0.1378-2) ...
Setting up libsodium23:amd64 (1.0.18-1) ...
Setting up libgpm2:amd64 (1.20.7-10+b1) ...
Setting up xxd (2:9.0.1378-2) ...
Setting up vim-common (2:9.0.1378-2) ...
Setting up vim-runtime (2:9.0.1378-2) ...
Setting up vim (2:9.0.1378-2) ...
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/editor (editor) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/editor.1.gz because associated file /usr/share/man/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/da/man1/editor.1.gz because associated file /usr/share/man/da/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/de/man1/editor.1.gz because associated file /usr/share/man/de/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/fr/man1/editor.1.gz because associated file /usr/share/man/fr/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/it/man1/editor.1.gz because associated file /usr/share/man/it/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ja/man1/editor.1.gz because associated file /usr/share/man/ja/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/pl/man1/editor.1.gz because associated file /usr/share/man/pl/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ru/man1/editor.1.gz because associated file /usr/share/man/ru/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/tr/man1/editor.1.gz because associated file /usr/share/man/tr/man1/vim.1.gz (of link group editor) doesn't exist
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/ex (ex) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/ex.1.gz because associated file /usr/share/man/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/da/man1/ex.1.gz because associated file /usr/share/man/da/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/de/man1/ex.1.gz because associated file /usr/share/man/de/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/fr/man1/ex.1.gz because associated file /usr/share/man/fr/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/it/man1/ex.1.gz because associated file /usr/share/man/it/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ja/man1/ex.1.gz because associated file /usr/share/man/ja/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/pl/man1/ex.1.gz because associated file /usr/share/man/pl/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ru/man1/ex.1.gz because associated file /usr/share/man/ru/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/tr/man1/ex.1.gz because associated file /usr/share/man/tr/man1/vim.1.gz (of link group ex) doesn't exist
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/rview (rview) in auto mode
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/rvim (rvim) in auto mode
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/vi (vi) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/vi.1.gz because associated file /usr/share/man/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/da/man1/vi.1.gz because associated file /usr/share/man/da/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/de/man1/vi.1.gz because associated file /usr/share/man/de/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/fr/man1/vi.1.gz because associated file /usr/share/man/fr/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/it/man1/vi.1.gz because associated file /usr/share/man/it/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ja/man1/vi.1.gz because associated file /usr/share/man/ja/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/pl/man1/vi.1.gz because associated file /usr/share/man/pl/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ru/man1/vi.1.gz because associated file /usr/share/man/ru/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/tr/man1/vi.1.gz because associated file /usr/share/man/tr/man1/vim.1.gz (of link group vi) doesn't exist
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/view (view) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/view.1.gz because associated file /usr/share/man/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/da/man1/view.1.gz because associated file /usr/share/man/da/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/de/man1/view.1.gz because associated file /usr/share/man/de/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/fr/man1/view.1.gz because associated file /usr/share/man/fr/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/it/man1/view.1.gz because associated file /usr/share/man/it/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ja/man1/view.1.gz because associated file /usr/share/man/ja/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/pl/man1/view.1.gz because associated file /usr/share/man/pl/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/ru/man1/view.1.gz because associated file /usr/share/man/ru/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: warning: skip creation of /usr/share/man/tr/man1/view.1.gz because associated file /usr/share/man/tr/man1/vim.1.gz (of link group view) doesn't exist
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/vim (vim) in auto mode
update-alternatives: using /usr/bin/vim.basic to provide /usr/bin/vimdiff (vimdiff) in auto mode
Processing triggers for libc-bin (2.36-9+deb12u8) ...
root@postgresql-b75dbb4c7-7fkdh:/#
root@postgresql-b75dbb4c7-7fkdh:/#
root@postgresql-b75dbb4c7-7fkdh:/#
root@postgresql-b75dbb4c7-7fkdh:/# exit
exit
[root@lab01 ~]# kubectl get pods
NAME                         READY   STATUS    RESTARTS   AGE
postgresql-b75dbb4c7-7fkdh   1/1     Running   0          14m
postgresql-b75dbb4c7-86hsc   1/1     Running   0          14m
postgresql-b75dbb4c7-tlh2x   1/1     Running   0          14m
[root@lab01 ~]# kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          23h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   48m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   14m
[root@lab01 ~]#
[root@lab01 ~]# kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          23h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   48m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   14m
[root@lab01 ~]# kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          23h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   48m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   14m
[root@lab01 ~]# kubectl apply -f https://raw.githubusercontent.com/metallb/metallb/master/manifests/metallb.yaml
error: unable to read URL "https://raw.githubusercontent.com/metallb/metallb/master/manifests/metallb.yaml", server reported 404 Not Found, status code=404
[root@lab01 ~]# kubectl apply -f https://raw.githubusercontent.com/metallb/metallb/v0.13.7/manifests/metallb.yaml
error: unable to read URL "https://raw.githubusercontent.com/metallb/metallb/v0.13.7/manifests/metallb.yaml", server reported 404 Not Found, status code=404
[root@lab01 ~]# kubectl apply -f https://github.com/metallb/metallb/blob/main/config/manifests/metallb-native.yaml
error: error parsing https://github.com/metallb/metallb/blob/main/config/manifests/metallb-native.yaml: error converting YAML to JSON: yaml: line 214: mapping values are not allowed in this context
[root@lab01 ~]# kubectl apply -f https://raw.githubusercontent.com/metallb/metallb/main/config/manifests/metallb-native.yaml
namespace/metallb-system created
customresourcedefinition.apiextensions.k8s.io/bfdprofiles.metallb.io created
customresourcedefinition.apiextensions.k8s.io/bgpadvertisements.metallb.io created
customresourcedefinition.apiextensions.k8s.io/bgppeers.metallb.io created
customresourcedefinition.apiextensions.k8s.io/communities.metallb.io created
customresourcedefinition.apiextensions.k8s.io/ipaddresspools.metallb.io created
customresourcedefinition.apiextensions.k8s.io/l2advertisements.metallb.io created
customresourcedefinition.apiextensions.k8s.io/servicel2statuses.metallb.io created
serviceaccount/controller created
serviceaccount/speaker created
role.rbac.authorization.k8s.io/controller created
role.rbac.authorization.k8s.io/pod-lister created
clusterrole.rbac.authorization.k8s.io/metallb-system:controller created
clusterrole.rbac.authorization.k8s.io/metallb-system:speaker created
rolebinding.rbac.authorization.k8s.io/controller created
rolebinding.rbac.authorization.k8s.io/pod-lister created
clusterrolebinding.rbac.authorization.k8s.io/metallb-system:controller created
clusterrolebinding.rbac.authorization.k8s.io/metallb-system:speaker created
configmap/metallb-excludel2 created
secret/metallb-webhook-cert created
service/metallb-webhook-service created
deployment.apps/controller created
daemonset.apps/speaker created
validatingwebhookconfiguration.admissionregistration.k8s.io/metallb-webhook-configuration created
[root@lab01 ~]# kubectl get pods -n metallb-system
NAME                         READY   STATUS              RESTARTS   AGE
controller-8b7b6bf6b-nmhc4   0/1     ContainerCreating   0          17s
speaker-tkn5c                0/1     ContainerCreating   0          17s
[root@lab01 ~]# vi metallb-config.yaml
[root@lab01 ~]# vi metallb-config.yaml
[root@lab01 ~]# minikube ip
192.168.49.2
[root@lab01 ~]# vi metallb-config.yaml
[root@lab01 ~]# kubectl apply -f metallb-config.yaml
configmap/config created
[root@lab01 ~]# kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          23h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   55m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   22m
[root@lab01 ~]# kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          23h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   56m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   22m
[root@lab01 ~]# kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          23h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   56m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   22m
[root@lab01 ~]# kubectl get pods -n metallb-system
NAME                         READY   STATUS    RESTARTS   AGE
controller-8b7b6bf6b-nmhc4   1/1     Running   0          3m3s
speaker-tkn5c                1/1     Running   0          3m3s
[root@lab01 ~]# kubectl get configmap -n metallb-system config -o yaml
apiVersion: v1
data:
  config: |
    address-pools:
    - name: default
      protocol: layer2
      addresses:
      - 192.168.1.1-192.168.255.250  # Adjust to a range of IPs in your network
kind: ConfigMap
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"v1","data":{"config":"address-pools:\n- name: default\n  protocol: layer2\n  addresses:\n  - 192.168.1.1-192.168.255.250  # Adjust to a range of IPs in your network\n"},"kind":"ConfigMap","metadata":{"annotations":{},"name":"config","namespace":"metallb-system"}}
  creationTimestamp: "2024-11-06T18:19:18Z"
  name: config
  namespace: metallb-system
  resourceVersion: "34031"
  uid: 2022fa48-f1e4-4de5-a880-30fe7736cfc9
[root@lab01 ~]# vi metallb-config.yaml
[root@lab01 ~]# kubectl delete pod -n metallb-system -l app=metallb
pod "controller-8b7b6bf6b-nmhc4" deleted
pod "speaker-tkn5c" deleted
[root@lab01 ~]#
[root@lab01 ~]# kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          24h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   58m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   24m
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# minikube ip
192.168.49.2
[root@lab01 ~]# vi metallb-config.yaml
[root@lab01 ~]# kubectl delete pod -n metallb-system -l app=metallb
pod "controller-8b7b6bf6b-9q9kr" deleted
pod "speaker-4v78s" deleted
[root@lab01 ~]#
[root@lab01 ~]# kubectl apply -f metallb-config.yaml
configmap/config configured
[root@lab01 ~]# kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          24h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   59m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   26m
[root@lab01 ~]# kubectl logs -n metallb-system controller-8b7b6bf6b-9q9kr
error: error from server (NotFound): pods "controller-8b7b6bf6b-9q9kr" not found in namespace "metallb-system"
[root@lab01 ~]# kubectl get pods -n metallb-system
NAME                         READY   STATUS    RESTARTS   AGE
controller-8b7b6bf6b-ktfbw   1/1     Running   0          50s
speaker-wv4lq                1/1     Running   0          50s
[root@lab01 ~]# kubectl logs -n metallb-system controller-8b7b6bf6b-ktfbw
{"branch":"dev","caller":"main.go:178","commit":"dev","goversion":"gc / go1.22.7 / amd64","level":"info","msg":"MetalLB controller starting (commit dev, branch dev)","ts":"2024-11-06T18:22:53Z","version":""}
{"action":"setting up cert rotation","caller":"webhook.go:31","level":"info","op":"startup","ts":"2024-11-06T18:22:53Z"}
{"caller":"k8s.go:423","level":"info","msg":"Starting Manager","op":"Run","ts":"2024-11-06T18:22:53Z"}
{"level":"info","ts":"2024-11-06T18:22:53Z","logger":"cert-rotation","msg":"starting cert rotator controller","stacktrace":"github.com/open-policy-agent/cert-controller/pkg/rotator.(*CertRotator).Start\n\t/go/pkg/mod/github.com/open-policy-agent/cert-controller@v0.10.2-0.20240531181455-2649f121ab97/pkg/rotator/rotator.go:276\nsigs.k8s.io/controller-runtime/pkg/manager.(*runnableGroup).reconcile.func1\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/manager/runnable_group.go:226"}
{"level":"info","ts":"2024-11-06T18:22:53Z","msg":"Starting EventSource","controller":"cert-rotator","source":"kind source: *v1.Secret","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start.func2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:175\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:231\nsigs.k8s.io/controller-runtime/pkg/manager.(*runnableGroup).reconcile.func1\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/manager/runnable_group.go:226"}
{"level":"info","ts":"2024-11-06T18:22:53Z","msg":"Starting EventSource","controller":"cert-rotator","source":"kind source: *unstructured.Unstructured","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start.func2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:175\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:231\nsigs.k8s.io/controller-runtime/pkg/manager.(*runnableGroup).reconcile.func1\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/manager/runnable_group.go:226"}
{"level":"info","ts":"2024-11-06T18:22:53Z","msg":"Starting EventSource","controller":"cert-rotator","source":"kind source: *unstructured.Unstructured","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start.func2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:175\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:231\nsigs.k8s.io/controller-runtime/pkg/manager.(*runnableGroup).reconcile.func1\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/manager/runnable_group.go:226"}
{"level":"info","ts":"2024-11-06T18:22:53Z","msg":"Starting Controller","controller":"cert-rotator","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start.func2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:183\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:231\nsigs.k8s.io/controller-runtime/pkg/manager.(*runnableGroup).reconcile.func1\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/manager/runnable_group.go:226"}
{"level":"info","ts":"2024-11-06T18:22:53Z","msg":"Starting EventSource","controller":"ipaddresspool","controllerGroup":"metallb.io","controllerKind":"IPAddressPool","source":"kind source: *v1beta1.IPAddressPool","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start.func2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:175\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:231\nsigs.k8s.io/controller-runtime/pkg/manager.(*runnableGroup).reconcile.func1\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/manager/runnable_group.go:226"}
{"level":"info","ts":"2024-11-06T18:22:53Z","msg":"Starting EventSource","controller":"ipaddresspool","controllerGroup":"metallb.io","controllerKind":"IPAddressPool","source":"kind source: *v1beta1.Community","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start.func2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:175\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:231\nsigs.k8s.io/controller-runtime/pkg/manager.(*runnableGroup).reconcile.func1\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/manager/runnable_group.go:226"}
{"level":"info","ts":"2024-11-06T18:22:53Z","msg":"Starting EventSource","controller":"ipaddresspool","controllerGroup":"metallb.io","controllerKind":"IPAddressPool","source":"kind source: *v1.Namespace","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start.func2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:175\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:231\nsigs.k8s.io/controller-runtime/pkg/manager.(*runnableGroup).reconcile.func1\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/manager/runnable_group.go:226"}
{"level":"info","ts":"2024-11-06T18:22:53Z","msg":"Starting Controller","controller":"ipaddresspool","controllerGroup":"metallb.io","controllerKind":"IPAddressPool","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start.func2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:183\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:231\nsigs.k8s.io/controller-runtime/pkg/manager.(*runnableGroup).reconcile.func1\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/manager/runnable_group.go:226"}
{"level":"info","ts":"2024-11-06T18:22:53Z","msg":"Starting EventSource","controller":"service","controllerGroup":"","controllerKind":"Service","source":"kind source: *v1.Service","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start.func2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:175\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:231\nsigs.k8s.io/controller-runtime/pkg/manager.(*runnableGroup).reconcile.func1\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/manager/runnable_group.go:226"}
{"level":"info","ts":"2024-11-06T18:22:53Z","msg":"Starting EventSource","controller":"service","controllerGroup":"","controllerKind":"Service","source":"channel source: 0xc0001eb030","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start.func2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:175\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:231\nsigs.k8s.io/controller-runtime/pkg/manager.(*runnableGroup).reconcile.func1\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/manager/runnable_group.go:226"}
{"level":"info","ts":"2024-11-06T18:22:53Z","msg":"Starting Controller","controller":"service","controllerGroup":"","controllerKind":"Service","stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start.func2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:183\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:231\nsigs.k8s.io/controller-runtime/pkg/manager.(*runnableGroup).reconcile.func1\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/manager/runnable_group.go:226"}
{"level":"info","ts":"2024-11-06T18:22:53Z","logger":"cert-rotation","msg":"no cert refresh needed","stacktrace":"github.com/open-policy-agent/cert-controller/pkg/rotator.(*CertRotator).refreshCertIfNeeded.func1\n\t/go/pkg/mod/github.com/open-policy-agent/cert-controller@v0.10.2-0.20240531181455-2649f121ab97/pkg/rotator/rotator.go:347\nk8s.io/apimachinery/pkg/util/wait.runConditionWithCrashProtection\n\t/go/pkg/mod/k8s.io/apimachinery@v0.31.1/pkg/util/wait/wait.go:145\nk8s.io/apimachinery/pkg/util/wait.ExponentialBackoff\n\t/go/pkg/mod/k8s.io/apimachinery@v0.31.1/pkg/util/wait/backoff.go:461\ngithub.com/open-policy-agent/cert-controller/pkg/rotator.(*CertRotator).refreshCertIfNeeded\n\t/go/pkg/mod/github.com/open-policy-agent/cert-controller@v0.10.2-0.20240531181455-2649f121ab97/pkg/rotator/rotator.go:350\ngithub.com/open-policy-agent/cert-controller/pkg/rotator.(*CertRotator).Start\n\t/go/pkg/mod/github.com/open-policy-agent/cert-controller@v0.10.2-0.20240531181455-2649f121ab97/pkg/rotator/rotator.go:278\nsigs.k8s.io/controller-runtime/pkg/manager.(*runnableGroup).reconcile.func1\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/manager/runnable_group.go:226"}
{"level":"info","ts":"2024-11-06T18:22:53Z","logger":"cert-rotation","msg":"certs are ready in /tmp/k8s-webhook-server/serving-certs","stacktrace":"github.com/open-policy-agent/cert-controller/pkg/rotator.(*CertRotator).ensureCertsMounted\n\t/go/pkg/mod/github.com/open-policy-agent/cert-controller@v0.10.2-0.20240531181455-2649f121ab97/pkg/rotator/rotator.go:866"}
{"level":"info","ts":"2024-11-06T18:22:53Z","msg":"Starting workers","controller":"ipaddresspool","controllerGroup":"metallb.io","controllerKind":"IPAddressPool","worker count":1,"stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start.func2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:217\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:231\nsigs.k8s.io/controller-runtime/pkg/manager.(*runnableGroup).reconcile.func1\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/manager/runnable_group.go:226"}
{"level":"info","ts":"2024-11-06T18:22:53Z","msg":"Starting workers","controller":"service","controllerGroup":"","controllerKind":"Service","worker count":1,"stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start.func2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:217\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:231\nsigs.k8s.io/controller-runtime/pkg/manager.(*runnableGroup).reconcile.func1\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/manager/runnable_group.go:226"}
{"level":"info","ts":"2024-11-06T18:22:53Z","msg":"Starting workers","controller":"cert-rotator","worker count":1,"stacktrace":"sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start.func2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:217\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:231\nsigs.k8s.io/controller-runtime/pkg/manager.(*runnableGroup).reconcile.func1\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/manager/runnable_group.go:226"}
{"caller":"pool_controller.go:48","controller":"PoolReconciler","level":"info","start reconcile":"/default","ts":"2024-11-06T18:22:53Z"}
{"level":"info","ts":"2024-11-06T18:22:53Z","logger":"cert-rotation","msg":"no cert refresh needed","stacktrace":"github.com/open-policy-agent/cert-controller/pkg/rotator.(*CertRotator).refreshCertIfNeeded.func1\n\t/go/pkg/mod/github.com/open-policy-agent/cert-controller@v0.10.2-0.20240531181455-2649f121ab97/pkg/rotator/rotator.go:347\nk8s.io/apimachinery/pkg/util/wait.runConditionWithCrashProtection\n\t/go/pkg/mod/k8s.io/apimachinery@v0.31.1/pkg/util/wait/wait.go:145\nk8s.io/apimachinery/pkg/util/wait.ExponentialBackoff\n\t/go/pkg/mod/k8s.io/apimachinery@v0.31.1/pkg/util/wait/backoff.go:461\ngithub.com/open-policy-agent/cert-controller/pkg/rotator.(*CertRotator).refreshCertIfNeeded\n\t/go/pkg/mod/github.com/open-policy-agent/cert-controller@v0.10.2-0.20240531181455-2649f121ab97/pkg/rotator/rotator.go:350\ngithub.com/open-policy-agent/cert-controller/pkg/rotator.(*ReconcileWH).Reconcile\n\t/go/pkg/mod/github.com/open-policy-agent/cert-controller@v0.10.2-0.20240531181455-2649f121ab97/pkg/rotator/rotator.go:765\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Reconcile\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:116\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:303\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:263\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:224"}
{"level":"info","ts":"2024-11-06T18:22:53Z","logger":"cert-rotation","msg":"Ensuring CA cert","name":"metallb-webhook-configuration","gvk":"admissionregistration.k8s.io/v1, Kind=ValidatingWebhookConfiguration","name":"metallb-webhook-configuration","gvk":"admissionregistration.k8s.io/v1, Kind=ValidatingWebhookConfiguration","stacktrace":"github.com/open-policy-agent/cert-controller/pkg/rotator.(*ReconcileWH).ensureCerts\n\t/go/pkg/mod/github.com/open-policy-agent/cert-controller@v0.10.2-0.20240531181455-2649f121ab97/pkg/rotator/rotator.go:827\ngithub.com/open-policy-agent/cert-controller/pkg/rotator.(*ReconcileWH).Reconcile\n\t/go/pkg/mod/github.com/open-policy-agent/cert-controller@v0.10.2-0.20240531181455-2649f121ab97/pkg/rotator/rotator.go:784\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Reconcile\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:116\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:303\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:263\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:224"}
{"caller":"pool_controller.go:99","controller":"PoolReconciler","event":"force service reload","level":"info","ts":"2024-11-06T18:22:53Z"}
{"caller":"pool_controller.go:112","controller":"PoolReconciler","event":"config reloaded","level":"info","ts":"2024-11-06T18:22:53Z"}
{"caller":"pool_controller.go:113","controller":"PoolReconciler","end reconcile":"/default","level":"info","ts":"2024-11-06T18:22:53Z"}
{"caller":"pool_controller.go:48","controller":"PoolReconciler","level":"info","start reconcile":"/kube-node-lease","ts":"2024-11-06T18:22:53Z"}
{"caller":"pool_controller.go:88","controller":"PoolReconciler","end reconcile":"/kube-node-lease","level":"info","ts":"2024-11-06T18:22:53Z"}
{"caller":"pool_controller.go:48","controller":"PoolReconciler","level":"info","start reconcile":"/kube-public","ts":"2024-11-06T18:22:53Z"}
{"caller":"pool_controller.go:88","controller":"PoolReconciler","end reconcile":"/kube-public","level":"info","ts":"2024-11-06T18:22:53Z"}
{"caller":"pool_controller.go:48","controller":"PoolReconciler","level":"info","start reconcile":"/kube-system","ts":"2024-11-06T18:22:53Z"}
{"caller":"pool_controller.go:88","controller":"PoolReconciler","end reconcile":"/kube-system","level":"info","ts":"2024-11-06T18:22:53Z"}
{"caller":"service_controller.go:64","controller":"ServiceReconciler","level":"info","start reconcile":"default/kubernetes","ts":"2024-11-06T18:22:53Z"}
{"caller":"pool_controller.go:48","controller":"PoolReconciler","level":"info","start reconcile":"/metallb-system","ts":"2024-11-06T18:22:53Z"}
{"caller":"pool_controller.go:88","controller":"PoolReconciler","end reconcile":"/metallb-system","level":"info","ts":"2024-11-06T18:22:53Z"}
{"caller":"service_controller.go:72","controller":"ServiceReconciler","end reconcile":"default/kubernetes","level":"info","ts":"2024-11-06T18:22:53Z"}
{"caller":"service_controller.go:64","controller":"ServiceReconciler","level":"info","start reconcile":"default/postgres","ts":"2024-11-06T18:22:53Z"}
{"caller":"service_controller.go:72","controller":"ServiceReconciler","end reconcile":"default/postgres","level":"info","ts":"2024-11-06T18:22:53Z"}
{"caller":"service_controller.go:64","controller":"ServiceReconciler","level":"info","start reconcile":"default/postgresql","ts":"2024-11-06T18:22:53Z"}
{"caller":"service_controller.go:72","controller":"ServiceReconciler","end reconcile":"default/postgresql","level":"info","ts":"2024-11-06T18:22:53Z"}
{"caller":"service_controller.go:64","controller":"ServiceReconciler","level":"info","start reconcile":"kube-system/kube-dns","ts":"2024-11-06T18:22:53Z"}
{"caller":"service_controller.go:72","controller":"ServiceReconciler","end reconcile":"kube-system/kube-dns","level":"info","ts":"2024-11-06T18:22:53Z"}
{"caller":"service_controller.go:64","controller":"ServiceReconciler","level":"info","start reconcile":"metallb-system/metallb-webhook-service","ts":"2024-11-06T18:22:53Z"}
{"caller":"service_controller.go:72","controller":"ServiceReconciler","end reconcile":"metallb-system/metallb-webhook-service","level":"info","ts":"2024-11-06T18:22:53Z"}
{"caller":"service_controller_reload.go:63","controller":"ServiceReconciler - reprocessAll","level":"info","start reconcile":"metallbreload/reload","ts":"2024-11-06T18:22:53Z"}
{"caller":"service_controller_reload.go:108","controller":"ServiceReconciler - reprocessAll","endpoints":"[]","event":"failed to handle service, no retry","level":"error","name":"default/postgresql","service":"{\"kind\":\"Service\",\"apiVersion\":\"v1\",\"metadata\":{\"name\":\"postgresql\",\"namespace\":\"default\",\"uid\":\"7c9ef209-6cbd-4190-a20f-82961985aabc\",\"resourceVersion\":\"32805\",\"creationTimestamp\":\"2024-11-06T17:56:59Z\",\"labels\":{\"app\":\"postgresql\",\"app.kubernetes.io/managed-by\":\"Helm\"},\"annotations\":{\"meta.helm.sh/release-name\":\"my-postgresql\",\"meta.helm.sh/release-namespace\":\"default\"},\"managedFields\":[{\"manager\":\"helm\",\"operation\":\"Update\",\"apiVersion\":\"v1\",\"time\":\"2024-11-06T17:56:59Z\",\"fieldsType\":\"FieldsV1\",\"fieldsV1\":{\"f:metadata\":{\"f:annotations\":{\".\":{},\"f:meta.helm.sh/release-name\":{},\"f:meta.helm.sh/release-namespace\":{}},\"f:labels\":{\".\":{},\"f:app\":{},\"f:app.kubernetes.io/managed-by\":{}}},\"f:spec\":{\"f:allocateLoadBalancerNodePorts\":{},\"f:externalTrafficPolicy\":{},\"f:internalTrafficPolicy\":{},\"f:ports\":{\".\":{},\"k:{\\\"port\\\":5432,\\\"protocol\\\":\\\"TCP\\\"}\":{\".\":{},\"f:port\":{},\"f:protocol\":{},\"f:targetPort\":{}}},\"f:selector\":{},\"f:sessionAffinity\":{},\"f:type\":{}}}}]},\"spec\":{\"ports\":[{\"protocol\":\"TCP\",\"port\":5432,\"targetPort\":5432,\"nodePort\":31385}],\"selector\":{\"app\":\"postgresql\"},\"clusterIP\":\"10.102.5.81\",\"clusterIPs\":[\"10.102.5.81\"],\"type\":\"LoadBalancer\",\"sessionAffinity\":\"None\",\"externalTrafficPolicy\":\"Cluster\",\"ipFamilies\":[\"IPv4\"],\"ipFamilyPolicy\":\"SingleStack\",\"allocateLoadBalancerNodePorts\":true,\"internalTrafficPolicy\":\"Cluster\"},\"status\":{\"loadBalancer\":{}}}","ts":"2024-11-06T18:22:53Z"}
{"caller":"service_controller_reload.go:119","controller":"ServiceReconciler - reprocessAll","end reconcile":"metallbreload/reload","level":"info","ts":"2024-11-06T18:22:53Z"}
{"level":"info","ts":"2024-11-06T18:22:53Z","logger":"cert-rotation","msg":"Ensuring CA cert","name":"bgppeers.metallb.io","gvk":"apiextensions.k8s.io/v1, Kind=CustomResourceDefinition","name":"bgppeers.metallb.io","gvk":"apiextensions.k8s.io/v1, Kind=CustomResourceDefinition","stacktrace":"github.com/open-policy-agent/cert-controller/pkg/rotator.(*ReconcileWH).ensureCerts\n\t/go/pkg/mod/github.com/open-policy-agent/cert-controller@v0.10.2-0.20240531181455-2649f121ab97/pkg/rotator/rotator.go:827\ngithub.com/open-policy-agent/cert-controller/pkg/rotator.(*ReconcileWH).Reconcile\n\t/go/pkg/mod/github.com/open-policy-agent/cert-controller@v0.10.2-0.20240531181455-2649f121ab97/pkg/rotator/rotator.go:784\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Reconcile\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:116\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).reconcileHandler\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:303\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).processNextWorkItem\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:263\nsigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller[...]).Start.func2.2\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/internal/controller/controller.go:224"}
{"level":"info","ts":"2024-11-06T18:22:55Z","logger":"cert-rotation","msg":"CA certs are injected to webhooks","stacktrace":"github.com/open-policy-agent/cert-controller/pkg/rotator.(*CertRotator).ensureReady\n\t/go/pkg/mod/github.com/open-policy-agent/cert-controller@v0.10.2-0.20240531181455-2649f121ab97/pkg/rotator/rotator.go:886"}
{"action":"webhooks enabled","caller":"webhook.go:53","level":"info","op":"startup","ts":"2024-11-06T18:22:55Z"}
{"level":"info","ts":"2024-11-06T18:22:55Z","logger":"controller-runtime.webhook","msg":"Starting webhook server","stacktrace":"sigs.k8s.io/controller-runtime/pkg/webhook.(*DefaultServer).Start\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/webhook/server.go:191\nsigs.k8s.io/controller-runtime/pkg/manager.(*runnableGroup).reconcile.func1\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/manager/runnable_group.go:226"}
{"level":"info","ts":"2024-11-06T18:22:55Z","logger":"controller-runtime.webhook","msg":"Registering webhook","path":"/validate-metallb-io-v1beta1-ipaddresspool","stacktrace":"sigs.k8s.io/controller-runtime/pkg/webhook.(*DefaultServer).Register\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/webhook/server.go:183\ngo.universe.tf/metallb/internal/k8s/webhooks/webhookv1beta1.(*IPAddressPoolValidator).SetupWebhookWithManager\n\t/go/go.universe.tf/metallb/internal/k8s/webhooks/webhookv1beta1/ipaddresspool_webhook.go:41\ngo.universe.tf/metallb/internal/k8s.enableWebhook\n\t/go/go.universe.tf/metallb/internal/k8s/webhook.go:65\ngo.universe.tf/metallb/internal/k8s.New.func3\n\t/go/go.universe.tf/metallb/internal/k8s/k8s.go:306"}
{"level":"info","ts":"2024-11-06T18:22:55Z","logger":"controller-runtime.certwatcher","msg":"Updated current TLS certificate","stacktrace":"sigs.k8s.io/controller-runtime/pkg/certwatcher.(*CertWatcher).ReadCertificate\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/certwatcher/certwatcher.go:161\nsigs.k8s.io/controller-runtime/pkg/certwatcher.New\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/certwatcher/certwatcher.go:62\nsigs.k8s.io/controller-runtime/pkg/webhook.(*DefaultServer).Start\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/webhook/server.go:207\nsigs.k8s.io/controller-runtime/pkg/manager.(*runnableGroup).reconcile.func1\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/manager/runnable_group.go:226"}
{"level":"info","ts":"2024-11-06T18:22:55Z","logger":"controller-runtime.webhook","msg":"Registering webhook","path":"/validate-metallb-io-v1beta2-bgppeer","stacktrace":"sigs.k8s.io/controller-runtime/pkg/webhook.(*DefaultServer).Register\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/webhook/server.go:183\ngo.universe.tf/metallb/internal/k8s/webhooks/webhookv1beta2.(*BGPPeerValidator).SetupWebhookWithManager\n\t/go/go.universe.tf/metallb/internal/k8s/webhooks/webhookv1beta2/bgppeer_webhook.go:41\ngo.universe.tf/metallb/internal/k8s.enableWebhook\n\t/go/go.universe.tf/metallb/internal/k8s/webhook.go:70\ngo.universe.tf/metallb/internal/k8s.New.func3\n\t/go/go.universe.tf/metallb/internal/k8s/k8s.go:306"}
{"level":"info","ts":"2024-11-06T18:22:55Z","logger":"controller-runtime.webhook","msg":"Serving webhook server","host":"","port":9443,"stacktrace":"sigs.k8s.io/controller-runtime/pkg/webhook.(*DefaultServer).Start\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/webhook/server.go:242\nsigs.k8s.io/controller-runtime/pkg/manager.(*runnableGroup).reconcile.func1\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/manager/runnable_group.go:226"}
{"level":"info","ts":"2024-11-06T18:22:55Z","logger":"controller-runtime.certwatcher","msg":"Starting certificate watcher","stacktrace":"sigs.k8s.io/controller-runtime/pkg/certwatcher.(*CertWatcher).Start\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/certwatcher/certwatcher.go:115\nsigs.k8s.io/controller-runtime/pkg/webhook.(*DefaultServer).Start.func1\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/webhook/server.go:214"}
{"level":"info","ts":"2024-11-06T18:22:55Z","logger":"controller-runtime.webhook","msg":"Registering webhook","path":"/validate-metallb-io-v1beta1-bgpadvertisement","stacktrace":"sigs.k8s.io/controller-runtime/pkg/webhook.(*DefaultServer).Register\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/webhook/server.go:183\ngo.universe.tf/metallb/internal/k8s/webhooks/webhookv1beta1.(*BGPAdvertisementValidator).SetupWebhookWithManager\n\t/go/go.universe.tf/metallb/internal/k8s/webhooks/webhookv1beta1/bgpadvertisement_webhook.go:42\ngo.universe.tf/metallb/internal/k8s.enableWebhook\n\t/go/go.universe.tf/metallb/internal/k8s/webhook.go:75\ngo.universe.tf/metallb/internal/k8s.New.func3\n\t/go/go.universe.tf/metallb/internal/k8s/k8s.go:306"}
{"level":"info","ts":"2024-11-06T18:22:55Z","logger":"controller-runtime.webhook","msg":"Registering webhook","path":"/validate-metallb-io-v1beta1-l2advertisement","stacktrace":"sigs.k8s.io/controller-runtime/pkg/webhook.(*DefaultServer).Register\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/webhook/server.go:183\ngo.universe.tf/metallb/internal/k8s/webhooks/webhookv1beta1.(*L2AdvertisementValidator).SetupWebhookWithManager\n\t/go/go.universe.tf/metallb/internal/k8s/webhooks/webhookv1beta1/l2advertisement_webhook.go:41\ngo.universe.tf/metallb/internal/k8s.enableWebhook\n\t/go/go.universe.tf/metallb/internal/k8s/webhook.go:80\ngo.universe.tf/metallb/internal/k8s.New.func3\n\t/go/go.universe.tf/metallb/internal/k8s/k8s.go:306"}
{"level":"info","ts":"2024-11-06T18:22:55Z","logger":"controller-runtime.webhook","msg":"Registering webhook","path":"/validate-metallb-io-v1beta1-community","stacktrace":"sigs.k8s.io/controller-runtime/pkg/webhook.(*DefaultServer).Register\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/webhook/server.go:183\ngo.universe.tf/metallb/internal/k8s/webhooks/webhookv1beta1.(*CommunityValidator).SetupWebhookWithManager\n\t/go/go.universe.tf/metallb/internal/k8s/webhooks/webhookv1beta1/community_webhook.go:41\ngo.universe.tf/metallb/internal/k8s.enableWebhook\n\t/go/go.universe.tf/metallb/internal/k8s/webhook.go:85\ngo.universe.tf/metallb/internal/k8s.New.func3\n\t/go/go.universe.tf/metallb/internal/k8s/k8s.go:306"}
{"level":"info","ts":"2024-11-06T18:22:55Z","logger":"controller-runtime.webhook","msg":"Registering webhook","path":"/validate-metallb-io-v1beta1-bfdprofile","stacktrace":"sigs.k8s.io/controller-runtime/pkg/webhook.(*DefaultServer).Register\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/webhook/server.go:183\ngo.universe.tf/metallb/internal/k8s/webhooks/webhookv1beta1.(*BFDProfileValidator).SetupWebhookWithManager\n\t/go/go.universe.tf/metallb/internal/k8s/webhooks/webhookv1beta1/bfdprofile_webhook.go:40\ngo.universe.tf/metallb/internal/k8s.enableWebhook\n\t/go/go.universe.tf/metallb/internal/k8s/webhook.go:90\ngo.universe.tf/metallb/internal/k8s.New.func3\n\t/go/go.universe.tf/metallb/internal/k8s/k8s.go:306"}
{"level":"info","ts":"2024-11-06T18:22:55Z","logger":"controller-runtime.webhook","msg":"Registering webhook","path":"/convert","stacktrace":"sigs.k8s.io/controller-runtime/pkg/webhook.(*DefaultServer).Register\n\t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.19.0/pkg/webhook/server.go:183\ngo.universe.tf/metallb/internal/k8s.enableWebhook\n\t/go/go.universe.tf/metallb/internal/k8s/webhook.go:96\ngo.universe.tf/metallb/internal/k8s.New.func3\n\t/go/go.universe.tf/metallb/internal/k8s/k8s.go:306"}
[root@lab01 ~]# kubectl get pods -n metallb-system
NAME                         READY   STATUS    RESTARTS   AGE
controller-8b7b6bf6b-ktfbw   1/1     Running   0          60s
speaker-wv4lq                1/1     Running   0          60s
[root@lab01 ~]# kubectl logs -n speaker-wv4lq
error: expected 'logs [-f] [-p] (POD | TYPE/NAME) [-c CONTAINER]'.
POD or TYPE/NAME is a required argument for the logs command
See 'kubectl logs -h' for help and examples
[root@lab01 ~]#
[root@lab01 ~]# kubectl logs -h
Print the logs for a container in a pod or specified resource. If the pod has only one container, the container name is
optional.

Examples:
  # Return snapshot logs from pod nginx with only one container
  kubectl logs nginx

  # Return snapshot logs from pod nginx with multi containers
  kubectl logs nginx --all-containers=true

  # Return snapshot logs from all containers in pods defined by label app=nginx
  kubectl logs -l app=nginx --all-containers=true

  # Return snapshot of previous terminated ruby container logs from pod web-1
  kubectl logs -p -c ruby web-1

  # Begin streaming the logs of the ruby container in pod web-1
  kubectl logs -f -c ruby web-1

  # Begin streaming the logs from all containers in pods defined by label app=nginx
  kubectl logs -f -l app=nginx --all-containers=true

  # Display only the most recent 20 lines of output in pod nginx
  kubectl logs --tail=20 nginx

  # Show all logs from pod nginx written in the last hour
  kubectl logs --since=1h nginx

  # Show logs from a kubelet with an expired serving certificate
  kubectl logs --insecure-skip-tls-verify-backend nginx

  # Return snapshot logs from first container of a job named hello
  kubectl logs job/hello

  # Return snapshot logs from container nginx-1 of a deployment named nginx
  kubectl logs deployment/nginx -c nginx-1

Options:
    --all-containers=false:
        Get all containers' logs in the pod(s).

    --all-pods=false:
        Get logs from all pod(s). Sets prefix to true.

    -c, --container='':
        Print the logs of this container

    -f, --follow=false:
        Specify if the logs should be streamed.

    --ignore-errors=false:
        If watching / following pod logs, allow for any errors that occur to be non-fatal

    --insecure-skip-tls-verify-backend=false:
        Skip verifying the identity of the kubelet that logs are requested from.  In theory, an attacker could provide
        invalid log content back. You might want to use this if your kubelet serving certificates have expired.

    --limit-bytes=0:
        Maximum bytes of logs to return. Defaults to no limit.

    --max-log-requests=5:
        Specify maximum number of concurrent logs to follow when using by a selector. Defaults to 5.

    --pod-running-timeout=20s:
        The length of time (like 5s, 2m, or 3h, higher than zero) to wait until at least one pod is running

    --prefix=false:
        Prefix each log line with the log source (pod name and container name)

    -p, --previous=false:
        If true, print the logs for the previous instance of the container in a pod if it exists.

    -l, --selector='':
        Selector (label query) to filter on, supports '=', '==', and '!='.(e.g. -l key1=value1,key2=value2). Matching
        objects must satisfy all of the specified label constraints.

    --since=0s:
        Only return logs newer than a relative duration like 5s, 2m, or 3h. Defaults to all logs. Only one of
        since-time / since may be used.

    --since-time='':
        Only return logs after a specific date (RFC3339). Defaults to all logs. Only one of since-time / since may be
        used.

    --tail=-1:
        Lines of recent log file to display. Defaults to -1 with no selector, showing all log lines otherwise 10, if a
        selector is provided.

    --timestamps=false:
        Include timestamps on each line in the log output

Usage:
  kubectl logs [-f] [-p] (POD | TYPE/NAME) [-c CONTAINER] [options]

Use "kubectl options" for a list of global command-line options (applies to all commands).
[root@lab01 ~]# kubectl logs -h
Print the logs for a container in a pod or specified resource. If the pod has only one container, the container name is
optional.

Examples:
  # Return snapshot logs from pod nginx with only one container
  kubectl logs nginx

  # Return snapshot logs from pod nginx with multi containers
  kubectl logs nginx --all-containers=true

  # Return snapshot logs from all containers in pods defined by label app=nginx
  kubectl logs -l app=nginx --all-containers=true

  # Return snapshot of previous terminated ruby container logs from pod web-1
  kubectl logs -p -c ruby web-1

  # Begin streaming the logs of the ruby container in pod web-1
  kubectl logs -f -c ruby web-1

  # Begin streaming the logs from all containers in pods defined by label app=nginx
  kubectl logs -f -l app=nginx --all-containers=true

  # Display only the most recent 20 lines of output in pod nginx
  kubectl logs --tail=20 nginx

  # Show all logs from pod nginx written in the last hour
  kubectl logs --since=1h nginx

  # Show logs from a kubelet with an expired serving certificate
  kubectl logs --insecure-skip-tls-verify-backend nginx

  # Return snapshot logs from first container of a job named hello
  kubectl logs job/hello

  # Return snapshot logs from container nginx-1 of a deployment named nginx
  kubectl logs deployment/nginx -c nginx-1

Options:
    --all-containers=false:
        Get all containers' logs in the pod(s).

    --all-pods=false:
        Get logs from all pod(s). Sets prefix to true.

    -c, --container='':
        Print the logs of this container

    -f, --follow=false:
        Specify if the logs should be streamed.

    --ignore-errors=false:
        If watching / following pod logs, allow for any errors that occur to be non-fatal

    --insecure-skip-tls-verify-backend=false:
        Skip verifying the identity of the kubelet that logs are requested from.  In theory, an attacker could provide
        invalid log content back. You might want to use this if your kubelet serving certificates have expired.

    --limit-bytes=0:
        Maximum bytes of logs to return. Defaults to no limit.

    --max-log-requests=5:
        Specify maximum number of concurrent logs to follow when using by a selector. Defaults to 5.

    --pod-running-timeout=20s:
        The length of time (like 5s, 2m, or 3h, higher than zero) to wait until at least one pod is running

    --prefix=false:
        Prefix each log line with the log source (pod name and container name)

    -p, --previous=false:
        If true, print the logs for the previous instance of the container in a pod if it exists.

    -l, --selector='':
        Selector (label query) to filter on, supports '=', '==', and '!='.(e.g. -l key1=value1,key2=value2). Matching
        objects must satisfy all of the specified label constraints.

    --since=0s:
        Only return logs newer than a relative duration like 5s, 2m, or 3h. Defaults to all logs. Only one of
        since-time / since may be used.

    --since-time='':
        Only return logs after a specific date (RFC3339). Defaults to all logs. Only one of since-time / since may be
        used.

    --tail=-1:
        Lines of recent log file to display. Defaults to -1 with no selector, showing all log lines otherwise 10, if a
        selector is provided.

    --timestamps=false:
        Include timestamps on each line in the log output

Usage:
  kubectl logs [-f] [-p] (POD | TYPE/NAME) [-c CONTAINER] [options]

Use "kubectl options" for a list of global command-line options (applies to all commands).
[root@lab01 ~]# kubectl logs
error: expected 'logs [-f] [-p] (POD | TYPE/NAME) [-c CONTAINER]'.
POD or TYPE/NAME is a required argument for the logs command
See 'kubectl logs -h' for help and examples
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# kubectl logs -n speaker-wv4lq
error: expected 'logs [-f] [-p] (POD | TYPE/NAME) [-c CONTAINER]'.
POD or TYPE/NAME is a required argument for the logs command
See 'kubectl logs -h' for help and examples
[root@lab01 ~]#
[root@lab01 ~]# ls -lrt
total 101440
-rw-------. 1 root root      1220 Mar  5  2024 anaconda-ks.cfg
drwxr-xr-x. 2 root root         6 Mar  5  2024 Videos
drwxr-xr-x. 2 root root         6 Mar  5  2024 Templates
drwxr-xr-x. 2 root root         6 Mar  5  2024 Public
drwxr-xr-x. 2 root root         6 Mar  5  2024 Pictures
drwxr-xr-x. 2 root root         6 Mar  5  2024 Music
drwxr-xr-x. 2 root root         6 Mar  5  2024 Downloads
drwxr-xr-x. 2 root root         6 Mar  5  2024 Documents
drwxr-xr-x. 2 root root         6 Mar  5  2024 Desktop
-rw-r--r--. 1 root root 103820392 Nov  5 23:48 minikube-linux-amd64
-rw-r--r--. 1 root root        43 Nov  5 23:54 values-postgres.yaml
-rw-r--r--. 1 root root       278 Nov  6 00:06 create_database.sql
-rw-r--r--. 1 root root      1889 Nov  6 00:18 data_insert_2.py
-rw-r--r--. 1 root root       525 Nov  6 00:29 data_insert.py
-rw-r--r--. 1 root root      1706 Nov  6 00:33 fake_insert.py
-rw-r--r--. 1 root root      1162 Nov  6 01:26 postgresql-deployment.yaml
-rw-r--r--. 1 root root       470 Nov  6 01:36 postgresql.conf
-rw-r--r--. 1 root root       144 Nov  6 01:37 pg_hba.conf
-rw-r--r--. 1 root root       794 Nov  6 01:38 postgresql-config.yaml
-rw-r--r--. 1 root root         0 Nov  6 01:41 my-postgresql-cluster-deployment.yaml
-rw-r--r--. 1 root root      6005 Nov  6 01:44 my-postgresql-cluster-statefulset.yaml
drwxr-xr-x. 2 root root       188 Nov  6 22:53 data
drwxr-xr-x. 4 root root        74 Nov  6 23:24 postgresql-chart
-rw-r--r--. 1 root root       262 Nov  6 23:52 metallb-config.yaml
[root@lab01 ~]# cd postgresql-chart/
[root@lab01 postgresql-chart]# ls -lrt
total 8
drwxr-xr-x. 2 root root   6 Nov  6 23:23 charts
-rw-r--r--. 1 root root 146 Nov  6 23:23 Chart.yaml
-rw-r--r--. 1 root root 623 Nov  6 23:24 values.yaml
drwxr-xr-x. 2 root root 102 Nov  6 23:26 templates
[root@lab01 postgresql-chart]# cd ../
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# kubectl get pods -n metallb-system
NAME                         READY   STATUS    RESTARTS   AGE
controller-8b7b6bf6b-ktfbw   1/1     Running   0          2m41s
speaker-wv4lq                1/1     Running   0          2m41s
[root@lab01 ~]# kubectl get pods
NAME                         READY   STATUS    RESTARTS   AGE
postgresql-b75dbb4c7-7fkdh   1/1     Running   0          28m
postgresql-b75dbb4c7-86hsc   1/1     Running   0          28m
postgresql-b75dbb4c7-tlh2x   1/1     Running   0          28m
[root@lab01 ~]# kubectl get pods
NAME                         READY   STATUS    RESTARTS   AGE
postgresql-b75dbb4c7-7fkdh   1/1     Running   0          28m
postgresql-b75dbb4c7-86hsc   1/1     Running   0          28m
postgresql-b75dbb4c7-tlh2x   1/1     Running   0          28m
[root@lab01 ~]#  kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          24h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   63m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   29m
[root@lab01 ~]# psql -h 10.97.172.86





psql: error: could not connect to server: Connection refused
        Is the server running on host "10.97.172.86" and accepting
        TCP/IP connections on port 5432?
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# psql -h 192.168.49.2 -p 30867
psql: error: could not connect to server: Connection refused
        Is the server running on host "192.168.49.2" and accepting
        TCP/IP connections on port 30867?
[root@lab01 ~]# psql -h 10.97.172.86 -p 30867

psql: error: could not connect to server: Connection refused
        Is the server running on host "10.97.172.86" and accepting
        TCP/IP connections on port 30867?
[root@lab01 ~]#
[root@lab01 ~]# psql -h 192.168.49.2 -p 30867 -U postgres
psql: error: could not connect to server: Connection refused
        Is the server running on host "192.168.49.2" and accepting
        TCP/IP connections on port 30867?
[root@lab01 ~]# netstat -an | grep 30867
[root@lab01 ~]# systemctl stop firewalld
[root@lab01 ~]# psql -h 192.168.49.2 -p 30867 -U postgres
psql: error: could not connect to server: Connection refused
        Is the server running on host "192.168.49.2" and accepting
        TCP/IP connections on port 30867?
[root@lab01 ~]#
[root@lab01 ~]# systemctl stop firewalld
[root@lab01 ~]# kubectl exec -it postgresql-b75dbb4c7-7fkdh -- /bin/bash
root@postgresql-b75dbb4c7-7fkdh:/#
root@postgresql-b75dbb4c7-7fkdh:/#
root@postgresql-b75dbb4c7-7fkdh:/# netstat -an | grep 30867
bash: netstat: command not found
root@postgresql-b75dbb4c7-7fkdh:/#
root@postgresql-b75dbb4c7-7fkdh:/# apt-get install netstat
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
E: Unable to locate package netstat
root@postgresql-b75dbb4c7-7fkdh:/#
root@postgresql-b75dbb4c7-7fkdh:/#
root@postgresql-b75dbb4c7-7fkdh:/# psql
psql: error: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  role "root" does not exist
root@postgresql-b75dbb4c7-7fkdh:/# ps -ef | grep postgres
bash: ps: command not found
root@postgresql-b75dbb4c7-7fkdh:/#
root@postgresql-b75dbb4c7-7fkdh:/# df -h
Filesystem           Size  Used Avail Use% Mounted on
overlay               42G   11G   31G  27% /
tmpfs                 64M     0   64M   0% /dev
shm                   64M   28K   64M   1% /dev/shm
/dev/mapper/cs-root   42G   11G   31G  27% /etc/hosts
tmpfs                3.6G   12K  3.6G   1% /run/secrets/kubernetes.io/serviceaccount
tmpfs                1.8G     0  1.8G   0% /proc/asound
tmpfs                1.8G     0  1.8G   0% /proc/acpi
tmpfs                1.8G     0  1.8G   0% /proc/scsi
tmpfs                1.8G     0  1.8G   0% /sys/firmware
root@postgresql-b75dbb4c7-7fkdh:/# exit
exit
[root@lab01 ~]# docker logs -f postgres
Error response from daemon: No such container: postgres
[root@lab01 ~]# kubectl logs -f postgres
error: error from server (NotFound): pods "postgres" not found in namespace "default"
[root@lab01 ~]#
[root@lab01 ~]# kubectl logs -f postgresql-b75dbb4c7-7fkdh

PostgreSQL Database directory appears to contain a database; Skipping initialization

2024-11-06 17:57:01.697 UTC [1] LOG:  starting PostgreSQL 14.13 (Debian 14.13-1.pgdg120+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
2024-11-06 17:57:01.697 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
2024-11-06 17:57:01.697 UTC [1] LOG:  listening on IPv6 address "::", port 5432
2024-11-06 17:57:01.698 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
2024-11-06 17:57:01.701 UTC [26] LOG:  database system was interrupted; last known up at 2024-11-06 17:57:01 UTC
2024-11-06 17:57:01.712 UTC [26] LOG:  database system was not properly shut down; automatic recovery in progress
2024-11-06 17:57:01.713 UTC [26] LOG:  invalid record length at 0/16FF038: wanted 24, got 0
2024-11-06 17:57:01.714 UTC [26] LOG:  redo is not required
2024-11-06 17:57:01.720 UTC [1] LOG:  database system is ready to accept connections
2024-11-06 18:30:21.495 UTC [391] FATAL:  role "root" does not exist
^C
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# psql -h 192.168.49.2
psql: error: could not connect to server: Connection refused
        Is the server running on host "192.168.49.2" and accepting
        TCP/IP connections on port 5432?
[root@lab01 ~]# psql -h 10.97.172.86



kubectl get pods
^C
[root@lab01 ~]# kubectl get pods
NAME                         READY   STATUS    RESTARTS   AGE
postgresql-b75dbb4c7-7fkdh   1/1     Running   0          34m
postgresql-b75dbb4c7-86hsc   1/1     Running   0          34m
postgresql-b75dbb4c7-tlh2x   1/1     Running   0          34m
[root@lab01 ~]# kubectl describe pod  postgresql-b75dbb4c7-7fkdh
Name:             postgresql-b75dbb4c7-7fkdh
Namespace:        default
Priority:         0
Service Account:  default
Node:             minikube/192.168.49.2
Start Time:       Wed, 06 Nov 2024 23:26:59 +0530
Labels:           app=postgresql
                  pod-template-hash=b75dbb4c7
Annotations:      <none>
Status:           Running
IP:               10.244.0.29
IPs:
  IP:           10.244.0.29
Controlled By:  ReplicaSet/postgresql-b75dbb4c7
Containers:
  postgresql:
    Container ID:   docker://4983a1c2911ddd00b9d28f4034eee242d0f0bfc65e106f6f78b945538ecdd333
    Image:          postgres:14
    Image ID:       docker-pullable://postgres@sha256:c9fcaef49a1ca7deae24437c705bf7485922f8a768a140006c5d8abb3f6cac7b
    Port:           5432/TCP
    Host Port:      0/TCP
    State:          Running
      Started:      Wed, 06 Nov 2024 23:27:01 +0530
    Ready:          True
    Restart Count:  0
    Environment:
      POSTGRES_DB:        ps_db
      POSTGRES_USER:      ps_user
      POSTGRES_PASSWORD:  SecurePassword
    Mounts:
      /etc/postgresql/pg_hba.conf from postgres-config (rw,path="pg_hba.conf")
      /etc/postgresql/postgresql.conf from postgres-config (rw,path="postgresql.conf")
      /var/lib/postgresql/data from postgresdata (rw)
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-4fgv9 (ro)
Conditions:
  Type                        Status
  PodReadyToStartContainers   True
  Initialized                 True
  Ready                       True
  ContainersReady             True
  PodScheduled                True
Volumes:
  postgresdata:
    Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)
    ClaimName:  postgres-volume-claim
    ReadOnly:   false
  postgres-config:
    Type:      ConfigMap (a volume populated by a ConfigMap)
    Name:      postgres-config
    Optional:  false
  kube-api-access-4fgv9:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    ConfigMapOptional:       <nil>
    DownwardAPI:             true
QoS Class:                   BestEffort
Node-Selectors:              <none>
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type    Reason     Age   From               Message
  ----    ------     ----  ----               -------
  Normal  Scheduled  34m   default-scheduler  Successfully assigned default/postgresql-b75dbb4c7-7fkdh to minikube
  Normal  Pulled     34m   kubelet            Container image "postgres:14" already present on machine
  Normal  Created    34m   kubelet            Created container postgresql
  Normal  Started    34m   kubelet            Started container postgresql
[root@lab01 ~]# kubectl get svc postgres
NAME       TYPE       CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
postgres   NodePort   10.97.172.86   <none>        5432:30867/TCP   68m
[root@lab01 ~]# psql -h 192.168.49.2 -p 30867
psql: error: could not connect to server: Connection refused
        Is the server running on host "192.168.49.2" and accepting
        TCP/IP connections on port 30867?
[root@lab01 ~]#
[root@lab01 ~]# kubectl exec -it postgresql-b75dbb4c7-7fkdh -- /bin/bash
root@postgresql-b75dbb4c7-7fkdh:/#
root@postgresql-b75dbb4c7-7fkdh:/#
root@postgresql-b75dbb4c7-7fkdh:/# cd /
root@postgresql-b75dbb4c7-7fkdh:/# find . -name "postgresql.conf"
./etc/postgresql/postgresql.conf
find: ‘./proc/1/map_files’: Permission denied
find: ‘./proc/27/map_files’: Permission denied
find: ‘./proc/28/map_files’: Permission denied
find: ‘./proc/29/map_files’: Permission denied
find: ‘./proc/30/map_files’: Permission denied
find: ‘./proc/31/map_files’: Permission denied
find: ‘./proc/32/map_files’: Permission denied
./var/lib/postgresql/data/postgresql.conf
root@postgresql-b75dbb4c7-7fkdh:/# cat /etc/postgresql/postgresql.conf

# Custom PostgreSQL configuration
listen_addresses = '*'
max_connections = 100
shared_buffers = 256MB
effective_cache_size = 768MB
log_directory = '/var/log/postgresql'
log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'
root@postgresql-b75dbb4c7-7fkdh:/# cat /var/lib/postgresql/data/postgresql.conf
# -----------------------------
# PostgreSQL configuration file
# -----------------------------
#
# This file consists of lines of the form:
#
#   name = value
#
# (The "=" is optional.)  Whitespace may be used.  Comments are introduced with
# "#" anywhere on a line.  The complete list of parameter names and allowed
# values can be found in the PostgreSQL documentation.
#
# The commented-out settings shown in this file represent the default values.
# Re-commenting a setting is NOT sufficient to revert it to the default value;
# you need to reload the server.
#
# This file is read on server startup and when the server receives a SIGHUP
# signal.  If you edit the file on a running system, you have to SIGHUP the
# server for the changes to take effect, run "pg_ctl reload", or execute
# "SELECT pg_reload_conf()".  Some parameters, which are marked below,
# require a server shutdown and restart to take effect.
#
# Any parameter can also be given as a command-line option to the server, e.g.,
# "postgres -c log_connections=on".  Some parameters can be changed at run time
# with the "SET" SQL command.
#
# Memory units:  B  = bytes            Time units:  us  = microseconds
#                kB = kilobytes                     ms  = milliseconds
#                MB = megabytes                     s   = seconds
#                GB = gigabytes                     min = minutes
#                TB = terabytes                     h   = hours
#                                                   d   = days


#------------------------------------------------------------------------------
# FILE LOCATIONS
#------------------------------------------------------------------------------

# The default values of these variables are driven from the -D command-line
# option or PGDATA environment variable, represented here as ConfigDir.

#data_directory = 'ConfigDir'           # use data in another directory
                                        # (change requires restart)
#hba_file = 'ConfigDir/pg_hba.conf'     # host-based authentication file
                                        # (change requires restart)
#ident_file = 'ConfigDir/pg_ident.conf' # ident configuration file
                                        # (change requires restart)

# If external_pid_file is not explicitly set, no extra PID file is written.
#external_pid_file = ''                 # write an extra PID file
                                        # (change requires restart)


#------------------------------------------------------------------------------
# CONNECTIONS AND AUTHENTICATION
#------------------------------------------------------------------------------

# - Connection Settings -

listen_addresses = '*'
                                        # comma-separated list of addresses;
                                        # defaults to 'localhost'; use '*' for all
                                        # (change requires restart)
#port = 5432                            # (change requires restart)
max_connections = 100                   # (change requires restart)
#superuser_reserved_connections = 3     # (change requires restart)
#unix_socket_directories = '/var/run/postgresql'        # comma-separated list of directories
                                        # (change requires restart)
#unix_socket_group = ''                 # (change requires restart)
#unix_socket_permissions = 0777         # begin with 0 to use octal notation
                                        # (change requires restart)
#bonjour = off                          # advertise server via Bonjour
                                        # (change requires restart)
#bonjour_name = ''                      # defaults to the computer name
                                        # (change requires restart)

# - TCP settings -
# see "man tcp" for details

#tcp_keepalives_idle = 0                # TCP_KEEPIDLE, in seconds;
                                        # 0 selects the system default
#tcp_keepalives_interval = 0            # TCP_KEEPINTVL, in seconds;
                                        # 0 selects the system default
#tcp_keepalives_count = 0               # TCP_KEEPCNT;
                                        # 0 selects the system default
#tcp_user_timeout = 0                   # TCP_USER_TIMEOUT, in milliseconds;
                                        # 0 selects the system default

#client_connection_check_interval = 0   # time between checks for client
                                        # disconnection while running queries;
                                        # 0 for never

# - Authentication -

#authentication_timeout = 1min          # 1s-600s
#password_encryption = scram-sha-256    # scram-sha-256 or md5
#db_user_namespace = off

# GSSAPI using Kerberos
#krb_server_keyfile = 'FILE:${sysconfdir}/krb5.keytab'
#krb_caseins_users = off

# - SSL -

#ssl = off
#ssl_ca_file = ''
#ssl_cert_file = 'server.crt'
#ssl_crl_file = ''
#ssl_crl_dir = ''
#ssl_key_file = 'server.key'
#ssl_ciphers = 'HIGH:MEDIUM:+3DES:!aNULL' # allowed SSL ciphers
#ssl_prefer_server_ciphers = on
#ssl_ecdh_curve = 'prime256v1'
#ssl_min_protocol_version = 'TLSv1.2'
#ssl_max_protocol_version = ''
#ssl_dh_params_file = ''
#ssl_passphrase_command = ''
#ssl_passphrase_command_supports_reload = off


#------------------------------------------------------------------------------
# RESOURCE USAGE (except WAL)
#------------------------------------------------------------------------------

# - Memory -

shared_buffers = 128MB                  # min 128kB
                                        # (change requires restart)
#huge_pages = try                       # on, off, or try
                                        # (change requires restart)
#huge_page_size = 0                     # zero for system default
                                        # (change requires restart)
#temp_buffers = 8MB                     # min 800kB
#max_prepared_transactions = 0          # zero disables the feature
                                        # (change requires restart)
# Caution: it is not advisable to set max_prepared_transactions nonzero unless
# you actively intend to use prepared transactions.
work_mem = 10MB                         # min 64kB
#hash_mem_multiplier = 1.0              # 1-1000.0 multiplier on hash table work_mem
#maintenance_work_mem = 64MB            # min 1MB
#autovacuum_work_mem = -1               # min 1MB, or -1 to use maintenance_work_mem
#logical_decoding_work_mem = 64MB       # min 64kB
#max_stack_depth = 2MB                  # min 100kB
#shared_memory_type = mmap              # the default is the first option
                                        # supported by the operating system:
                                        #   mmap
                                        #   sysv
                                        #   windows
                                        # (change requires restart)
dynamic_shared_memory_type = posix      # the default is the first option
                                        # supported by the operating system:
                                        #   posix
                                        #   sysv
                                        #   windows
                                        #   mmap
                                        # (change requires restart)
#min_dynamic_shared_memory = 0MB        # (change requires restart)

# - Disk -

#temp_file_limit = -1                   # limits per-process temp file space
                                        # in kilobytes, or -1 for no limit

# - Kernel Resources -

#max_files_per_process = 1000           # min 64
                                        # (change requires restart)

# - Cost-Based Vacuum Delay -

#vacuum_cost_delay = 0                  # 0-100 milliseconds (0 disables)
#vacuum_cost_page_hit = 1               # 0-10000 credits
#vacuum_cost_page_miss = 2              # 0-10000 credits
#vacuum_cost_page_dirty = 20            # 0-10000 credits
#vacuum_cost_limit = 200                # 1-10000 credits

# - Background Writer -

#bgwriter_delay = 200ms                 # 10-10000ms between rounds
#bgwriter_lru_maxpages = 100            # max buffers written/round, 0 disables
#bgwriter_lru_multiplier = 2.0          # 0-10.0 multiplier on buffers scanned/round
#bgwriter_flush_after = 512kB           # measured in pages, 0 disables

# - Asynchronous Behavior -

#backend_flush_after = 0                # measured in pages, 0 disables
#effective_io_concurrency = 1           # 1-1000; 0 disables prefetching
#maintenance_io_concurrency = 10        # 1-1000; 0 disables prefetching
#max_worker_processes = 8               # (change requires restart)
#max_parallel_workers_per_gather = 2    # limited by max_parallel_workers
#max_parallel_maintenance_workers = 2   # limited by max_parallel_workers
#max_parallel_workers = 8               # number of max_worker_processes that
                                        # can be used in parallel operations
#parallel_leader_participation = on
#old_snapshot_threshold = -1            # 1min-60d; -1 disables; 0 is immediate
                                        # (change requires restart)


#------------------------------------------------------------------------------
# WRITE-AHEAD LOG
#------------------------------------------------------------------------------

# - Settings -

#wal_level = replica                    # minimal, replica, or logical
                                        # (change requires restart)
#fsync = on                             # flush data to disk for crash safety
                                        # (turning this off can cause
                                        # unrecoverable data corruption)
#synchronous_commit = on                # synchronization level;
                                        # off, local, remote_write, remote_apply, or on
#wal_sync_method = fsync                # the default is the first option
                                        # supported by the operating system:
                                        #   open_datasync
                                        #   fdatasync (default on Linux and FreeBSD)
                                        #   fsync
                                        #   fsync_writethrough
                                        #   open_sync
#full_page_writes = on                  # recover from partial page writes
#wal_log_hints = off                    # also do full page writes of non-critical updates
                                        # (change requires restart)
#wal_compression = off                  # enable compression of full-page writes
#wal_init_zero = on                     # zero-fill new WAL files
#wal_recycle = on                       # recycle WAL files
#wal_buffers = -1                       # min 32kB, -1 sets based on shared_buffers
                                        # (change requires restart)
#wal_writer_delay = 200ms               # 1-10000 milliseconds
#wal_writer_flush_after = 1MB           # measured in pages, 0 disables
#wal_skip_threshold = 2MB

#commit_delay = 0                       # range 0-100000, in microseconds
#commit_siblings = 5                    # range 1-1000

# - Checkpoints -

#checkpoint_timeout = 5min              # range 30s-1d
#checkpoint_completion_target = 0.9     # checkpoint target duration, 0.0 - 1.0
#checkpoint_flush_after = 256kB         # measured in pages, 0 disables
#checkpoint_warning = 30s               # 0 disables
max_wal_size = 1GB
min_wal_size = 80MB

# - Archiving -

#archive_mode = off             # enables archiving; off, on, or always
                                # (change requires restart)
#archive_command = ''           # command to use to archive a logfile segment
                                # placeholders: %p = path of file to archive
                                #               %f = file name only
                                # e.g. 'test ! -f /mnt/server/archivedir/%f && cp %p /mnt/server/archivedir/%f'
#archive_timeout = 0            # force a logfile segment switch after this
                                # number of seconds; 0 disables

# - Archive Recovery -

# These are only used in recovery mode.

#restore_command = ''           # command to use to restore an archived logfile segment
                                # placeholders: %p = path of file to restore
                                #               %f = file name only
                                # e.g. 'cp /mnt/server/archivedir/%f %p'
#archive_cleanup_command = ''   # command to execute at every restartpoint
#recovery_end_command = ''      # command to execute at completion of recovery

# - Recovery Target -

# Set these only when performing a targeted recovery.

#recovery_target = ''           # 'immediate' to end recovery as soon as a
                                # consistent state is reached
                                # (change requires restart)
#recovery_target_name = ''      # the named restore point to which recovery will proceed
                                # (change requires restart)
#recovery_target_time = ''      # the time stamp up to which recovery will proceed
                                # (change requires restart)
#recovery_target_xid = ''       # the transaction ID up to which recovery will proceed
                                # (change requires restart)
#recovery_target_lsn = ''       # the WAL LSN up to which recovery will proceed
                                # (change requires restart)
#recovery_target_inclusive = on # Specifies whether to stop:
                                # just after the specified recovery target (on)
                                # just before the recovery target (off)
                                # (change requires restart)
#recovery_target_timeline = 'latest'    # 'current', 'latest', or timeline ID
                                # (change requires restart)
#recovery_target_action = 'pause'       # 'pause', 'promote', 'shutdown'
                                # (change requires restart)


#------------------------------------------------------------------------------
# REPLICATION
#------------------------------------------------------------------------------

# - Sending Servers -

# Set these on the primary and on any standby that will send replication data.

#max_wal_senders = 10           # max number of walsender processes
                                # (change requires restart)
#max_replication_slots = 10     # max number of replication slots
                                # (change requires restart)
#wal_keep_size = 0              # in megabytes; 0 disables
#max_slot_wal_keep_size = -1    # in megabytes; -1 disables
#wal_sender_timeout = 60s       # in milliseconds; 0 disables
#track_commit_timestamp = off   # collect timestamp of transaction commit
                                # (change requires restart)

# - Primary Server -

# These settings are ignored on a standby server.

#synchronous_standby_names = '' # standby servers that provide sync rep
                                # method to choose sync standbys, number of sync standbys,
                                # and comma-separated list of application_name
                                # from standby(s); '*' = all
#vacuum_defer_cleanup_age = 0   # number of xacts by which cleanup is delayed

# - Standby Servers -

# These settings are ignored on a primary server.

#primary_conninfo = ''                  # connection string to sending server
#primary_slot_name = ''                 # replication slot on sending server
#promote_trigger_file = ''              # file name whose presence ends recovery
#hot_standby = on                       # "off" disallows queries during recovery
                                        # (change requires restart)
#max_standby_archive_delay = 30s        # max delay before canceling queries
                                        # when reading WAL from archive;
                                        # -1 allows indefinite delay
#max_standby_streaming_delay = 30s      # max delay before canceling queries
                                        # when reading streaming WAL;
                                        # -1 allows indefinite delay
#wal_receiver_create_temp_slot = off    # create temp slot if primary_slot_name
                                        # is not set
#wal_receiver_status_interval = 10s     # send replies at least this often
                                        # 0 disables
#hot_standby_feedback = off             # send info from standby to prevent
                                        # query conflicts
#wal_receiver_timeout = 60s             # time that receiver waits for
                                        # communication from primary
                                        # in milliseconds; 0 disables
#wal_retrieve_retry_interval = 5s       # time to wait before retrying to
                                        # retrieve WAL after a failed attempt
#recovery_min_apply_delay = 0           # minimum delay for applying changes during recovery

# - Subscribers -

# These settings are ignored on a publisher.

#max_logical_replication_workers = 4    # taken from max_worker_processes
                                        # (change requires restart)
#max_sync_workers_per_subscription = 2  # taken from max_logical_replication_workers


#------------------------------------------------------------------------------
# QUERY TUNING
#------------------------------------------------------------------------------

# - Planner Method Configuration -

#enable_async_append = on
#enable_bitmapscan = on
#enable_gathermerge = on
#enable_hashagg = on
#enable_hashjoin = on
#enable_incremental_sort = on
#enable_indexscan = on
#enable_indexonlyscan = on
#enable_material = on
#enable_memoize = on
#enable_mergejoin = on
#enable_nestloop = on
#enable_parallel_append = on
#enable_parallel_hash = on
#enable_partition_pruning = on
#enable_partitionwise_join = off
#enable_partitionwise_aggregate = off
#enable_seqscan = on
#enable_sort = on
#enable_tidscan = on

# - Planner Cost Constants -

#seq_page_cost = 1.0                    # measured on an arbitrary scale
#random_page_cost = 4.0                 # same scale as above
#cpu_tuple_cost = 0.01                  # same scale as above
#cpu_index_tuple_cost = 0.005           # same scale as above
#cpu_operator_cost = 0.0025             # same scale as above
#parallel_setup_cost = 1000.0   # same scale as above
#parallel_tuple_cost = 0.1              # same scale as above
#min_parallel_table_scan_size = 8MB
#min_parallel_index_scan_size = 512kB
#effective_cache_size = 4GB

#jit_above_cost = 100000                # perform JIT compilation if available
                                        # and query more expensive than this;
                                        # -1 disables
#jit_inline_above_cost = 500000         # inline small functions if query is
                                        # more expensive than this; -1 disables
#jit_optimize_above_cost = 500000       # use expensive JIT optimizations if
                                        # query is more expensive than this;
                                        # -1 disables

# - Genetic Query Optimizer -

#geqo = on
#geqo_threshold = 12
#geqo_effort = 5                        # range 1-10
#geqo_pool_size = 0                     # selects default based on effort
#geqo_generations = 0                   # selects default based on effort
#geqo_selection_bias = 2.0              # range 1.5-2.0
#geqo_seed = 0.0                        # range 0.0-1.0

# - Other Planner Options -

#default_statistics_target = 100        # range 1-10000
#constraint_exclusion = partition       # on, off, or partition
#cursor_tuple_fraction = 0.1            # range 0.0-1.0
#from_collapse_limit = 8
#jit = on                               # allow JIT compilation
#join_collapse_limit = 8                # 1 disables collapsing of explicit
                                        # JOIN clauses
#plan_cache_mode = auto                 # auto, force_generic_plan or
                                        # force_custom_plan


#------------------------------------------------------------------------------
# REPORTING AND LOGGING
#------------------------------------------------------------------------------

# - Where to Log -

#log_destination = 'stderr'             # Valid values are combinations of
                                        # stderr, csvlog, syslog, and eventlog,
                                        # depending on platform.  csvlog
                                        # requires logging_collector to be on.

# This is used when logging to stderr:
#logging_collector = off                # Enable capturing of stderr and csvlog
                                        # into log files. Required to be on for
                                        # csvlogs.
                                        # (change requires restart)

# These are only used if logging_collector is on:
#log_directory = 'log'                  # directory where log files are written,
                                        # can be absolute or relative to PGDATA
#log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'        # log file name pattern,
                                        # can include strftime() escapes
#log_file_mode = 0600                   # creation mode for log files,
                                        # begin with 0 to use octal notation
#log_rotation_age = 1d                  # Automatic rotation of logfiles will
                                        # happen after that time.  0 disables.
#log_rotation_size = 10MB               # Automatic rotation of logfiles will
                                        # happen after that much log output.
                                        # 0 disables.
#log_truncate_on_rotation = off         # If on, an existing log file with the
                                        # same name as the new log file will be
                                        # truncated rather than appended to.
                                        # But such truncation only occurs on
                                        # time-driven rotation, not on restarts
                                        # or size-driven rotation.  Default is
                                        # off, meaning append to existing files
                                        # in all cases.

# These are relevant when logging to syslog:
#syslog_facility = 'LOCAL0'
#syslog_ident = 'postgres'
#syslog_sequence_numbers = on
#syslog_split_messages = on

# This is only relevant when logging to eventlog (Windows):
# (change requires restart)
#event_source = 'PostgreSQL'

# - When to Log -

#log_min_messages = warning             # values in order of decreasing detail:
                                        #   debug5
                                        #   debug4
                                        #   debug3
                                        #   debug2
                                        #   debug1
                                        #   info
                                        #   notice
                                        #   warning
                                        #   error
                                        #   log
                                        #   fatal
                                        #   panic

#log_min_error_statement = error        # values in order of decreasing detail:
                                        #   debug5
                                        #   debug4
                                        #   debug3
                                        #   debug2
                                        #   debug1
                                        #   info
                                        #   notice
                                        #   warning
                                        #   error
                                        #   log
                                        #   fatal
                                        #   panic (effectively off)

#log_min_duration_statement = -1        # -1 is disabled, 0 logs all statements
                                        # and their durations, > 0 logs only
                                        # statements running at least this number
                                        # of milliseconds

#log_min_duration_sample = -1           # -1 is disabled, 0 logs a sample of statements
                                        # and their durations, > 0 logs only a sample of
                                        # statements running at least this number
                                        # of milliseconds;
                                        # sample fraction is determined by log_statement_sample_rate

#log_statement_sample_rate = 1.0        # fraction of logged statements exceeding
                                        # log_min_duration_sample to be logged;
                                        # 1.0 logs all such statements, 0.0 never logs


#log_transaction_sample_rate = 0.0      # fraction of transactions whose statements
                                        # are logged regardless of their duration; 1.0 logs all
                                        # statements from all transactions, 0.0 never logs

# - What to Log -

#debug_print_parse = off
#debug_print_rewritten = off
#debug_print_plan = off
#debug_pretty_print = on
#log_autovacuum_min_duration = -1       # log autovacuum activity;
                                        # -1 disables, 0 logs all actions and
                                        # their durations, > 0 logs only
                                        # actions running at least this number
                                        # of milliseconds.
#log_checkpoints = off
#log_connections = off
#log_disconnections = off
#log_duration = off
#log_error_verbosity = default          # terse, default, or verbose messages
#log_hostname = off
#log_line_prefix = '%m [%p] '           # special values:
                                        #   %a = application name
                                        #   %u = user name
                                        #   %d = database name
                                        #   %r = remote host and port
                                        #   %h = remote host
                                        #   %b = backend type
                                        #   %p = process ID
                                        #   %P = process ID of parallel group leader
                                        #   %t = timestamp without milliseconds
                                        #   %m = timestamp with milliseconds
                                        #   %n = timestamp with milliseconds (as a Unix epoch)
                                        #   %Q = query ID (0 if none or not computed)
                                        #   %i = command tag
                                        #   %e = SQL state
                                        #   %c = session ID
                                        #   %l = session line number
                                        #   %s = session start timestamp
                                        #   %v = virtual transaction ID
                                        #   %x = transaction ID (0 if none)
                                        #   %q = stop here in non-session
                                        #        processes
                                        #   %% = '%'
                                        # e.g. '<%u%%%d> '
#log_lock_waits = off                   # log lock waits >= deadlock_timeout
#log_recovery_conflict_waits = off      # log standby recovery conflict waits
                                        # >= deadlock_timeout
#log_parameter_max_length = -1          # when logging statements, limit logged
                                        # bind-parameter values to N bytes;
                                        # -1 means print in full, 0 disables
#log_parameter_max_length_on_error = 0  # when logging an error, limit logged
                                        # bind-parameter values to N bytes;
                                        # -1 means print in full, 0 disables
#log_statement = 'none'                 # none, ddl, mod, all
#log_replication_commands = off
#log_temp_files = -1                    # log temporary files equal or larger
                                        # than the specified size in kilobytes;
                                        # -1 disables, 0 logs all temp files
log_timezone = 'Etc/UTC'


#------------------------------------------------------------------------------
# PROCESS TITLE
#------------------------------------------------------------------------------

#cluster_name = ''                      # added to process titles if nonempty
                                        # (change requires restart)
#update_process_title = on


#------------------------------------------------------------------------------
# STATISTICS
#------------------------------------------------------------------------------

# - Query and Index Statistics Collector -

#track_activities = on
#track_activity_query_size = 1024       # (change requires restart)
#track_counts = on
#track_io_timing = off
#track_wal_io_timing = off
#track_functions = none                 # none, pl, all
#stats_temp_directory = 'pg_stat_tmp'


# - Monitoring -

#compute_query_id = auto
#log_statement_stats = off
#log_parser_stats = off
#log_planner_stats = off
#log_executor_stats = off


#------------------------------------------------------------------------------
# AUTOVACUUM
#------------------------------------------------------------------------------

#autovacuum = on                        # Enable autovacuum subprocess?  'on'
                                        # requires track_counts to also be on.
#autovacuum_max_workers = 3             # max number of autovacuum subprocesses
                                        # (change requires restart)
#autovacuum_naptime = 1min              # time between autovacuum runs
#autovacuum_vacuum_threshold = 50       # min number of row updates before
                                        # vacuum
#autovacuum_vacuum_insert_threshold = 1000      # min number of row inserts
                                        # before vacuum; -1 disables insert
                                        # vacuums
#autovacuum_analyze_threshold = 50      # min number of row updates before
                                        # analyze
#autovacuum_vacuum_scale_factor = 0.2   # fraction of table size before vacuum
#autovacuum_vacuum_insert_scale_factor = 0.2    # fraction of inserts over table
                                        # size before insert vacuum
#autovacuum_analyze_scale_factor = 0.1  # fraction of table size before analyze
#autovacuum_freeze_max_age = 200000000  # maximum XID age before forced vacuum
                                        # (change requires restart)
#autovacuum_multixact_freeze_max_age = 400000000        # maximum multixact age
                                        # before forced vacuum
                                        # (change requires restart)
#autovacuum_vacuum_cost_delay = 2ms     # default vacuum cost delay for
                                        # autovacuum, in milliseconds;
                                        # -1 means use vacuum_cost_delay
#autovacuum_vacuum_cost_limit = -1      # default vacuum cost limit for
                                        # autovacuum, -1 means use
                                        # vacuum_cost_limit


#------------------------------------------------------------------------------
# CLIENT CONNECTION DEFAULTS
#------------------------------------------------------------------------------

# - Statement Behavior -

#client_min_messages = notice           # values in order of decreasing detail:
                                        #   debug5
                                        #   debug4
                                        #   debug3
                                        #   debug2
                                        #   debug1
                                        #   log
                                        #   notice
                                        #   warning
                                        #   error
#search_path = '"$user", public'        # schema names
#row_security = on
#default_table_access_method = 'heap'
#default_tablespace = ''                # a tablespace name, '' uses the default
#default_toast_compression = 'pglz'     # 'pglz' or 'lz4'
#temp_tablespaces = ''                  # a list of tablespace names, '' uses
                                        # only default tablespace
#check_function_bodies = on
#default_transaction_isolation = 'read committed'
#default_transaction_read_only = off
#default_transaction_deferrable = off
#session_replication_role = 'origin'
#statement_timeout = 0                  # in milliseconds, 0 is disabled
#lock_timeout = 0                       # in milliseconds, 0 is disabled
#idle_in_transaction_session_timeout = 0        # in milliseconds, 0 is disabled
#idle_session_timeout = 0               # in milliseconds, 0 is disabled
#vacuum_freeze_table_age = 150000000
#vacuum_freeze_min_age = 50000000
#vacuum_failsafe_age = 1600000000
#vacuum_multixact_freeze_table_age = 150000000
#vacuum_multixact_freeze_min_age = 5000000
#vacuum_multixact_failsafe_age = 1600000000
#bytea_output = 'hex'                   # hex, escape
#xmlbinary = 'base64'
#xmloption = 'content'
#gin_pending_list_limit = 4MB

# - Locale and Formatting -

datestyle = 'iso, mdy'
#intervalstyle = 'postgres'
timezone = 'Etc/UTC'
#timezone_abbreviations = 'Default'     # Select the set of available time zone
                                        # abbreviations.  Currently, there are
                                        #   Default
                                        #   Australia (historical usage)
                                        #   India
                                        # You can create your own file in
                                        # share/timezonesets/.
#extra_float_digits = 1                 # min -15, max 3; any value >0 actually
                                        # selects precise output mode
#client_encoding = sql_ascii            # actually, defaults to database
                                        # encoding

# These settings are initialized by initdb, but they can be changed.
lc_messages = 'en_US.utf8'                      # locale for system error message
                                        # strings
lc_monetary = 'en_US.utf8'                      # locale for monetary formatting
lc_numeric = 'en_US.utf8'                       # locale for number formatting
lc_time = 'en_US.utf8'                          # locale for time formatting

# default configuration for text search
default_text_search_config = 'pg_catalog.english'

# - Shared Library Preloading -

#local_preload_libraries = ''
#session_preload_libraries = ''
#shared_preload_libraries = ''  # (change requires restart)
#jit_provider = 'llvmjit'               # JIT library to use

# - Other Defaults -

#dynamic_library_path = '$libdir'
#extension_destdir = ''                 # prepend path when loading extensions
                                        # and shared objects (added by Debian)
#gin_fuzzy_search_limit = 0


#------------------------------------------------------------------------------
# LOCK MANAGEMENT
#------------------------------------------------------------------------------

#deadlock_timeout = 1s
#max_locks_per_transaction = 64         # min 10
                                        # (change requires restart)
#max_pred_locks_per_transaction = 64    # min 10
                                        # (change requires restart)
#max_pred_locks_per_relation = -2       # negative values mean
                                        # (max_pred_locks_per_transaction
                                        #  / -max_pred_locks_per_relation) - 1
#max_pred_locks_per_page = 2            # min 0


#------------------------------------------------------------------------------
# VERSION AND PLATFORM COMPATIBILITY
#------------------------------------------------------------------------------

# - Previous PostgreSQL Versions -

#array_nulls = on
#backslash_quote = safe_encoding        # on, off, or safe_encoding
#escape_string_warning = on
#lo_compat_privileges = off
#quote_all_identifiers = off
#standard_conforming_strings = on
#synchronize_seqscans = on

# - Other Platforms and Clients -

#transform_null_equals = off


#------------------------------------------------------------------------------
# ERROR HANDLING
#------------------------------------------------------------------------------

#exit_on_error = off                    # terminate session on any error?
#restart_after_crash = on               # reinitialize after backend crash?
#data_sync_retry = off                  # retry or panic on failure to fsync
                                        # data?
                                        # (change requires restart)
#recovery_init_sync_method = fsync      # fsync, syncfs (Linux 5.8+)


#------------------------------------------------------------------------------
# CONFIG FILE INCLUDES
#------------------------------------------------------------------------------

# These options allow settings to be loaded from files other than the
# default postgresql.conf.  Note that these are directives, not variable
# assignments, so they can usefully be given more than once.

#include_dir = '...'                    # include files ending in '.conf' from
                                        # a directory, e.g., 'conf.d'
#include_if_exists = '...'              # include file only if it exists
#include = '...'                        # include file


#------------------------------------------------------------------------------
# CUSTOMIZED OPTIONS
#------------------------------------------------------------------------------

# Add settings for extensions here
root@postgresql-b75dbb4c7-7fkdh:/# vi /var/lib/postgresql/data/postgresql.conf
root@postgresql-b75dbb4c7-7fkdh:/# vi  /var/lib/postgresql/data/pg_hba.conf
root@postgresql-b75dbb4c7-7fkdh:/# cd /etc/
adduser.conf            group-                  localtime               profile                 shadow
alternatives/           gshadow                 logcheck/               profile.d/              shadow-
apt/                    gshadow-                login.defs              protocols               shells
bash.bashrc             gss/                    logrotate.d/            .pwd.lock               skel/
bindresvport.blacklist  host.conf               mke2fs.conf             rc0.d/                  ssl/
cron.d/                 hostname                motd                    rc1.d/                  subgid
cron.daily/             hosts                   mtab                    rc2.d/                  subuid
debconf.conf            init.d/                 networks                rc3.d/                  systemd/
debian_version          inputrc                 nsswitch.conf           rc4.d/                  terminfo/
default/                issue                   opt/                    rc5.d/                  timezone
deluser.conf            issue.net               os-release              rc6.d/                  ucf.conf
dpkg/                   kernel/                 pam.conf                rcS.d/                  update-motd.d/
e2scrub.conf            ld.so.cache             pam.d/                  resolv.conf             vim/
environment             ld.so.conf              passwd                  rmt                     X11/
ethertypes              ld.so.conf.d/           passwd-                 rpc                     xattr.conf
fstab                   libaudit.conf           perl/                   security/
gai.conf                locale.alias            postgresql/             selinux/
group                   locale.gen              postgresql-common/      services
root@postgresql-b75dbb4c7-7fkdh:/# cd /etc/postgresql
root@postgresql-b75dbb4c7-7fkdh:/etc/postgresql# ls -lrt
total 8
-rw-r--r--. 1 root root 218 Nov  6 17:57 postgresql.conf
-rw-r--r--. 1 root root 125 Nov  6 17:57 pg_hba.conf
root@postgresql-b75dbb4c7-7fkdh:/etc/postgresql# vi pg_hba.conf
root@postgresql-b75dbb4c7-7fkdh:/etc/postgresql# vi postgresql.conf
root@postgresql-b75dbb4c7-7fkdh:/etc/postgresql# cd /var/lo
local/ lock/  log/
root@postgresql-b75dbb4c7-7fkdh:/etc/postgresql# cd /var/log/postgresql/
root@postgresql-b75dbb4c7-7fkdh:/var/log/postgresql# ls -rlt
total 0
root@postgresql-b75dbb4c7-7fkdh:/var/log/postgresql# cd
root@postgresql-b75dbb4c7-7fkdh:~# kubectl run my-postgresql-cluster-client --rm --tty -i --restart='Never' --namespace default --image docker.io/bitnami/postgresql:17.0.0-debian-12-r9 --env="PGPASSWORD=$POSTGRES_PASSWORD" \
      --command -- psql --host my-postgresql-cluster -U postgres -d postgres -p 5432
bash: kubectl: command not found
root@postgresql-b75dbb4c7-7fkdh:~#
root@postgresql-b75dbb4c7-7fkdh:~# exit
exit
command terminated with exit code 127
[root@lab01 ~]# kubectl run my-postgresql-cluster-client --rm --tty -i --restart='Never' --namespace default   --command -- psql --host  postgresql-b75dbb4c7-7fkdh  -U postgres -d postgres -p 5432
error: required flag(s) "image" not set
[root@lab01 ~]# kubectl run my-postgresql-cluster-client --rm --tty -i --restart='Never' --namespace default --image docker.io/bitnami/postgresql:14.0.0 --command -- psql --host my-postgresql-cluster -U postgres -d postgres -p 5432




^C[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# kubectl exec -it postgres-665b7554dc-cddgq -- psql -h localhost -U ps_user --password -p 5432 ps_db
Error from server (NotFound): pods "postgres-665b7554dc-cddgq" not found
[root@lab01 ~]# kubectl exec -it postgresql-b75dbb4c7-7fkdh -- psql -h localhost -U postgres --password -p 5432 ps_db
Password:
psql: error: connection to server at "localhost" (::1), port 5432 failed: FATAL:  role "postgres" does not exist
command terminated with exit code 2
[root@lab01 ~]# psql -h 192.168.49.2 -p 30867 -U postgres
psql: error: could not connect to server: Connection refused
        Is the server running on host "192.168.49.2" and accepting
        TCP/IP connections on port 30867?
[root@lab01 ~]# kubectl exec -it postgres-665b7554dc-cddgq -- pg_ctl reload
Error from server (NotFound): pods "postgres-665b7554dc-cddgq" not found
[root@lab01 ~]# kubectl exec -it postgresql-b75dbb4c7-7fkdh -- pg_ctl reload
pg_ctl: cannot be run as root
Please log in (using, e.g., "su") as the (unprivileged) user that will
own the server process.
command terminated with exit code 1
[root@lab01 ~]# sudo postgres kubectl exec -it postgres-665b7554dc-cddgq -- pg_ctl reload
sudo: postgres: command not found
[root@lab01 ~]#
[root@lab01 ~]# postgres kubectl exec -it postgres-665b7554dc-cddgq -- pg_ctl reload
bash: postgres: command not found...

Install package 'postgresql-server' to provide command 'postgres'? [N/y] ^C
[root@lab01 ~]# sudo su postgres kubectl exec -it postgres-665b7554dc-cddgq -- pg_ctl reload
su: invalid option -- 'i'
Try 'su --help' for more information.
[root@lab01 ~]# sudo su -i postgres kubectl exec -it postgres-665b7554dc-cddgq -- pg_ctl reload
su: invalid option -- 'i'
Try 'su --help' for more information.
[root@lab01 ~]# su - postgres
su: user postgres does not exist or the user entry does not contain all the required fields
[root@lab01 ~]# useradd postgres
[root@lab01 ~]# passwd postgres
Changing password for user postgres.
New password:
BAD PASSWORD: The password contains the user name in some form
Retype new password:
passwd: all authentication tokens updated successfully.
[root@lab01 ~]# su - postgres
[postgres@lab01 ~]$ kubectl exec -it postgres-665b7554dc-cddgq -- pg_ctl reload
E1107 00:10:55.182135  390578 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp [::1]:8080: connect: connection refused"
E1107 00:10:55.184794  390578 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp [::1]:8080: connect: connection refused"
E1107 00:10:55.188063  390578 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp [::1]:8080: connect: connection refused"
E1107 00:10:55.191382  390578 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp [::1]:8080: connect: connection refused"
The connection to the server localhost:8080 was refused - did you specify the right host or port?
[postgres@lab01 ~]$
[postgres@lab01 ~]$ kubectl exec -it postgresql-b75dbb4c7-7fkdh -- pg_ctl reload
E1107 00:11:16.254310  390658 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp [::1]:8080: connect: connection refused"
E1107 00:11:16.255960  390658 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp [::1]:8080: connect: connection refused"
E1107 00:11:16.259270  390658 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp [::1]:8080: connect: connection refused"
E1107 00:11:16.262192  390658 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp [::1]:8080: connect: connection refused"
The connection to the server localhost:8080 was refused - did you specify the right host or port?
[postgres@lab01 ~]$
[postgres@lab01 ~]$ kubectl exec -it postgresql-b75dbb4c7-7fkdh -- su - postgres
E1107 00:12:16.169527  390857 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp [::1]:8080: connect: connection refused"
E1107 00:12:16.172546  390857 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp [::1]:8080: connect: connection refused"
E1107 00:12:16.175774  390857 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp [::1]:8080: connect: connection refused"
E1107 00:12:16.179022  390857 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp [::1]:8080: connect: connection refused"
The connection to the server localhost:8080 was refused - did you specify the right host or port?
[postgres@lab01 ~]$ exit
logout
[root@lab01 ~]# kubectl exec -it postgresql-b75dbb4c7-7fkdh -- su - postgres
postgres@postgresql-b75dbb4c7-7fkdh:~$
postgres@postgresql-b75dbb4c7-7fkdh:~$
postgres@postgresql-b75dbb4c7-7fkdh:~$ pg_ctl reload
-bash: pg_ctl: command not found
postgres@postgresql-b75dbb4c7-7fkdh:~$
postgres@postgresql-b75dbb4c7-7fkdh:~$ find / -name pg_ctl
find: '/etc/ssl/private': Permission denied
find: '/proc/tty/driver': Permission denied
find: '/proc/442/task/442/fd': Permission denied
find: '/proc/442/task/442/ns': Permission denied
find: '/proc/442/fd': Permission denied
find: '/proc/442/map_files': Permission denied
find: '/proc/442/ns': Permission denied
find: '/root': Permission denied
/usr/lib/postgresql/14/bin/pg_ctl
find: '/var/cache/apt/archives/partial': Permission denied
find: '/var/cache/ldconfig': Permission denied
find: '/var/lib/apt/lists/partial': Permission denied
postgres@postgresql-b75dbb4c7-7fkdh:~$ /usr/lib/postgresql/14/bin/pg_ctl reload
pg_ctl: no database directory specified and environment variable PGDATA unset
Try "pg_ctl --help" for more information.
postgres@postgresql-b75dbb4c7-7fkdh:~$ /usr/lib/postgresql/14/bin/pg_ctl reload
pg_ctl: no database directory specified and environment variable PGDATA unset
Try "pg_ctl --help" for more information.
postgres@postgresql-b75dbb4c7-7fkdh:~$ export PGDATA=/var/lib/postgresql/data
postgres@postgresql-b75dbb4c7-7fkdh:~$ /usr/lib/postgresql/14/bin/pg_ctl reload
server signaled
postgres@postgresql-b75dbb4c7-7fkdh:~$
postgres@postgresql-b75dbb4c7-7fkdh:~$ exit
logout
[root@lab01 ~]# sudo su -i postgres kubectl exec -it postgres-665b7554dc-cddgq -- pg_ctl reload
su: invalid option -- 'i'
Try 'su --help' for more information.
[root@lab01 ~]# psql -h 192.168.49.2 -p 30867 -U postgres
psql: error: could not connect to server: Connection refused
        Is the server running on host "192.168.49.2" and accepting
        TCP/IP connections on port 30867?
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# kubectl exec -it postgresql-b75dbb4c7-7fkdh -- su - postgres
postgres@postgresql-b75dbb4c7-7fkdh:~$ psql
psql: error: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  role "postgres" does not exist
postgres@postgresql-b75dbb4c7-7fkdh:~$ psql -U ps_user
psql: error: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  database "ps_user" does not exist
postgres@postgresql-b75dbb4c7-7fkdh:~$ psql -U ps_user  -d postgres
psql (14.13 (Debian 14.13-1.pgdg120+1))
Type "help" for help.

postgres=# show listen_address;
ERROR:  unrecognized configuration parameter "listen_address"
postgres=# show listen_address;
ERROR:  unrecognized configuration parameter "listen_address"
postgres=#
postgres=#
postgres=# show listen_address();
ERROR:  syntax error at or near "("
LINE 1: show listen_address();
                           ^
postgres=# show work_mem;
 work_mem
----------
 10MB
(1 row)

postgres=#
postgres=#
postgres=# select name, setting from pg_settings;


postgres@postgresql-b75dbb4c7-7fkdh:~$ psql -U ps_user  -d postgres
psql (14.13 (Debian 14.13-1.pgdg120+1))
Type "help" for help.

postgres=# select name, setting from pg_settings where name like '%listen%';
       name       | setting
------------------+---------
 listen_addresses | *
(1 row)

postgres=# select * from pg_hba_file_rules;
postgres=# \q
postgres@postgresql-b75dbb4c7-7fkdh:~$
postgres@postgresql-b75dbb4c7-7fkdh:~$ cd
postgres@postgresql-b75dbb4c7-7fkdh:~$ cd /etc/postgresql
postgres@postgresql-b75dbb4c7-7fkdh:/etc/postgresql$ ls -lrt
total 8
-rw-r--r--. 1 root root 218 Nov  6 17:57 postgresql.conf
-rw-r--r--. 1 root root 125 Nov  6 17:57 pg_hba.conf
postgres@postgresql-b75dbb4c7-7fkdh:/etc/postgresql$ vi pg_hba.conf
postgres@postgresql-b75dbb4c7-7fkdh:/etc/postgresql$ cd /var/lib/postgresql/data
postgres@postgresql-b75dbb4c7-7fkdh:~/data$ vi pg_j
postgres@postgresql-b75dbb4c7-7fkdh:~/data$ vi pg_hba.conf
postgres@postgresql-b75dbb4c7-7fkdh:~/data$ /usr/lib/postgresql/14/bin/pg_ctl reload
pg_ctl: no database directory specified and environment variable PGDATA unset
Try "pg_ctl --help" for more information.
postgres@postgresql-b75dbb4c7-7fkdh:~/data$  export PGDATA=/var/lib/postgresql/data
postgres@postgresql-b75dbb4c7-7fkdh:~/data$ /usr/lib/postgresql/14/bin/pg_ctl reload
server signaled
postgres@postgresql-b75dbb4c7-7fkdh:~/data$
postgres@postgresql-b75dbb4c7-7fkdh:~/data$
postgres@postgresql-b75dbb4c7-7fkdh:~/data$ psql
psql: error: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  role "postgres" does not exist
postgres@postgresql-b75dbb4c7-7fkdh:~/data$ psql -U ps_user  -d postgres
psql (14.13 (Debian 14.13-1.pgdg120+1))
Type "help" for help.

postgres=#
postgres=# select * from pg_hba_file_rules;
postgres=# \q
postgres@postgresql-b75dbb4c7-7fkdh:~/data$  export PGDATA=/var/lib/postgresql/data
postgres@postgresql-b75dbb4c7-7fkdh:~/data$ exit
logout
There are stopped jobs.
postgres@postgresql-b75dbb4c7-7fkdh:~/data$ exit
logout
command terminated with exit code 1
[root@lab01 ~]# psql -h 192.168.49.2 -p 30867 -U postgres
psql: error: could not connect to server: Connection refused
        Is the server running on host "192.168.49.2" and accepting
        TCP/IP connections on port 30867?
[root@lab01 ~]#
[root@lab01 ~]# psql -h 192.168.49.2 -p 30867 -U ps_user
psql: error: could not connect to server: Connection refused
        Is the server running on host "192.168.49.2" and accepting
        TCP/IP connections on port 30867?
[root@lab01 ~]# psql -h 192.168.49.2 -p 30867 -U ps_user -d postgres
psql: error: could not connect to server: Connection refused
        Is the server running on host "192.168.49.2" and accepting
        TCP/IP connections on port 30867?
[root@lab01 ~]# psql -h 192.168.49.2 -p 5432 -U ps_user -d postgres
psql: error: could not connect to server: Connection refused
        Is the server running on host "192.168.49.2" and accepting
        TCP/IP connections on port 5432?
[root@lab01 ~]#
[root@lab01 ~]# psql -h 192.168.49.2 -p 5432 -U ps_user -d postgres
psql: error: could not connect to server: Connection refused
        Is the server running on host "192.168.49.2" and accepting
        TCP/IP connections on port 5432?
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# minikube ip
192.168.49.2
[root@lab01 ~]# telnet 192.168.49.2 5432
bash: telnet: command not found...
Install package 'telnet' to provide command 'telnet'? [N/y] ^C
[root@lab01 ~]# dnf install telnet
Last metadata expiration check: 0:57:52 ago on Wednesday 06 November 2024 11:21:35 PM.
Dependencies resolved.
=======================================================================================================================================
 Package                      Architecture                 Version                               Repository                       Size
=======================================================================================================================================
Installing:
 telnet                       x86_64                       1:0.17-85.el9                         appstream                        64 k

Transaction Summary
=======================================================================================================================================
Install  1 Package

Total download size: 64 k
Installed size: 121 k
Is this ok [y/N]: y
Downloading Packages:
telnet-0.17-85.el9.x86_64.rpm                                                                          446 kB/s |  64 kB     00:00
---------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                  158 kB/s |  64 kB     00:00
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                                                                               1/1
  Installing       : telnet-1:0.17-85.el9.x86_64                                                                                   1/1
  Running scriptlet: telnet-1:0.17-85.el9.x86_64                                                                                   1/1
  Verifying        : telnet-1:0.17-85.el9.x86_64                                                                                   1/1

Installed:
  telnet-1:0.17-85.el9.x86_64

Complete!
[root@lab01 ~]# telnet 192.168.49.2 5432
Trying 192.168.49.2...
telnet: connect to address 192.168.49.2: Connection refused
[root@lab01 ~]# telnet 192.168.49.2 30867
Trying 192.168.49.2...
telnet: connect to address 192.168.49.2: Connection refused
[root@lab01 ~]# kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          24h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   86m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   53m
[root@lab01 ~]# kubectl exec -it postgresql-b75dbb4c7-7fkdh -- su - postgres
postgres@postgresql-b75dbb4c7-7fkdh:~$
postgres@postgresql-b75dbb4c7-7fkdh:~$
postgres@postgresql-b75dbb4c7-7fkdh:~$
postgres@postgresql-b75dbb4c7-7fkdh:~$
postgres@postgresql-b75dbb4c7-7fkdh:~$
postgres@postgresql-b75dbb4c7-7fkdh:~$  export PGDATA=/var/lib/postgresql/data
postgres@postgresql-b75dbb4c7-7fkdh:~$ cd /var/lib/postgresql/data
postgres@postgresql-b75dbb4c7-7fkdh:~/data$ vi postgresql.conf
postgres@postgresql-b75dbb4c7-7fkdh:~/data$
postgres@postgresql-b75dbb4c7-7fkdh:~/data$ exit
logout
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# kubectl get pods
NAME                           READY   STATUS    RESTARTS   AGE
my-postgresql-cluster-client   0/1     Error     0          14m
postgresql-b75dbb4c7-7fkdh     1/1     Running   0          54m
postgresql-b75dbb4c7-86hsc     1/1     Running   0          54m
postgresql-b75dbb4c7-tlh2x     1/1     Running   0          54m
[root@lab01 ~]# kubectl delete pod postgresql-b75dbb4c7-7fkdh
pod "postgresql-b75dbb4c7-7fkdh" deleted
[root@lab01 ~]#
[root@lab01 ~]# kubectl get pods
NAME                           READY   STATUS    RESTARTS   AGE
my-postgresql-cluster-client   0/1     Error     0          14m
postgresql-b75dbb4c7-86hsc     1/1     Running   0          54m
postgresql-b75dbb4c7-95sh7     1/1     Running   0          3s
postgresql-b75dbb4c7-tlh2x     1/1     Running   0          54m
[root@lab01 ~]#
[root@lab01 ~]# telnet 192.168.49.2 30867
Trying 192.168.49.2...
telnet: connect to address 192.168.49.2: Connection refused
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# telnet postgresql-b75dbb4c7-95sh7 30867

^C
[root@lab01 ~]#
[root@lab01 ~]# kubectl port-forward svc/postgresql 5432:5432
Forwarding from 127.0.0.1:5432 -> 5432
Forwarding from [::1]:5432 -> 5432

Handling connection for 5432
Handling connection for 5432
Handling connection for 5432
^C[root@lab01 ~]kubectl get svc postgresql -o yamlml
apiVersion: v1
kind: Service
metadata:
  annotations:
    meta.helm.sh/release-name: my-postgresql
    meta.helm.sh/release-namespace: default
  creationTimestamp: "2024-11-06T17:56:59Z"
  labels:
    app: postgresql
    app.kubernetes.io/managed-by: Helm
  name: postgresql
  namespace: default
  resourceVersion: "32805"
  uid: 7c9ef209-6cbd-4190-a20f-82961985aabc
spec:
  allocateLoadBalancerNodePorts: true
  clusterIP: 10.102.5.81
  clusterIPs:
  - 10.102.5.81
  externalTrafficPolicy: Cluster
  internalTrafficPolicy: Cluster
  ipFamilies:
  - IPv4
  ipFamilyPolicy: SingleStack
  ports:
  - nodePort: 31385
    port: 5432
    protocol: TCP
    targetPort: 5432
  selector:
    app: postgresql
  sessionAffinity: None
  type: LoadBalancer
status:
  loadBalancer: {}
[root@lab01 ~]# telnet 31385 5432
Trying 0.0.122.153...
^C
[root@lab01 ~]# telnet 10.102.5.81  31385
Trying 10.102.5.81...

^C
[root@lab01 ~]# kubectl get svc postgresql -o yaml
apiVersion: v1
kind: Service
metadata:
  annotations:
    meta.helm.sh/release-name: my-postgresql
    meta.helm.sh/release-namespace: default
  creationTimestamp: "2024-11-06T17:56:59Z"
  labels:
    app: postgresql
    app.kubernetes.io/managed-by: Helm
  name: postgresql
  namespace: default
  resourceVersion: "32805"
  uid: 7c9ef209-6cbd-4190-a20f-82961985aabc
spec:
  allocateLoadBalancerNodePorts: true
  clusterIP: 10.102.5.81
  clusterIPs:
  - 10.102.5.81
  externalTrafficPolicy: Cluster
  internalTrafficPolicy: Cluster
  ipFamilies:
  - IPv4
  ipFamilyPolicy: SingleStack
  ports:
  - nodePort: 31385
    port: 5432
    protocol: TCP
    targetPort: 5432
  selector:
    app: postgresql
  sessionAffinity: None
  type: LoadBalancer
status:
  loadBalancer: {}
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# kubectl get svc postgresql -o yaml
apiVersion: v1
kind: Service
metadata:
  annotations:
    meta.helm.sh/release-name: my-postgresql
    meta.helm.sh/release-namespace: default
  creationTimestamp: "2024-11-06T17:56:59Z"
  labels:
    app: postgresql
    app.kubernetes.io/managed-by: Helm
  name: postgresql
  namespace: default
  resourceVersion: "32805"
  uid: 7c9ef209-6cbd-4190-a20f-82961985aabc
spec:
  allocateLoadBalancerNodePorts: true
  clusterIP: 10.102.5.81
  clusterIPs:
  - 10.102.5.81
  externalTrafficPolicy: Cluster
  internalTrafficPolicy: Cluster
  ipFamilies:
  - IPv4
  ipFamilyPolicy: SingleStack
  ports:
  - nodePort: 31385
    port: 5432
    protocol: TCP
    targetPort: 5432
  selector:
    app: postgresql
  sessionAffinity: None
  type: LoadBalancer
status:
  loadBalancer: {}
[root@lab01 ~]# kubectl get pods -n metallb-system
NAME                         READY   STATUS    RESTARTS   AGE
controller-8b7b6bf6b-ktfbw   1/1     Running   0          33m
speaker-wv4lq                1/1     Running   0          33m
[root@lab01 ~]# cat metallb-config.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  namespace: metallb-system
  name: config
data:
  config: |
    address-pools:
    - name: default
      protocol: layer2
      addresses:
      - 192.168.49.1-192.168.49.254  # Adjust to a range of IPs in your network

[root@lab01 ~]# kubectl port-forward svc/postgresql 5432:5432^C
[root@lab01 ~]# vi metallb-config.yaml
[root@lab01 ~]# kubectl apply -f metallb-config.yaml
configmap/config configured
[root@lab01 ~]# kubectl get pods -n metallb-system
NAME                         READY   STATUS    RESTARTS   AGE
controller-8b7b6bf6b-ktfbw   1/1     Running   0          35m
speaker-wv4lq                1/1     Running   0          35m
[root@lab01 ~]# kubectl get configmap -n metallb-system config -o yaml
apiVersion: v1
data:
  config: |
    address-pools:
    - name: default
      protocol: layer2
      addresses:
      - 192.168.49.1-192.168.49.250  # Adjust to a range of IPs in your network
kind: ConfigMap
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"v1","data":{"config":"address-pools:\n- name: default\n  protocol: layer2\n  addresses:\n  - 192.168.49.1-192.168.49.250  # Adjust to a range of IPs in your network\n"},"kind":"ConfigMap","metadata":{"annotations":{},"name":"config","namespace":"metallb-system"}}
  creationTimestamp: "2024-11-06T18:19:18Z"
  name: config
  namespace: metallb-system
  resourceVersion: "36028"
  uid: 2022fa48-f1e4-4de5-a880-30fe7736cfc9
[root@lab01 ~]# minikube addons enable metallb
! metallb is a 3rd party addon and is not maintained or verified by minikube maintainers, enable at your own risk.
! metallb does not currently have an associated maintainer.
  - Using image quay.io/metallb/controller:v0.9.6
  - Using image quay.io/metallb/speaker:v0.9.6
* The 'metallb' addon is enabled
[root@lab01 ~]# kubectl delete pod -n metallb-system -l app=metallb
pod "controller-8479c96bd9-zbkqr" deleted
pod "controller-8b7b6bf6b-ktfbw" deleted
pod "speaker-gjh4k" deleted
[root@lab01 ~]# kubectl get pods -n metallb-system
NAME                          READY   STATUS              RESTARTS   AGE
controller-8479c96bd9-nkg5t   0/1     ContainerCreating   0          8s
controller-8b7b6bf6b-jszqh    0/1     Running             0          8s
speaker-lbgft                 0/1     ContainerCreating   0          8s
[root@lab01 ~]# kubectl get pods -n metallb-system
NAME                          READY   STATUS              RESTARTS   AGE
controller-8479c96bd9-nkg5t   0/1     ContainerCreating   0          12s
controller-8b7b6bf6b-jszqh    0/1     Running             0          12s
speaker-lbgft                 0/1     ContainerCreating   0          12s
[root@lab01 ~]# kubectl get pods -n metallb-system
NAME                          READY   STATUS              RESTARTS   AGE
controller-8479c96bd9-nkg5t   0/1     ContainerCreating   0          13s
controller-8b7b6bf6b-jszqh    0/1     Running             0          13s
speaker-lbgft                 0/1     ContainerCreating   0          13s
[root@lab01 ~]# kubectl get pods -n metallb-system
NAME                          READY   STATUS              RESTARTS   AGE
controller-8479c96bd9-nkg5t   0/1     ContainerCreating   0          14s
controller-8b7b6bf6b-jszqh    0/1     Running             0          14s
speaker-lbgft                 0/1     ContainerCreating   0          14s
[root@lab01 ~]# kubectl get pods -n metallb-system
NAME                          READY   STATUS              RESTARTS   AGE
controller-8479c96bd9-nkg5t   0/1     ContainerCreating   0          14s
controller-8b7b6bf6b-jszqh    0/1     Running             0          14s
speaker-lbgft                 0/1     ContainerCreating   0          14s
[root@lab01 ~]# kubectl get pods -n metallb-system
NAME                          READY   STATUS              RESTARTS   AGE
controller-8479c96bd9-nkg5t   0/1     ContainerCreating   0          15s
controller-8b7b6bf6b-jszqh    0/1     Running             0          15s
speaker-lbgft                 0/1     ContainerCreating   0          15s
[root@lab01 ~]# kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          24h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   95m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   62m
[root@lab01 ~]# kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          24h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   95m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   62m
[root@lab01 ~]# kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          24h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   96m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   62m
[root@lab01 ~]# kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          24h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   96m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   62m
[root@lab01 ~]# kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          24h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   96m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   62m
[root@lab01 ~]# kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          24h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   96m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   62m
[root@lab01 ~]# kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          24h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   96m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   62m
[root@lab01 ~]# kubectl get svc
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP      10.96.0.1      <none>        443/TCP          24h
postgres     NodePort       10.97.172.86   <none>        5432:30867/TCP   96m
postgresql   LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   62m
[root@lab01 ~]# kubectl get svc postgresql -o yaml
apiVersion: v1
kind: Service
metadata:
  annotations:
    meta.helm.sh/release-name: my-postgresql
    meta.helm.sh/release-namespace: default
  creationTimestamp: "2024-11-06T17:56:59Z"
  labels:
    app: postgresql
    app.kubernetes.io/managed-by: Helm
  name: postgresql
  namespace: default
  resourceVersion: "32805"
  uid: 7c9ef209-6cbd-4190-a20f-82961985aabc
spec:
  allocateLoadBalancerNodePorts: true
  clusterIP: 10.102.5.81
  clusterIPs:
  - 10.102.5.81
  externalTrafficPolicy: Cluster
  internalTrafficPolicy: Cluster
  ipFamilies:
  - IPv4
  ipFamilyPolicy: SingleStack
  ports:
  - nodePort: 31385
    port: 5432
    protocol: TCP
    targetPort: 5432
  selector:
    app: postgresql
  sessionAffinity: None
  type: LoadBalancer
status:
  loadBalancer: {}
[root@lab01 ~]# minikube tunnel
Status:
        machine: minikube
        pid: 396692
        route: 10.96.0.0/12 -> 192.168.49.2
        minikube: Running
        services: [postgresql]
    errors:
                minikube: no errors
                router: no errors
                loadbalancer emulator: no errors



^C[root@lab01 ~]# minikube tunnel
Status:
        machine: minikube
        pid: 398315
        route: 10.96.0.0/12 -> 192.168.49.2
        minikube: Running
        services: [postgresql]
    errors:
                minikube: no errors
                router: no errors
                loadbalancer emulator: no errors



 kubectl get svc
^C[root@lab01 ~]minikube service --url postgres
http://192.168.49.2:30867

X Exiting due to SVC_UNREACHABLE: service not available: no running pod for service postgres found
*
╭─────────────────────────────────────────────────────────────────────────────────────────────╮
│                                                                                             │
│    * If the above advice does not help, please let us know:                                 │
│      https://github.com/kubernetes/minikube/issues/new/choose                               │
│                                                                                             │
│    * Please run `minikube logs --file=logs.txt` and attach logs.txt to the GitHub issue.    │
│    * Please also attach the following file to the GitHub issue:                             │
│    * - /tmp/minikube_service_c713fa4494bd174456e09740aab4b02fd9eafbbf_0.log                 │
│                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────╯

[root@lab01 ~]# kubectl get pods
NAME                           READY   STATUS    RESTARTS   AGE
my-postgresql-cluster-client   0/1     Error     0          43m
postgresql-b75dbb4c7-86hsc     1/1     Running   0          83m
postgresql-b75dbb4c7-95sh7     1/1     Running   0          28m
postgresql-b75dbb4c7-tlh2x     1/1     Running   0          83m
[root@lab01 ~]# kubectl get deployment
NAME         READY   UP-TO-DATE   AVAILABLE   AGE
postgresql   3/3     3            3           83m
[root@lab01 ~]# minikube service --url postgresql
http://192.168.49.2:31385
[root@lab01 ~]#
[root@lab01 ~]# kubectl get svc postgresql
NAME         TYPE           CLUSTER-IP    EXTERNAL-IP   PORT(S)          AGE
postgresql   LoadBalancer   10.102.5.81   <pending>     5432:31385/TCP   84m
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# kubectl get svc postgresql -w
NAME         TYPE           CLUSTER-IP    EXTERNAL-IP   PORT(S)          AGE
postgresql   LoadBalancer   10.102.5.81   <pending>     5432:31385/TCP   85m

^C[root@lab01 ~]kubectl get pods -n metallb-systemem
NAME                          READY   STATUS    RESTARTS   AGE
controller-8479c96bd9-nkg5t   1/1     Running   0          24m
speaker-lbgft                 1/1     Running   0          24m
[root@lab01 ~]# kubectl create service loadbalancer my-service --tcp=80:8080 --selector=app=my-app
error: unknown flag: --selector
See 'kubectl create service loadbalancer --help' for usage.
[root@lab01 ~]# kubectl create service loadbalancer my-service --tcp=80:8080
service/my-service created
[root@lab01 ~]# kubectl get svc my-service
NAME         TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)        AGE
my-service   LoadBalancer   10.97.247.56   <pending>     80:31337/TCP   40s
[root@lab01 ~]# kubectl get pods
NAME                           READY   STATUS    RESTARTS   AGE
my-postgresql-cluster-client   0/1     Error     0          48m
postgresql-b75dbb4c7-86hsc     1/1     Running   0          88m
postgresql-b75dbb4c7-95sh7     1/1     Running   0          34m
postgresql-b75dbb4c7-tlh2x     1/1     Running   0          88m
[root@lab01 ~]# kubectl get pods^C
[root@lab01 ~]# helm repo add metallb https://metallb.github.io/metallb
"metallb" has been added to your repositories
[root@lab01 ~]# helm repo add metallb https://metallb.github.io/metallb
"metallb" already exists with the same configuration, skipping
[root@lab01 ~]# helm install metallb metallb/metallb
Error: INSTALLATION FAILED: Unable to continue with install: CustomResourceDefinition "bfdprofiles.metallb.io" in namespace "" exists and cannot be imported into the current release: invalid ownership metadata; label validation error: missing key "app.kubernetes.io/managed-by": must be set to "Helm"; annotation validation error: missing key "meta.helm.sh/release-name": must be set to "metallb"; annotation validation error: missing key "meta.helm.sh/release-namespace": must be set to "default"
[root@lab01 ~]# helm install metallb metallb/metallb -f values.yaml
Error: INSTALLATION FAILED: open values.yaml: no such file or directory
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# vi values.yaml
[root@lab01 ~]# helm install my-postgresql bitnami/postgresql -f values.yaml

Error: INSTALLATION FAILED: cannot re-use a name that is still in use
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# helm install my-postgresql1 bitnami/postgresql -f values.yaml
NAME: my-postgresql1
LAST DEPLOYED: Thu Nov  7 01:01:51 2024
NAMESPACE: default
STATUS: deployed
REVISION: 1
TEST SUITE: None
NOTES:
CHART NAME: postgresql
CHART VERSION: 16.1.1
APP VERSION: 17.0.0

** Please be patient while the chart is being deployed **

PostgreSQL can be accessed via port 5432 on the following DNS names from within your cluster:

    my-postgresql1.default.svc.cluster.local - Read/Write connection

To get the password for "postgres" run:

    export POSTGRES_PASSWORD=$(kubectl get secret --namespace default my-postgresql1 -o jsonpath="{.data.postgres-password}" | base64 -d)

To connect to your database run the following command:

    kubectl run my-postgresql1-client --rm --tty -i --restart='Never' --namespace default --image docker.io/bitnami/postgresql:17.0.0-debian-12-r9 --env="PGPASSWORD=$POSTGRES_PASSWORD" \
      --command -- psql --host my-postgresql1 -U postgres -d postgres -p 5432

    > NOTE: If you access the container using bash, make sure that you execute "/opt/bitnami/scripts/postgresql/entrypoint.sh /bin/bash" in order to avoid the error "psql: local user with ID 1001} does not exist"

To connect to your database from outside the cluster execute the following commands:

    kubectl port-forward --namespace default svc/my-postgresql1 5432:5432 &
    PGPASSWORD="$POSTGRES_PASSWORD" psql --host 127.0.0.1 -U postgres -d postgres -p 5432

WARNING: The configured password will be ignored on new installation in case when previous PostgreSQL release was deleted through the helm command. In that case, old PVC will have an old password, and setting it through helm won't take effect. Deleting persistent volumes (PVs) will solve the issue.

WARNING: There are "resources" sections in the chart not set. Using "resourcesPreset" is not recommended for production. For production installations, please set the following values according to your workload needs:
  - primary.resources
  - readReplicas.resources
+info https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
[root@lab01 ~]# kubectl get svc -w
NAME                TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes          ClusterIP      10.96.0.1      <none>        443/TCP          25h
my-postgresql1      ClusterIP      10.98.118.49   <none>        5432/TCP         7s
my-postgresql1-hl   ClusterIP      None           <none>        5432/TCP         7s
my-service          LoadBalancer   10.97.247.56   <pending>     80:31337/TCP     7m24s
postgres            NodePort       10.97.172.86   <none>        5432:30867/TCP   128m
postgresql          LoadBalancer   10.102.5.81    <pending>     5432:31385/TCP   95m




^C[root@lab01 ~]helm install nginx-ingress ingress-nginx/ingress-nginxnx
Error: INSTALLATION FAILED: repo ingress-nginx not found
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# vi  haproxy-deployment.yaml
[root@lab01 ~]# vi haproxy-configmap.yaml
[root@lab01 ~]# kubectl get pods
NAME                           READY   STATUS    RESTARTS   AGE
my-postgresql-cluster-client   0/1     Error     0          64m
my-postgresql1-0               1/1     Running   0          9m13s
postgresql-b75dbb4c7-86hsc     1/1     Running   0          104m
postgresql-b75dbb4c7-95sh7     1/1     Running   0          49m
postgresql-b75dbb4c7-tlh2x     1/1     Running   0          104m
[root@lab01 ~]# vi haproxy-configmap.yaml
[root@lab01 ~]# kubectl apply -f haproxy-configmap.yaml
configmap/haproxy-config created
[root@lab01 ~]# kubectl apply -f haproxy-deployment.yaml
deployment.apps/haproxy created
[root@lab01 ~]# vi haproxy-service.yaml
[root@lab01 ~]# kubectl apply -f haproxy-service.yaml
service/haproxy created
[root@lab01 ~]# kubectl get svc haproxy
NAME      TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
haproxy   LoadBalancer   10.99.37.103   <pending>     5432:31946/TCP   4s
[root@lab01 ~]#
[root@lab01 ~]# kubectl get svc haproxy
NAME      TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
haproxy   LoadBalancer   10.99.37.103   <pending>     5432:31946/TCP   6s
[root@lab01 ~]# kubectl get svc haproxy
NAME      TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
haproxy   LoadBalancer   10.99.37.103   <pending>     5432:31946/TCP   6s
[root@lab01 ~]# kubectl get svc haproxy
NAME      TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
haproxy   LoadBalancer   10.99.37.103   <pending>     5432:31946/TCP   7s
[root@lab01 ~]# kubectl get svc haproxy
NAME      TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
haproxy   LoadBalancer   10.99.37.103   <pending>     5432:31946/TCP   7s
[root@lab01 ~]# kubectl get svc haproxy
NAME      TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
haproxy   LoadBalancer   10.99.37.103   <pending>     5432:31946/TCP   7s
[root@lab01 ~]#
[root@lab01 ~]# vi metallb-config.yaml
[root@lab01 ~]# kubectl apply -f metallb-config.yaml
configmap/config configured
[root@lab01 ~]# kubectl get pods -n metallb-system
NAME                          READY   STATUS    RESTARTS   AGE
controller-8479c96bd9-nkg5t   1/1     Running   0          43m
speaker-lbgft                 1/1     Running   0          43m
[root@lab01 ~]# kubectl get svc haproxy
NAME      TYPE           CLUSTER-IP     EXTERNAL-IP      PORT(S)          AGE
haproxy   LoadBalancer   10.99.37.103   192.168.49.241   5432:31946/TCP   69s
[root@lab01 ~]# psql -h 192.168.49.241 -p 31946 -U ps_user

psql: error: could not connect to server: No route to host
        Is the server running on host "192.168.49.241" and accepting
        TCP/IP connections on port 31946?
[root@lab01 ~]#
[root@lab01 ~]# psql -h 192.168.49.241 -p 31946^CU ps_user
[root@lab01 ~]# kubectl get pods -l app=haproxy
NAME                       READY   STATUS             RESTARTS      AGE
haproxy-6dd79cf54f-zrc5t   0/1     CrashLoopBackOff   4 (45s ago)   2m34s
[root@lab01 ~]# sudo iptables -L -n
Chain INPUT (policy ACCEPT)
target     prot opt source               destination

Chain FORWARD (policy DROP)
target     prot opt source               destination
DOCKER-USER  0    --  0.0.0.0/0            0.0.0.0/0
DOCKER-ISOLATION-STAGE-1  0    --  0.0.0.0/0            0.0.0.0/0
ACCEPT     0    --  0.0.0.0/0            0.0.0.0/0            ctstate RELATED,ESTABLISHED
DOCKER     0    --  0.0.0.0/0            0.0.0.0/0
ACCEPT     0    --  0.0.0.0/0            0.0.0.0/0
ACCEPT     0    --  0.0.0.0/0            0.0.0.0/0
ACCEPT     0    --  0.0.0.0/0            0.0.0.0/0            ctstate RELATED,ESTABLISHED
DOCKER     0    --  0.0.0.0/0            0.0.0.0/0
ACCEPT     0    --  0.0.0.0/0            0.0.0.0/0
ACCEPT     0    --  0.0.0.0/0            0.0.0.0/0

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination

Chain DOCKER (2 references)
target     prot opt source               destination
ACCEPT     6    --  0.0.0.0/0            192.168.49.2         tcp dpt:22
ACCEPT     6    --  0.0.0.0/0            192.168.49.2         tcp dpt:2376
ACCEPT     6    --  0.0.0.0/0            192.168.49.2         tcp dpt:5000
ACCEPT     6    --  0.0.0.0/0            192.168.49.2         tcp dpt:8443
ACCEPT     6    --  0.0.0.0/0            192.168.49.2         tcp dpt:32443

Chain DOCKER-ISOLATION-STAGE-1 (1 references)
target     prot opt source               destination
DOCKER-ISOLATION-STAGE-2  0    --  0.0.0.0/0            0.0.0.0/0
DOCKER-ISOLATION-STAGE-2  0    --  0.0.0.0/0            0.0.0.0/0
RETURN     0    --  0.0.0.0/0            0.0.0.0/0

Chain DOCKER-ISOLATION-STAGE-2 (2 references)
target     prot opt source               destination
DROP       0    --  0.0.0.0/0            0.0.0.0/0
DROP       0    --  0.0.0.0/0            0.0.0.0/0
RETURN     0    --  0.0.0.0/0            0.0.0.0/0

Chain DOCKER-USER (1 references)
target     prot opt source               destination
RETURN     0    --  0.0.0.0/0            0.0.0.0/0
[root@lab01 ~]# kubectl delete pod controller-8479c96bd9-nkg5t
Error from server (NotFound): pods "controller-8479c96bd9-nkg5t" not found
[root@lab01 ~]# sudo iptables -L -n
Chain INPUT (policy ACCEPT)
target     prot opt source               destination

Chain FORWARD (policy DROP)
target     prot opt source               destination
DOCKER-USER  0    --  0.0.0.0/0            0.0.0.0/0
DOCKER-ISOLATION-STAGE-1  0    --  0.0.0.0/0            0.0.0.0/0
ACCEPT     0    --  0.0.0.0/0            0.0.0.0/0            ctstate RELATED,ESTABLISHED
DOCKER     0    --  0.0.0.0/0            0.0.0.0/0
ACCEPT     0    --  0.0.0.0/0            0.0.0.0/0
ACCEPT     0    --  0.0.0.0/0            0.0.0.0/0
ACCEPT     0    --  0.0.0.0/0            0.0.0.0/0            ctstate RELATED,ESTABLISHED
DOCKER     0    --  0.0.0.0/0            0.0.0.0/0
ACCEPT     0    --  0.0.0.0/0            0.0.0.0/0
ACCEPT     0    --  0.0.0.0/0            0.0.0.0/0

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination

Chain DOCKER (2 references)
target     prot opt source               destination
ACCEPT     6    --  0.0.0.0/0            192.168.49.2         tcp dpt:22
ACCEPT     6    --  0.0.0.0/0            192.168.49.2         tcp dpt:2376
ACCEPT     6    --  0.0.0.0/0            192.168.49.2         tcp dpt:5000
ACCEPT     6    --  0.0.0.0/0            192.168.49.2         tcp dpt:8443
ACCEPT     6    --  0.0.0.0/0            192.168.49.2         tcp dpt:32443

Chain DOCKER-ISOLATION-STAGE-1 (1 references)
target     prot opt source               destination
DOCKER-ISOLATION-STAGE-2  0    --  0.0.0.0/0            0.0.0.0/0
DOCKER-ISOLATION-STAGE-2  0    --  0.0.0.0/0            0.0.0.0/0
RETURN     0    --  0.0.0.0/0            0.0.0.0/0

Chain DOCKER-ISOLATION-STAGE-2 (2 references)
target     prot opt source               destination
DROP       0    --  0.0.0.0/0            0.0.0.0/0
DROP       0    --  0.0.0.0/0            0.0.0.0/0
RETURN     0    --  0.0.0.0/0            0.0.0.0/0

Chain DOCKER-USER (1 references)
target     prot opt source               destination
RETURN     0    --  0.0.0.0/0            0.0.0.0/0
[root@lab01 ~]# psql -h 192.168.49.241 -p 31946 -U ps_user
psql: error: could not connect to server: No route to host
        Is the server running on host "192.168.49.241" and accepting
        TCP/IP connections on port 31946?
[root@lab01 ~]# psql -h 192.168.49.241 -p 5432 -U ps_user
^C
[root@lab01 ~]#
[root@lab01 ~]# kubectl get svc haproxy
NAME      TYPE           CLUSTER-IP     EXTERNAL-IP      PORT(S)          AGE
haproxy   LoadBalancer   10.99.37.103   192.168.49.241   5432:31946/TCP   3m21s
[root@lab01 ~]# kubectl get svc kubectl get svc
Error from server (NotFound): services "kubectl" not found
Error from server (NotFound): services "get" not found
Error from server (NotFound): services "svc" not found
[root@lab01 ~]# kubectl get svc
NAME                TYPE           CLUSTER-IP     EXTERNAL-IP      PORT(S)          AGE
haproxy             LoadBalancer   10.99.37.103   192.168.49.241   5432:31946/TCP   4m1s
kubernetes          ClusterIP      10.96.0.1      <none>           443/TCP          25h
my-postgresql1      ClusterIP      10.98.118.49   <none>           5432/TCP         14m
my-postgresql1-hl   ClusterIP      None           <none>           5432/TCP         14m
my-service          LoadBalancer   10.97.247.56   192.168.49.240   80:31337/TCP     21m
postgres            NodePort       10.97.172.86   <none>           5432:30867/TCP   142m
postgresql          LoadBalancer   10.102.5.81    192.168.49.242   5432:31385/TCP   109m
[root@lab01 ~]# psql -h 192.168.49.242 -p 5432 -U ps_user
psql: error: FATAL:  database "ps_user" does not exist
[root@lab01 ~]# psql -h 192.168.49.242 -p 5432 -U ps_user -d postgres
psql (13.16, server 14.13 (Debian 14.13-1.pgdg120+1))
WARNING: psql major version 13, server major version 14.
         Some psql features might not work.
Type "help" for help.

postgres=# \q
[root@lab01 ~]# ls -lrt
total 101456
-rw-------. 1 root root      1220 Mar  5  2024 anaconda-ks.cfg
drwxr-xr-x. 2 root root         6 Mar  5  2024 Videos
drwxr-xr-x. 2 root root         6 Mar  5  2024 Templates
drwxr-xr-x. 2 root root         6 Mar  5  2024 Public
drwxr-xr-x. 2 root root         6 Mar  5  2024 Pictures
drwxr-xr-x. 2 root root         6 Mar  5  2024 Music
drwxr-xr-x. 2 root root         6 Mar  5  2024 Downloads
drwxr-xr-x. 2 root root         6 Mar  5  2024 Documents
drwxr-xr-x. 2 root root         6 Mar  5  2024 Desktop
-rw-r--r--. 1 root root 103820392 Nov  5 23:48 minikube-linux-amd64
-rw-r--r--. 1 root root        43 Nov  5 23:54 values-postgres.yaml
-rw-r--r--. 1 root root       278 Nov  6 00:06 create_database.sql
-rw-r--r--. 1 root root      1889 Nov  6 00:18 data_insert_2.py
-rw-r--r--. 1 root root       525 Nov  6 00:29 data_insert.py
-rw-r--r--. 1 root root      1706 Nov  6 00:33 fake_insert.py
-rw-r--r--. 1 root root      1162 Nov  6 01:26 postgresql-deployment.yaml
-rw-r--r--. 1 root root       470 Nov  6 01:36 postgresql.conf
-rw-r--r--. 1 root root       144 Nov  6 01:37 pg_hba.conf
-rw-r--r--. 1 root root       794 Nov  6 01:38 postgresql-config.yaml
-rw-r--r--. 1 root root         0 Nov  6 01:41 my-postgresql-cluster-deployment.yaml
-rw-r--r--. 1 root root      6005 Nov  6 01:44 my-postgresql-cluster-statefulset.yaml
drwxr-xr-x. 2 root root       188 Nov  6 22:53 data
drwxr-xr-x. 4 root root        74 Nov  6 23:24 postgresql-chart
-rw-r--r--. 1 root root       748 Nov  7 01:01 values.yaml
-rw-r--r--. 1 root root       559 Nov  7 01:10 haproxy-deployment.yaml
-rw-r--r--. 1 root root       583 Nov  7 01:11 haproxy-configmap.yaml
-rw-r--r--. 1 root root       252 Nov  7 01:11 haproxy-service.yaml
-rw-r--r--. 1 root root       264 Nov  7 01:12 metallb-config.yaml
[root@lab01 ~]# cp -r postgresql-chart/ postgresql-replica
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# cd postgresql-replica
[root@lab01 postgresql-replica]# ls -lrt
total 8
-rw-r--r--. 1 root root 623 Nov  7 01:30 values.yaml
drwxr-xr-x. 2 root root 102 Nov  7 01:30 templates
-rw-r--r--. 1 root root 146 Nov  7 01:30 Chart.yaml
drwxr-xr-x. 2 root root   6 Nov  7 01:30 charts
[root@lab01 postgresql-replica]# cat values.yaml
postgresql:
  username: ps_user
  password: SecurePassword
  database: ps_db
  image: postgres:14
  storage:
    size: 10Gi
  config:
    postgresql_conf: |
      # Custom PostgreSQL configuration
      listen_addresses = '*'
      max_connections = 100
      shared_buffers = 256MB
      effective_cache_size = 768MB
      log_directory = '/var/log/postgresql'
      log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'

    pg_hba_conf: |
      # Custom pg_hba.conf for allowing all IP addresses (dangerous in production, use with caution)
      host all all 0.0.0.0/0 trust

  service:
    type: LoadBalancer
    port: 5432

[root@lab01 postgresql-replica]# vi values.yaml
[root@lab01 postgresql-replica]# ls -lrt
total 8
drwxr-xr-x. 2 root root 102 Nov  7 01:30 templates
-rw-r--r--. 1 root root 146 Nov  7 01:30 Chart.yaml
drwxr-xr-x. 2 root root   6 Nov  7 01:30 charts
-rw-r--r--. 1 root root 574 Nov  7 01:31 values.yaml
[root@lab01 postgresql-replica]# vi Chart.yaml
[root@lab01 postgresql-replica]# ls -lrt
total 8
drwxr-xr-x. 2 root root 102 Nov  7 01:30 templates
drwxr-xr-x. 2 root root   6 Nov  7 01:30 charts
-rw-r--r--. 1 root root 574 Nov  7 01:31 values.yaml
-rw-r--r--. 1 root root 146 Nov  7 01:31 Chart.yaml
[root@lab01 postgresql-replica]# cd templates/
[root@lab01 templates]# ls -lrt
total 20
-rw-r--r--. 1 root root  255 Nov  7 01:30 service.yaml
-rw-r--r--. 1 root root  273 Nov  7 01:30 pv.yaml
-rw-r--r--. 1 root root  262 Nov  7 01:30 pvc.yaml
-rw-r--r--. 1 root root 1260 Nov  7 01:30 deployment.yaml
-rw-r--r--. 1 root root  264 Nov  7 01:30 configmap.yaml
[root@lab01 templates]# vi service.yaml
[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]# ls -rlt
total 20
-rw-r--r--. 1 root root  255 Nov  7 01:30 service.yaml
-rw-r--r--. 1 root root  273 Nov  7 01:30 pv.yaml
-rw-r--r--. 1 root root  262 Nov  7 01:30 pvc.yaml
-rw-r--r--. 1 root root 1260 Nov  7 01:30 deployment.yaml
-rw-r--r--. 1 root root  264 Nov  7 01:30 configmap.yaml
[root@lab01 templates]# cat pv.yaml
apiVersion: v1
kind: PersistentVolume
metadata:
  name: postgres-volume
  labels:
    app: postgresql
spec:
  storageClassName: manual
  capacity:
    storage: {{ .Values.postgresql.storage.size }}
  accessModes:
    - ReadWriteMany
  hostPath:
    path: /data/postgresql

[root@lab01 templates]#
[root@lab01 templates]# pwd
/root/postgresql-replica/templates
[root@lab01 templates]# cat service.yaml
apiVersion: v1
kind: Service
metadata:
  name: postgresql
  labels:
    app: postgresql
spec:
  type: {{ .Values.postgresql.service.type }}
  ports:
    - port: {{ .Values.postgresql.service.port }}
      targetPort: 5432
  selector:
    app: postgresql

[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]# pwd
/root/postgresql-replica/templates
[root@lab01 templates]# >service.yaml
[root@lab01 templates]# vi  service.yaml
[root@lab01 templates]# ls -lrt
total 20
-rw-r--r--. 1 root root  273 Nov  7 01:30 pv.yaml
-rw-r--r--. 1 root root  262 Nov  7 01:30 pvc.yaml
-rw-r--r--. 1 root root 1260 Nov  7 01:30 deployment.yaml
-rw-r--r--. 1 root root  264 Nov  7 01:30 configmap.yaml
-rw-r--r--. 1 root root  235 Nov  7 01:46 service.yaml
[root@lab01 templates]# >pv.yaml
[root@lab01 templates]# vi  pv.yaml
[root@lab01 templates]# >service.yaml
[root@lab01 templates]# vi service.yaml
[root@lab01 templates]# vi pv.yaml
[root@lab01 templates]# >pv
[root@lab01 templates]# >pv.yaml
[root@lab01 templates]# vi pv.yaml
[root@lab01 templates]# >pvc.yaml
[root@lab01 templates]# vi pvc.yaml
[root@lab01 templates]# ls -rlt
total 20
-rw-r--r--. 1 root root 1260 Nov  7 01:30 deployment.yaml
-rw-r--r--. 1 root root  264 Nov  7 01:30 configmap.yaml
-rw-r--r--. 1 root root  253 Nov  7 01:47 service.yaml
-rw-r--r--. 1 root root    0 Nov  7 01:47 pv
-rw-r--r--. 1 root root  314 Nov  7 01:47 pv.yaml
-rw-r--r--. 1 root root  198 Nov  7 01:47 pvc.yaml
[root@lab01 templates]# rm -rf pv
[root@lab01 templates]# >deployment.yaml
[root@lab01 templates]# vi deployment.yaml
[root@lab01 templates]# vi configmap.yaml
[root@lab01 templates]# cat configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: postgres-config
  labels:
    app: postgresql
data:
  postgresql.conf: |
    {{ .Values.postgresql.config.postgresql_conf | nindent 4 }}
  pg_hba.conf: |
    {{ .Values.postgresql.config.pg_hba_conf | nindent 4 }}

[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]#
[root@lab01 templates]# pwd
/root/postgresql-replica/templates
[root@lab01 templates]# cd ../../
[root@lab01 ~]# ls -lrt
total 101456
-rw-------. 1 root root      1220 Mar  5  2024 anaconda-ks.cfg
drwxr-xr-x. 2 root root         6 Mar  5  2024 Videos
drwxr-xr-x. 2 root root         6 Mar  5  2024 Templates
drwxr-xr-x. 2 root root         6 Mar  5  2024 Public
drwxr-xr-x. 2 root root         6 Mar  5  2024 Pictures
drwxr-xr-x. 2 root root         6 Mar  5  2024 Music
drwxr-xr-x. 2 root root         6 Mar  5  2024 Downloads
drwxr-xr-x. 2 root root         6 Mar  5  2024 Documents
drwxr-xr-x. 2 root root         6 Mar  5  2024 Desktop
-rw-r--r--. 1 root root 103820392 Nov  5 23:48 minikube-linux-amd64
-rw-r--r--. 1 root root        43 Nov  5 23:54 values-postgres.yaml
-rw-r--r--. 1 root root       278 Nov  6 00:06 create_database.sql
-rw-r--r--. 1 root root      1889 Nov  6 00:18 data_insert_2.py
-rw-r--r--. 1 root root       525 Nov  6 00:29 data_insert.py
-rw-r--r--. 1 root root      1706 Nov  6 00:33 fake_insert.py
-rw-r--r--. 1 root root      1162 Nov  6 01:26 postgresql-deployment.yaml
-rw-r--r--. 1 root root       470 Nov  6 01:36 postgresql.conf
-rw-r--r--. 1 root root       144 Nov  6 01:37 pg_hba.conf
-rw-r--r--. 1 root root       794 Nov  6 01:38 postgresql-config.yaml
-rw-r--r--. 1 root root         0 Nov  6 01:41 my-postgresql-cluster-deployment.yaml
-rw-r--r--. 1 root root      6005 Nov  6 01:44 my-postgresql-cluster-statefulset.yaml
drwxr-xr-x. 2 root root       188 Nov  6 22:53 data
drwxr-xr-x. 4 root root        74 Nov  6 23:24 postgresql-chart
-rw-r--r--. 1 root root       748 Nov  7 01:01 values.yaml
-rw-r--r--. 1 root root       559 Nov  7 01:10 haproxy-deployment.yaml
-rw-r--r--. 1 root root       583 Nov  7 01:11 haproxy-configmap.yaml
-rw-r--r--. 1 root root       252 Nov  7 01:11 haproxy-service.yaml
-rw-r--r--. 1 root root       264 Nov  7 01:12 metallb-config.yaml
drwxr-xr-x. 4 root root        74 Nov  7 01:31 postgresql-replica
[root@lab01 ~]# kubectl get svc -w
NAME                TYPE           CLUSTER-IP     EXTERNAL-IP      PORT(S)          AGE
haproxy             LoadBalancer   10.99.37.103   192.168.49.241   5432:31946/TCP   42m
kubernetes          ClusterIP      10.96.0.1      <none>           443/TCP          26h
my-postgresql1      ClusterIP      10.98.118.49   <none>           5432/TCP         53m
my-postgresql1-hl   ClusterIP      None           <none>           5432/TCP         53m
my-service          LoadBalancer   10.97.247.56   192.168.49.240   80:31337/TCP     60m
postgres            NodePort       10.97.172.86   <none>           5432:30867/TCP   3h1m
postgresql          LoadBalancer   10.102.5.81    192.168.49.242   5432:31385/TCP   147m


^C[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# ls -lrt
total 101456
-rw-------. 1 root root      1220 Mar  5  2024 anaconda-ks.cfg
drwxr-xr-x. 2 root root         6 Mar  5  2024 Videos
drwxr-xr-x. 2 root root         6 Mar  5  2024 Templates
drwxr-xr-x. 2 root root         6 Mar  5  2024 Public
drwxr-xr-x. 2 root root         6 Mar  5  2024 Pictures
drwxr-xr-x. 2 root root         6 Mar  5  2024 Music
drwxr-xr-x. 2 root root         6 Mar  5  2024 Downloads
drwxr-xr-x. 2 root root         6 Mar  5  2024 Documents
drwxr-xr-x. 2 root root         6 Mar  5  2024 Desktop
-rw-r--r--. 1 root root 103820392 Nov  5 23:48 minikube-linux-amd64
-rw-r--r--. 1 root root        43 Nov  5 23:54 values-postgres.yaml
-rw-r--r--. 1 root root       278 Nov  6 00:06 create_database.sql
-rw-r--r--. 1 root root      1889 Nov  6 00:18 data_insert_2.py
-rw-r--r--. 1 root root       525 Nov  6 00:29 data_insert.py
-rw-r--r--. 1 root root      1706 Nov  6 00:33 fake_insert.py
-rw-r--r--. 1 root root      1162 Nov  6 01:26 postgresql-deployment.yaml
-rw-r--r--. 1 root root       470 Nov  6 01:36 postgresql.conf
-rw-r--r--. 1 root root       144 Nov  6 01:37 pg_hba.conf
-rw-r--r--. 1 root root       794 Nov  6 01:38 postgresql-config.yaml
-rw-r--r--. 1 root root         0 Nov  6 01:41 my-postgresql-cluster-deployment.yaml
-rw-r--r--. 1 root root      6005 Nov  6 01:44 my-postgresql-cluster-statefulset.yaml
drwxr-xr-x. 2 root root       188 Nov  6 22:53 data
drwxr-xr-x. 4 root root        74 Nov  6 23:24 postgresql-chart
-rw-r--r--. 1 root root       748 Nov  7 01:01 values.yaml
-rw-r--r--. 1 root root       559 Nov  7 01:10 haproxy-deployment.yaml
-rw-r--r--. 1 root root       583 Nov  7 01:11 haproxy-configmap.yaml
-rw-r--r--. 1 root root       252 Nov  7 01:11 haproxy-service.yaml
-rw-r--r--. 1 root root       264 Nov  7 01:12 metallb-config.yaml
drwxr-xr-x. 4 root root        74 Nov  7 01:31 postgresql-replica
[root@lab01 ~]# helm install my-postgresql ./postgresql-replica
Error: INSTALLATION FAILED: cannot re-use a name that is still in use
[root@lab01 ~]# helm install my-replica ./postgresql-replica
Error: INSTALLATION FAILED: Unable to continue with install: ConfigMap "postgres-config" in namespace "default" exists and cannot be imported into the current release: invalid ownership metadata; annotation validation error: key "meta.helm.sh/release-name" must equal "my-replica": current value is "my-postgresql"
[root@lab01 ~]# ls -lrt
total 101456
-rw-------. 1 root root      1220 Mar  5  2024 anaconda-ks.cfg
drwxr-xr-x. 2 root root         6 Mar  5  2024 Videos
drwxr-xr-x. 2 root root         6 Mar  5  2024 Templates
drwxr-xr-x. 2 root root         6 Mar  5  2024 Public
drwxr-xr-x. 2 root root         6 Mar  5  2024 Pictures
drwxr-xr-x. 2 root root         6 Mar  5  2024 Music
drwxr-xr-x. 2 root root         6 Mar  5  2024 Downloads
drwxr-xr-x. 2 root root         6 Mar  5  2024 Documents
drwxr-xr-x. 2 root root         6 Mar  5  2024 Desktop
-rw-r--r--. 1 root root 103820392 Nov  5 23:48 minikube-linux-amd64
-rw-r--r--. 1 root root        43 Nov  5 23:54 values-postgres.yaml
-rw-r--r--. 1 root root       278 Nov  6 00:06 create_database.sql
-rw-r--r--. 1 root root      1889 Nov  6 00:18 data_insert_2.py
-rw-r--r--. 1 root root       525 Nov  6 00:29 data_insert.py
-rw-r--r--. 1 root root      1706 Nov  6 00:33 fake_insert.py
-rw-r--r--. 1 root root      1162 Nov  6 01:26 postgresql-deployment.yaml
-rw-r--r--. 1 root root       470 Nov  6 01:36 postgresql.conf
-rw-r--r--. 1 root root       144 Nov  6 01:37 pg_hba.conf
-rw-r--r--. 1 root root       794 Nov  6 01:38 postgresql-config.yaml
-rw-r--r--. 1 root root         0 Nov  6 01:41 my-postgresql-cluster-deployment.yaml
-rw-r--r--. 1 root root      6005 Nov  6 01:44 my-postgresql-cluster-statefulset.yaml
drwxr-xr-x. 2 root root       188 Nov  6 22:53 data
drwxr-xr-x. 4 root root        74 Nov  6 23:24 postgresql-chart
-rw-r--r--. 1 root root       748 Nov  7 01:01 values.yaml
-rw-r--r--. 1 root root       559 Nov  7 01:10 haproxy-deployment.yaml
-rw-r--r--. 1 root root       583 Nov  7 01:11 haproxy-configmap.yaml
-rw-r--r--. 1 root root       252 Nov  7 01:11 haproxy-service.yaml
-rw-r--r--. 1 root root       264 Nov  7 01:12 metallb-config.yaml
drwxr-xr-x. 4 root root        74 Nov  7 01:31 postgresql-replica
[root@lab01 ~]# cd postgresql-
-bash: cd: postgresql-: No such file or directory
[root@lab01 ~]# cd postgresql-replica/
[root@lab01 postgresql-replica]# ls -lrt
total 8
drwxr-xr-x. 2 root root   6 Nov  7 01:30 charts
-rw-r--r--. 1 root root 574 Nov  7 01:31 values.yaml
-rw-r--r--. 1 root root 146 Nov  7 01:31 Chart.yaml
drwxr-xr-x. 2 root root 102 Nov  7 01:49 templates
[root@lab01 postgresql-replica]# cd charts/
[root@lab01 charts]# ;s= rlt
-bash: syntax error near unexpected token `;'
[root@lab01 charts]# ls -rlt
total 0
[root@lab01 charts]# ls -lrt
total 0
[root@lab01 charts]# cd ../
[root@lab01 postgresql-replica]# cd templates/
[root@lab01 templates]# ls -lrt
total 20
-rw-r--r--. 1 root root 253 Nov  7 01:47 service.yaml
-rw-r--r--. 1 root root 314 Nov  7 01:47 pv.yaml
-rw-r--r--. 1 root root 198 Nov  7 01:47 pvc.yaml
-rw-r--r--. 1 root root 917 Nov  7 01:48 deployment.yaml
-rw-r--r--. 1 root root 264 Nov  7 01:49 configmap.yaml
[root@lab01 templates]#
[root@lab01 templates]# vi configmap.yaml
[root@lab01 templates]# ls -lrt^C
[root@lab01 templates]# pwd
/root/postgresql-replica/templates
[root@lab01 templates]# cd ../../
[root@lab01 ~]# ls -lrt
total 101456
-rw-------. 1 root root      1220 Mar  5  2024 anaconda-ks.cfg
drwxr-xr-x. 2 root root         6 Mar  5  2024 Videos
drwxr-xr-x. 2 root root         6 Mar  5  2024 Templates
drwxr-xr-x. 2 root root         6 Mar  5  2024 Public
drwxr-xr-x. 2 root root         6 Mar  5  2024 Pictures
drwxr-xr-x. 2 root root         6 Mar  5  2024 Music
drwxr-xr-x. 2 root root         6 Mar  5  2024 Downloads
drwxr-xr-x. 2 root root         6 Mar  5  2024 Documents
drwxr-xr-x. 2 root root         6 Mar  5  2024 Desktop
-rw-r--r--. 1 root root 103820392 Nov  5 23:48 minikube-linux-amd64
-rw-r--r--. 1 root root        43 Nov  5 23:54 values-postgres.yaml
-rw-r--r--. 1 root root       278 Nov  6 00:06 create_database.sql
-rw-r--r--. 1 root root      1889 Nov  6 00:18 data_insert_2.py
-rw-r--r--. 1 root root       525 Nov  6 00:29 data_insert.py
-rw-r--r--. 1 root root      1706 Nov  6 00:33 fake_insert.py
-rw-r--r--. 1 root root      1162 Nov  6 01:26 postgresql-deployment.yaml
-rw-r--r--. 1 root root       470 Nov  6 01:36 postgresql.conf
-rw-r--r--. 1 root root       144 Nov  6 01:37 pg_hba.conf
-rw-r--r--. 1 root root       794 Nov  6 01:38 postgresql-config.yaml
-rw-r--r--. 1 root root         0 Nov  6 01:41 my-postgresql-cluster-deployment.yaml
-rw-r--r--. 1 root root      6005 Nov  6 01:44 my-postgresql-cluster-statefulset.yaml
drwxr-xr-x. 2 root root       188 Nov  6 22:53 data
drwxr-xr-x. 4 root root        74 Nov  6 23:24 postgresql-chart
-rw-r--r--. 1 root root       748 Nov  7 01:01 values.yaml
-rw-r--r--. 1 root root       559 Nov  7 01:10 haproxy-deployment.yaml
-rw-r--r--. 1 root root       583 Nov  7 01:11 haproxy-configmap.yaml
-rw-r--r--. 1 root root       252 Nov  7 01:11 haproxy-service.yaml
-rw-r--r--. 1 root root       264 Nov  7 01:12 metallb-config.yaml
drwxr-xr-x. 4 root root        74 Nov  7 01:31 postgresql-replica
[root@lab01 ~]# helm install my-replica ./postgresql-replica
NAME: my-replica
LAST DEPLOYED: Thu Nov  7 01:57:30 2024
NAMESPACE: default
STATUS: deployed
REVISION: 1
TEST SUITE: None
[root@lab01 ~]# kubectl get svc -w
NAME                         TYPE           CLUSTER-IP     EXTERNAL-IP      PORT(S)          AGE
haproxy                      LoadBalancer   10.99.37.103   192.168.49.241   5432:31946/TCP   45m
kubernetes                   ClusterIP      10.96.0.1      <none>           443/TCP          26h
my-postgresql1               ClusterIP      10.98.118.49   <none>           5432/TCP         55m
my-postgresql1-hl            ClusterIP      None           <none>           5432/TCP         55m
my-service                   LoadBalancer   10.97.247.56   192.168.49.240   80:31337/TCP     63m
postgres                     NodePort       10.97.172.86   <none>           5432:30867/TCP   3h4m
postgresql                   LoadBalancer   10.102.5.81    192.168.49.242   5432:31385/TCP   150m
postgresql-service-replica   ClusterIP      10.98.46.120   <none>           5432/TCP         8s

[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS             RESTARTS         AGE
haproxy-6dd79cf54f-zrc5t                         0/1     CrashLoopBackOff   13 (3m45s ago)   46m
my-postgresql-cluster-client                     0/1     Error              0                111m
my-postgresql1-0                                 1/1     Running            0                55m
postgresql-b75dbb4c7-86hsc                       1/1     Running            0                150m
postgresql-b75dbb4c7-95sh7                       1/1     Running            0                96m
postgresql-b75dbb4c7-tlh2x                       1/1     Running            0                150m
postgresql-deployment-replica-5c66c6c9fb-tv2zx   1/1     Running            0                17s
[root@lab01 ~]#
[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS             RESTARTS         AGE
haproxy-6dd79cf54f-zrc5t                         0/1     CrashLoopBackOff   13 (3m55s ago)   46m
my-postgresql-cluster-client                     0/1     Error              0                111m
my-postgresql1-0                                 1/1     Running            0                56m
postgresql-b75dbb4c7-86hsc                       1/1     Running            0                150m
postgresql-b75dbb4c7-95sh7                       1/1     Running            0                96m
postgresql-b75dbb4c7-tlh2x                       1/1     Running            0                150m
postgresql-deployment-replica-5c66c6c9fb-tv2zx   1/1     Running            0                27s
[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS             RESTARTS         AGE
haproxy-6dd79cf54f-zrc5t                         0/1     CrashLoopBackOff   13 (3m56s ago)   46m
my-postgresql-cluster-client                     0/1     Error              0                111m
my-postgresql1-0                                 1/1     Running            0                56m
postgresql-b75dbb4c7-86hsc                       1/1     Running            0                150m
postgresql-b75dbb4c7-95sh7                       1/1     Running            0                96m
postgresql-b75dbb4c7-tlh2x                       1/1     Running            0                150m
postgresql-deployment-replica-5c66c6c9fb-tv2zx   1/1     Running            0                28s
[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS             RESTARTS         AGE
haproxy-6dd79cf54f-zrc5t                         0/1     CrashLoopBackOff   13 (3m56s ago)   46m
my-postgresql-cluster-client                     0/1     Error              0                111m
my-postgresql1-0                                 1/1     Running            0                56m
postgresql-b75dbb4c7-86hsc                       1/1     Running            0                150m
postgresql-b75dbb4c7-95sh7                       1/1     Running            0                96m
postgresql-b75dbb4c7-tlh2x                       1/1     Running            0                150m
postgresql-deployment-replica-5c66c6c9fb-tv2zx   1/1     Running            0                28s
[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS             RESTARTS         AGE
haproxy-6dd79cf54f-zrc5t                         0/1     CrashLoopBackOff   13 (3m57s ago)   46m
my-postgresql-cluster-client                     0/1     Error              0                111m
my-postgresql1-0                                 1/1     Running            0                56m
postgresql-b75dbb4c7-86hsc                       1/1     Running            0                151m
postgresql-b75dbb4c7-95sh7                       1/1     Running            0                96m
postgresql-b75dbb4c7-tlh2x                       1/1     Running            0                151m
postgresql-deployment-replica-5c66c6c9fb-tv2zx   1/1     Running            0                29s
[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS             RESTARTS         AGE
haproxy-6dd79cf54f-zrc5t                         0/1     CrashLoopBackOff   13 (3m58s ago)   46m
my-postgresql-cluster-client                     0/1     Error              0                111m
my-postgresql1-0                                 1/1     Running            0                56m
postgresql-b75dbb4c7-86hsc                       1/1     Running            0                151m
postgresql-b75dbb4c7-95sh7                       1/1     Running            0                96m
postgresql-b75dbb4c7-tlh2x                       1/1     Running            0                151m
postgresql-deployment-replica-5c66c6c9fb-tv2zx   1/1     Running            0                30s
[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS             RESTARTS         AGE
haproxy-6dd79cf54f-zrc5t                         0/1     CrashLoopBackOff   13 (3m59s ago)   46m
my-postgresql-cluster-client                     0/1     Error              0                111m
my-postgresql1-0                                 1/1     Running            0                56m
postgresql-b75dbb4c7-86hsc                       1/1     Running            0                151m
postgresql-b75dbb4c7-95sh7                       1/1     Running            0                96m
postgresql-b75dbb4c7-tlh2x                       1/1     Running            0                151m
postgresql-deployment-replica-5c66c6c9fb-tv2zx   1/1     Running            0                31s
[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS             RESTARTS      AGE
haproxy-6dd79cf54f-zrc5t                         0/1     CrashLoopBackOff   13 (4m ago)   46m
my-postgresql-cluster-client                     0/1     Error              0             111m
my-postgresql1-0                                 1/1     Running            0             56m
postgresql-b75dbb4c7-86hsc                       1/1     Running            0             151m
postgresql-b75dbb4c7-95sh7                       1/1     Running            0             96m
postgresql-b75dbb4c7-tlh2x                       1/1     Running            0             151m
postgresql-deployment-replica-5c66c6c9fb-tv2zx   1/1     Running            0             32s
[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS             RESTARTS      AGE
haproxy-6dd79cf54f-zrc5t                         0/1     CrashLoopBackOff   13 (4m ago)   46m
my-postgresql-cluster-client                     0/1     Error              0             111m
my-postgresql1-0                                 1/1     Running            0             56m
postgresql-b75dbb4c7-86hsc                       1/1     Running            0             151m
postgresql-b75dbb4c7-95sh7                       1/1     Running            0             96m
postgresql-b75dbb4c7-tlh2x                       1/1     Running            0             151m
postgresql-deployment-replica-5c66c6c9fb-tv2zx   1/1     Running            0             32s
[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS             RESTARTS        AGE
haproxy-6dd79cf54f-zrc5t                         0/1     CrashLoopBackOff   13 (4m1s ago)   46m
my-postgresql-cluster-client                     0/1     Error              0               111m
my-postgresql1-0                                 1/1     Running            0               56m
postgresql-b75dbb4c7-86hsc                       1/1     Running            0               151m
postgresql-b75dbb4c7-95sh7                       1/1     Running            0               96m
postgresql-b75dbb4c7-tlh2x                       1/1     Running            0               151m
postgresql-deployment-replica-5c66c6c9fb-tv2zx   1/1     Running            0               33s
[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS             RESTARTS        AGE
haproxy-6dd79cf54f-zrc5t                         0/1     CrashLoopBackOff   13 (4m3s ago)   46m
my-postgresql-cluster-client                     0/1     Error              0               111m
my-postgresql1-0                                 1/1     Running            0               56m
postgresql-b75dbb4c7-86hsc                       1/1     Running            0               151m
postgresql-b75dbb4c7-95sh7                       1/1     Running            0               96m
postgresql-b75dbb4c7-tlh2x                       1/1     Running            0               151m
postgresql-deployment-replica-5c66c6c9fb-tv2zx   1/1     Running            0               35s
[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS             RESTARTS        AGE
haproxy-6dd79cf54f-zrc5t                         0/1     CrashLoopBackOff   13 (4m4s ago)   46m
my-postgresql-cluster-client                     0/1     Error              0               111m
my-postgresql1-0                                 1/1     Running            0               56m
postgresql-b75dbb4c7-86hsc                       1/1     Running            0               151m
postgresql-b75dbb4c7-95sh7                       1/1     Running            0               96m
postgresql-b75dbb4c7-tlh2x                       1/1     Running            0               151m
postgresql-deployment-replica-5c66c6c9fb-tv2zx   1/1     Running            0               36s
[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS             RESTARTS        AGE
haproxy-6dd79cf54f-zrc5t                         0/1     CrashLoopBackOff   13 (4m4s ago)   46m
my-postgresql-cluster-client                     0/1     Error              0               111m
my-postgresql1-0                                 1/1     Running            0               56m
postgresql-b75dbb4c7-86hsc                       1/1     Running            0               151m
postgresql-b75dbb4c7-95sh7                       1/1     Running            0               96m
postgresql-b75dbb4c7-tlh2x                       1/1     Running            0               151m
postgresql-deployment-replica-5c66c6c9fb-tv2zx   1/1     Running            0               36s
[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS             RESTARTS        AGE
haproxy-6dd79cf54f-zrc5t                         0/1     CrashLoopBackOff   13 (4m5s ago)   46m
my-postgresql-cluster-client                     0/1     Error              0               111m
my-postgresql1-0                                 1/1     Running            0               56m
postgresql-b75dbb4c7-86hsc                       1/1     Running            0               151m
postgresql-b75dbb4c7-95sh7                       1/1     Running            0               96m
postgresql-b75dbb4c7-tlh2x                       1/1     Running            0               151m
postgresql-deployment-replica-5c66c6c9fb-tv2zx   1/1     Running            0               37s
[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS             RESTARTS        AGE
haproxy-6dd79cf54f-zrc5t                         0/1     CrashLoopBackOff   13 (4m6s ago)   46m
my-postgresql-cluster-client                     0/1     Error              0               111m
my-postgresql1-0                                 1/1     Running            0               56m
postgresql-b75dbb4c7-86hsc                       1/1     Running            0               151m
postgresql-b75dbb4c7-95sh7                       1/1     Running            0               96m
postgresql-b75dbb4c7-tlh2x                       1/1     Running            0               151m
postgresql-deployment-replica-5c66c6c9fb-tv2zx   1/1     Running            0               38s
[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS             RESTARTS        AGE
haproxy-6dd79cf54f-zrc5t                         0/1     CrashLoopBackOff   13 (4m7s ago)   46m
my-postgresql-cluster-client                     0/1     Error              0               111m
my-postgresql1-0                                 1/1     Running            0               56m
postgresql-b75dbb4c7-86hsc                       1/1     Running            0               151m
postgresql-b75dbb4c7-95sh7                       1/1     Running            0               96m
postgresql-b75dbb4c7-tlh2x                       1/1     Running            0               151m
postgresql-deployment-replica-5c66c6c9fb-tv2zx   1/1     Running            0               39s
[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS             RESTARTS        AGE
haproxy-6dd79cf54f-zrc5t                         0/1     CrashLoopBackOff   13 (4m9s ago)   46m
my-postgresql-cluster-client                     0/1     Error              0               111m
my-postgresql1-0                                 1/1     Running            0               56m
postgresql-b75dbb4c7-86hsc                       1/1     Running            0               151m
postgresql-b75dbb4c7-95sh7                       1/1     Running            0               96m
postgresql-b75dbb4c7-tlh2x                       1/1     Running            0               151m
postgresql-deployment-replica-5c66c6c9fb-tv2zx   1/1     Running            0               41s
[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS             RESTARTS         AGE
haproxy-6dd79cf54f-zrc5t                         0/1     CrashLoopBackOff   13 (4m10s ago)   46m
my-postgresql-cluster-client                     0/1     Error              0                111m
my-postgresql1-0                                 1/1     Running            0                56m
postgresql-b75dbb4c7-86hsc                       1/1     Running            0                151m
postgresql-b75dbb4c7-95sh7                       1/1     Running            0                96m
postgresql-b75dbb4c7-tlh2x                       1/1     Running            0                151m
postgresql-deployment-replica-5c66c6c9fb-tv2zx   1/1     Running            0                42s
[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS             RESTARTS         AGE
haproxy-6dd79cf54f-zrc5t                         0/1     CrashLoopBackOff   13 (4m10s ago)   46m
my-postgresql-cluster-client                     0/1     Error              0                111m
my-postgresql1-0                                 1/1     Running            0                56m
postgresql-b75dbb4c7-86hsc                       1/1     Running            0                151m
postgresql-b75dbb4c7-95sh7                       1/1     Running            0                96m
postgresql-b75dbb4c7-tlh2x                       1/1     Running            0                151m
postgresql-deployment-replica-5c66c6c9fb-tv2zx   1/1     Running            0                42s
[root@lab01 ~]# kubectl delete pod haproxy-6dd79cf54f-zrc5t
pod "haproxy-6dd79cf54f-zrc5t" deleted
[root@lab01 ~]#
[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS              RESTARTS   AGE
haproxy-6dd79cf54f-qnk9l                         0/1     ContainerCreating   0          3s
my-postgresql-cluster-client                     0/1     Error               0          111m
my-postgresql1-0                                 1/1     Running             0          56m
postgresql-b75dbb4c7-86hsc                       1/1     Running             0          151m
postgresql-b75dbb4c7-95sh7                       1/1     Running             0          97m
postgresql-b75dbb4c7-tlh2x                       1/1     Running             0          151m
postgresql-deployment-replica-5c66c6c9fb-tv2zx   1/1     Running             0          57s
[root@lab01 ~]# helm delete haproxy-6dd79cf54f-qnk9l
Error: uninstall: Release not loaded: haproxy-6dd79cf54f-qnk9l: release: not found
[root@lab01 ~]#
[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS              RESTARTS      AGE
haproxy-6dd79cf54f-qnk9l                         0/1     RunContainerError   1 (27s ago)   34s
my-postgresql-cluster-client                     0/1     Error               0             112m
my-postgresql1-0                                 1/1     Running             0             57m
postgresql-b75dbb4c7-86hsc                       1/1     Running             0             151m
postgresql-b75dbb4c7-95sh7                       1/1     Running             0             97m
postgresql-b75dbb4c7-tlh2x                       1/1     Running             0             151m
postgresql-deployment-replica-5c66c6c9fb-tv2zx   1/1     Running             0             88s
[root@lab01 ~]# helm delete haproxy-6dd79cf54f-qnk9l
Error: uninstall: Release not loaded: haproxy-6dd79cf54f-qnk9l: release: not found
[root@lab01 ~]#
[root@lab01 ~]# helm delete my-postgresql-cluster-client
Error: uninstall: Release not loaded: my-postgresql-cluster-client: release: not found
[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS              RESTARTS     AGE
haproxy-6dd79cf54f-qnk9l                         0/1     RunContainerError   3 (3s ago)   55s
my-postgresql-cluster-client                     0/1     Error               0            112m
my-postgresql1-0                                 1/1     Running             0            57m
postgresql-b75dbb4c7-86hsc                       1/1     Running             0            152m
postgresql-b75dbb4c7-95sh7                       1/1     Running             0            98m
postgresql-b75dbb4c7-tlh2x                       1/1     Running             0            152m
postgresql-deployment-replica-5c66c6c9fb-tv2zx   1/1     Running             0            109s
[root@lab01 ~]# kubectl get svc -w
NAME                         TYPE           CLUSTER-IP     EXTERNAL-IP      PORT(S)          AGE
haproxy                      LoadBalancer   10.99.37.103   192.168.49.241   5432:31946/TCP   47m
kubernetes                   ClusterIP      10.96.0.1      <none>           443/TCP          26h
my-postgresql1               ClusterIP      10.98.118.49   <none>           5432/TCP         58m
my-postgresql1-hl            ClusterIP      None           <none>           5432/TCP         58m
my-service                   LoadBalancer   10.97.247.56   192.168.49.240   80:31337/TCP     65m
postgres                     NodePort       10.97.172.86   <none>           5432:30867/TCP   3h6m
postgresql                   LoadBalancer   10.102.5.81    192.168.49.242   5432:31385/TCP   152m
postgresql-service-replica   ClusterIP      10.98.46.120   <none>           5432/TCP         2m27s

[root@lab01 ~]# kubectl exec -it postgresql-service-replica -- su - postgres
Error from server (NotFound): pods "postgresql-service-replica" not found
[root@lab01 ~]#
[root@lab01 ~]# helm delete my-postgresql-cluster-client
Error: uninstall: Release not loaded: my-postgresql-cluster-client: release: not found
[root@lab01 ~]#
[root@lab01 ~]#
[root@lab01 ~]# kubectl exec -it postgresql-deployment-replica-5c66c6c9fb-tv2zx -- su - postgres
postgres@postgresql-deployment-replica-5c66c6c9fb-tv2zx:~$
postgres@postgresql-deployment-replica-5c66c6c9fb-tv2zx:~$
postgres@postgresql-deployment-replica-5c66c6c9fb-tv2zx:~$
postgres@postgresql-deployment-replica-5c66c6c9fb-tv2zx:~$ psql
psql: error: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  role "postgres" does not exist
postgres@postgresql-deployment-replica-5c66c6c9fb-tv2zx:~$ psql -U ps_user -d postgres
psql (14.13 (Debian 14.13-1.pgdg120+1))
Type "help" for help.

postgres=# \q
postgres@postgresql-deployment-replica-5c66c6c9fb-tv2zx:~$
postgres@postgresql-deployment-replica-5c66c6c9fb-tv2zx:~$ systemctl stop postgresql
-bash: systemctl: command not found
postgres@postgresql-deployment-replica-5c66c6c9fb-tv2zx:~$ exit
logout
command terminated with exit code 127
[root@lab01 ~]# systemctl stop postgresql
Failed to stop postgresql.service: Unit postgresql.service not loaded.
[root@lab01 ~]# kubectl exec -it postgresql-deployment-replica-5c66c6c9fb-tv2zx -- su - postgres
postgres@postgresql-deployment-replica-5c66c6c9fb-tv2zx:~$ systemctl stop postgresql
-bash: systemctl: command not found
postgres@postgresql-deployment-replica-5c66c6c9fb-tv2zx:~$ exit
logout
command terminated with exit code 127
[root@lab01 ~]# kubectl exec -it postgresql-deployment-replica-5c66c6c9fb-tv2zx
error: you must specify at least one command for the container
[root@lab01 ~]# kubectl exec -it postgresql-deployment-replica-5c66c6c9fb-tv2zx -- /bin/bash
root@postgresql-deployment-replica-5c66c6c9fb-tv2zx:/# systemctl stop postgresql
bash: systemctl: command not found
root@postgresql-deployment-replica-5c66c6c9fb-tv2zx:/#
root@postgresql-deployment-replica-5c66c6c9fb-tv2zx:/# exit
exit
command terminated with exit code 127
[root@lab01 ~]# kubectl get deployments
NAME                            READY   UP-TO-DATE   AVAILABLE   AGE
haproxy                         0/1     1            0           55m
postgresql                      3/3     3            3           159m
postgresql-deployment-replica   1/1     1            1           9m28s
[root@lab01 ~]# kubectl scale deployment postgresql-deployment-replica --replicas=0
deployment.apps/postgresql-deployment-replica scaled
[root@lab01 ~]# kubectl exec -it  postgresql-deployment-replica-5c66c6c9fb-tv2zx  -- rm -rf /var/lib/postgresql/data/*
Error from server (NotFound): pods "postgresql-deployment-replica-5c66c6c9fb-tv2zx" not found
[root@lab01 ~]# kubectl get pods
NAME                           READY   STATUS             RESTARTS        AGE
haproxy-6dd79cf54f-qnk9l       0/1     CrashLoopBackOff   6 (3m56s ago)   9m50s
my-postgresql-cluster-client   0/1     Error              0               121m
my-postgresql1-0               1/1     Running            0               66m
postgresql-b75dbb4c7-86hsc     1/1     Running            0               161m
postgresql-b75dbb4c7-95sh7     1/1     Running            0               106m
postgresql-b75dbb4c7-tlh2x     1/1     Running            0               161m
[root@lab01 ~]# kubectl get deployments
NAME                            READY   UP-TO-DATE   AVAILABLE   AGE
haproxy                         0/1     1            0           56m
postgresql                      3/3     3            3           161m
postgresql-deployment-replica   0/0     0            0           11m
[root@lab01 ~]# kubectl exec -it postgresql-deployment-replica-5c66c6c9fb-tv2zx -- su - postgres
Error from server (NotFound): pods "postgresql-deployment-replica-5c66c6c9fb-tv2zx" not found
[root@lab01 ~]#
[root@lab01 ~]# kubectl get deployment postgresql-deployment-replica
NAME                            READY   UP-TO-DATE   AVAILABLE   AGE
postgresql-deployment-replica   0/0     0            0           12m
[root@lab01 ~]# kubectl scale deployment postgresql-deployment-replica --replicas=1
deployment.apps/postgresql-deployment-replica scaled
[root@lab01 ~]# kubectl exec -it postgresql-deployment-replica-5c66c6c9fb-tv2zx -- su - postgres
Error from server (NotFound): pods "postgresql-deployment-replica-5c66c6c9fb-tv2zx" not found
[root@lab01 ~]# kubectl get pods
NAME                                             READY   STATUS             RESTARTS      AGE
haproxy-6dd79cf54f-qnk9l                         0/1     CrashLoopBackOff   7 (41s ago)   11m
my-postgresql-cluster-client                     0/1     Error              0             123m
my-postgresql1-0                                 1/1     Running            0             68m
postgresql-b75dbb4c7-86hsc                       1/1     Running            0             163m
postgresql-b75dbb4c7-95sh7                       1/1     Running            0             108m
postgresql-b75dbb4c7-tlh2x                       1/1     Running            0             163m
postgresql-deployment-replica-5c66c6c9fb-qzd56   1/1     Running            0             9s
[root@lab01 ~]# kubectl exec -it postgresql-deployment-replica-5c66c6c9fb-qzd56 -- su - postgres
postgres@postgresql-deployment-replica-5c66c6c9fb-qzd56:~$
